var F=(_,u,f)=>new Promise((g,x)=>{var T=i=>{try{w(f.next(i))}catch(c){x(c)}},t=i=>{try{w(f.throw(i))}catch(c){x(c)}},w=i=>i.done?g(i.value):Promise.resolve(i.value).then(T,t);w((f=f.apply(_,u)).next())});import{k as o,l as a,p as e,f as r,b as I,o as _e,e as be,s as ke,x as d,B as v,C as S,u as xe,a as k,A as M,F as X,I as V,H as E,D as te,E as pe,S as We,z as U,q as Ge,v as Ze,U as se,y as fe,M as He}from"./vue-vendor-Clry8SR-.js";import{_ as we,f as $e,b as Ce,d as Ke,c as Qe,e as qe,i as Je}from"./main-capacitor-rPhIOL4v.js";import{u as et}from"./listings-BoIexBmh.js";import{L as tt}from"./ListingCard-BH_E9Uvu.js";import{L as Y}from"./leaflet-DApKsNmz.js";import{toast as le}from"./ui-vendor-B7DvqItC.js";import{_ as st}from"./LoadingSpinner-Cm-rHxE2.js";import{r as lt,a as at}from"./ClockIcon-BKZzCkR-.js";import{r as ot,R as it}from"./ReportModal-DJ9zuhSG.js";import{d as nt}from"./dayjs.min-VXSoyYVV.js";import{r as rt}from"./EyeIcon-C--lcS42.js";import{r as ut}from"./StarIcon-BRCRKmnt.js";import{r as ye}from"./PhoneIcon-BqlohvOv.js";import"./relativeTime-BN4FbP67.js";import"./SparklesIcon-BKZY3LMx.js";function ct(_,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function dt(_,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const vt={class:"location-display"},ht={class:"mt-3 space-y-2"},gt={class:"flex items-start gap-2"},mt={class:"text-gray-900 font-medium"},pt={key:0,class:"text-sm text-gray-500"},ft=["href"],yt={__name:"LocationDisplay",props:{latitude:{type:Number,default:null},longitude:{type:Number,default:null},locality:{type:String,default:""},city:{type:String,default:""},state:{type:String,default:""},postalCode:{type:String,default:""}},setup(_){delete Y.Icon.Default.prototype._getIconUrl,Y.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const u=_,f=r(null);let g=null,x=null;const T=I(()=>u.latitude&&u.longitude),t=I(()=>{const c=[];return u.locality&&c.push(u.locality),u.city&&c.push(u.city),u.state&&c.push(u.state),c.join(", ")||"Location not specified"}),w=I(()=>T.value?`https://www.google.com/maps/dir/?api=1&destination=${u.latitude},${u.longitude}`:"#");_e(()=>{i()}),be(()=>{g&&(g.remove(),g=null)});const i=()=>{if(!f.value)return;const c=u.latitude||20.5937,y=u.longitude||78.9629,z=T.value?14:5;g=Y.map(f.value,{scrollWheelZoom:!1,dragging:!Y.Browser.mobile,tap:!1}).setView([c,y],z),Y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(g),T.value&&(Y.circle([u.latitude,u.longitude],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(g),x=Y.marker([u.latitude,u.longitude]).addTo(g))};return ke(()=>[u.latitude,u.longitude],([c,y])=>{g&&c&&y&&(g.setView([c,y],14),x&&g.removeLayer(x),Y.circle([c,y],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(g),x=Y.marker([c,y]).addTo(g))}),(c,y)=>(a(),o("div",vt,[e("div",{ref_key:"mapContainer",ref:f,class:"h-48 rounded-lg border border-gray-200 z-0"},null,512),e("div",ht,[e("div",gt,[y[0]||(y[0]=e("svg",{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",null,[e("p",mt,v(t.value),1),_.postalCode?(a(),o("p",pt,"PIN: "+v(_.postalCode),1)):d("",!0)])]),T.value?(a(),o("a",{key:0,href:w.value,target:"_blank",class:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700"},[...y[1]||(y[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),S(" Get Directions ",-1)])],8,ft)):d("",!0)])]))}},_t={class:"chat-modal-overlay"},bt={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-xl animate-slide-up max-h-[90vh] overflow-y-auto"},kt={class:"flex items-center justify-between p-4 border-b"},xt={key:0,class:"p-4 bg-gray-50 border-b"},wt={class:"flex gap-3"},$t=["src","alt"],Ct={class:"flex-1 min-w-0"},Mt={class:"font-medium text-gray-900 truncate"},Tt={class:"text-lg font-bold text-primary-600"},St={class:"p-4 border-b"},Lt={class:"flex flex-wrap gap-2"},It=["onClick"],Dt={class:"p-4"},Yt={class:"mt-3"},jt={class:"flex items-center gap-2 text-sm"},Xt={key:0,class:"mt-2 flex items-center gap-2"},zt=["max"],At={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl safe-area-bottom"},Vt=["disabled"],Ut={__name:"ChatModal",props:{listing:{type:Object,required:!0}},emits:["close","sent"],setup(_,{emit:u}){const f=_,g=I(()=>{var $,n,b;return((n=($=f.listing)==null?void 0:$.user)==null?void 0:n.id)||((b=f.listing)==null?void 0:b.user_id)}),x=u,T=xe(),t=r(""),w=r(!1),i=r(null),c=r(!1),y=["Is this still available?","Can you share more photos?","What is the condition?","Is the price negotiable?","Can I see it today?"],z=()=>F(this,null,function*(){var $,n;if(t.value.trim()){c.value=!0;try{const b={listing_id:f.listing.id,receiver_id:g.value,message:t.value.trim()};w.value&&i.value&&(b.offer_amount=i.value);const h=yield Ce.post("/conversations",b);le.success("Message sent!"),x("sent",h.data.data),x("close");const N=h.data.data.conversation;T.push(`/messages/${N.uuid}`)}catch(b){if((($=b.response)==null?void 0:$.status)===409){le.info("You already have a conversation about this listing");const h=((n=b.response.data.data)==null?void 0:n.uuid)||b.response.data.uuid;T.push(`/messages/${h}`),x("close")}else le.error("Failed to send message")}finally{c.value=!1}}});return($,n)=>{var b;return a(),o("div",_t,[e("div",{class:"absolute inset-0 bg-black/50",onClick:n[0]||(n[0]=h=>$.$emit("close"))}),e("div",bt,[e("div",kt,[n[6]||(n[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Contact Seller",-1)),e("button",{onClick:n[1]||(n[1]=h=>$.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[k(M($e),{class:"w-5 h-5 text-gray-500"})])]),_.listing?(a(),o("div",xt,[e("div",wt,[e("img",{src:_.listing.primary_image_url,alt:_.listing.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,$t),e("div",Ct,[e("h4",Mt,v(_.listing.title),1),e("p",Tt,v(_.listing.formatted_price),1)])])])):d("",!0),e("div",St,[n[7]||(n[7]=e("p",{class:"text-sm text-gray-500 mb-3"},"Quick messages:",-1)),e("div",Lt,[(a(),o(X,null,V(y,h=>e("button",{key:h,onClick:N=>t.value=h,class:E(["px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition",t.value===h?"bg-primary-100 text-primary-700":""])},v(h),11,It)),64))])]),e("div",Dt,[te(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=h=>t.value=h),rows:"3",class:"input resize-none",placeholder:"Write your message..."},null,512),[[pe,t.value]]),e("div",Yt,[e("label",jt,[te(e("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=h=>w.value=h),class:"rounded text-primary-600"},null,512),[[We,w.value]]),n[8]||(n[8]=S(" Include an offer ",-1))]),w.value?(a(),o("div",Xt,[n[9]||(n[9]=e("span",{class:"text-gray-500"},"â‚¹",-1)),te(e("input",{"onUpdate:modelValue":n[4]||(n[4]=h=>i.value=h),type:"number",class:"input flex-1",placeholder:"Your offer amount",max:(b=_.listing)==null?void 0:b.price},null,8,zt),[[pe,i.value,void 0,{number:!0}]])])):d("",!0)])]),e("div",At,[e("button",{onClick:n[5]||(n[5]=h=>$.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:z,disabled:!t.value.trim()||c.value,class:"btn-primary flex-1"},[c.value?(a(),U(st,{key:1,class:"w-5 h-5 mr-2"})):(a(),U(M(lt),{key:0,class:"w-5 h-5 mr-2"})),S(" "+v(c.value?"Sending...":"Send Message"),1)],8,Vt)])])])}}},Nt=we(Ut,[["__scopeId","data-v-e47b84c3"]]),Bt={class:"listing-detail-page"},Et={key:0,class:"container-app py-6"},Ot={class:"image-gallery-section"},Pt=["src","alt"],Rt={key:0,class:"image-counter"},Ft={class:"image-badges"},Wt={key:0,class:"badge-featured"},Gt={key:1,class:"badge-urgent"},Zt={key:1,class:"swipe-dots"},Ht={key:0,class:"thumbnails-strip"},Kt=["onClick"],Qt=["src","alt"],qt={class:"container-app py-4"},Jt={class:"lg:grid lg:grid-cols-3 lg:gap-6"},es={class:"lg:col-span-2 space-y-4"},ts={class:"detail-card"},ss={class:"flex items-start justify-between gap-4"},ls={class:"flex-1"},as={class:"price"},os={class:"title"},is={class:"action-buttons"},ns={class:"meta-info"},rs={class:"detail-card"},us={class:"details-grid"},cs={key:0,class:"detail-item"},ds={class:"value"},vs={key:1,class:"detail-item"},hs={class:"value"},gs={key:2,class:"detail-item"},ms={class:"value"},ps={key:3,class:"detail-item"},fs={class:"value"},ys={key:4,class:"detail-item"},_s={class:"value"},bs={class:"detail-card"},ks={class:"description"},xs={class:"detail-card"},ws={class:"lg:col-span-1 space-y-4 mt-4 lg:mt-0"},$s={class:"seller-card"},Cs={class:"seller-header"},Ms=["src","alt"],Ts={class:"seller-info"},Ss={class:"seller-rating"},Ls={class:"text-gray-400"},Is={key:0,class:"seller-location"},Ds={key:0,class:"verified-badge"},Ys={class:"seller-actions"},js=["href"],Xs={key:0,class:"similar-section"},zs={class:"similar-grid"},As=["src","alt"],Vs={key:0,class:"lightbox-counter"},Us={key:1,class:"lightbox-dots"},Ns={__name:"ListingDetail",setup(_){const u=Ge(),f=xe(),g=Ke(),x=et(),T=r(!0),t=r(null),w=r([]),i=r(0),c=r(!1),y=r(!1),z=r(!1),$=r(!1),n=r(!1),b=r(0),h=r(0),N=r(0),Me=I(()=>{const s=-i.value*N.value;return n.value?s+(h.value-b.value):s}),Te=s=>{s.touches.length===1&&(n.value=!0,b.value=s.touches[0].clientX,h.value=s.touches[0].clientX,N.value=s.currentTarget.offsetWidth)},Se=s=>{!n.value||s.touches.length!==1||(h.value=s.touches[0].clientX)},Le=()=>{if(!n.value)return;n.value=!1;const s=h.value-b.value,l=N.value*.2;s>l&&i.value>0?i.value--:s<-l&&i.value<t.value.images.length-1&&i.value++},Ie=s=>{i.value=s},W=r(!1),A=r(!1),G=r(0),O=r(0),P=r(0),B=r(0),L=r(1),H=r(0),K=r(0),Q=r(0),q=r(!1),D=r(null),De=I(()=>{const s=-i.value*H.value;return A.value&&D.value==="horizontal"&&L.value===1?s+(P.value-G.value):s}),Ye=I(()=>A.value&&D.value==="vertical"&&L.value===1?B.value-O.value:0),je=I(()=>{if(D.value==="vertical"&&L.value===1){const s=Math.abs(B.value-O.value);return Math.max(.3,1-s/300)}return 1}),Xe=s=>{const l=Date.now();if(l-K.value<300&&s.touches.length===1){L.value=L.value===1?2:1,K.value=0;return}K.value=l,s.touches.length===2?(q.value=!0,Q.value=ae(s.touches)):s.touches.length===1&&(A.value=!0,G.value=s.touches[0].clientX,O.value=s.touches[0].clientY,P.value=s.touches[0].clientX,B.value=s.touches[0].clientY,H.value=window.innerWidth,D.value=null)},ze=s=>{if(q.value&&s.touches.length===2){const l=ae(s.touches),m=l/Q.value;L.value=Math.max(1,Math.min(3,L.value*m)),Q.value=l;return}if(!(!A.value||s.touches.length!==1)){if(P.value=s.touches[0].clientX,B.value=s.touches[0].clientY,!D.value){const l=Math.abs(P.value-G.value),m=Math.abs(B.value-O.value);(l>10||m>10)&&(D.value=l>m?"horizontal":"vertical")}D.value==="horizontal"&&L.value===1&&s.preventDefault()}},Ae=()=>{if(q.value=!1,!A.value)return;if(A.value=!1,L.value>1){D.value=null;return}const s=P.value-G.value,l=B.value-O.value,m=H.value*.2;D.value==="horizontal"?s>m&&i.value>0?i.value--:s<-m&&i.value<t.value.images.length-1&&i.value++:D.value==="vertical"&&Math.abs(l)>100&&J(),D.value=null},ae=s=>Math.hypot(s[0].clientX-s[1].clientX,s[0].clientY-s[1].clientY);I(()=>{var s,l,m,j;return(l=(s=t.value)==null?void 0:s.images)!=null&&l.length?(j=t.value.images[i.value])==null?void 0:j.url:(m=t.value)==null?void 0:m.primary_image_url});const Z=I(()=>{var s,l,m;return((s=g.user)==null?void 0:s.id)===((m=(l=t.value)==null?void 0:l.user)==null?void 0:m.id)}),Ve=I(()=>{var l;return(((l=t.value)==null?void 0:l.formatted_price)||"").replace(/\s*\(Negotiable\)/gi,"").trim()}),Ue=I(()=>{var l,m,j,R;const s=(m=(l=t.value)==null?void 0:l.user)==null?void 0:m.avatar_url;return s&&!s.includes("default")?s:"https://ui-avatars.com/api/?name="+encodeURIComponent(((R=(j=t.value)==null?void 0:j.user)==null?void 0:R.name)||"U")+"&background=7c3aed&color=fff&size=120"}),Ne=s=>{if(!s)return"Recently";const l=nt(s);return l.isValid()?l.format("MMM D, YYYY"):"Recently"},Be=s=>({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[s]||(s==null?void 0:s.replace(/_/g," ")),oe=s=>{s.target.dataset.fallback||(s.target.dataset.fallback="true",s.target.src="https://placehold.co/800x600/e2e8f0/64748b?text=Image+Not+Available")},Ee=()=>{W.value=!0,L.value=1,document.body.style.overflow="hidden"},J=()=>{W.value=!1,L.value=1,document.body.style.overflow=""},Oe=()=>F(this,null,function*(){if(!g.isAuthenticated){f.push("/login");return}const s=yield x.toggleFavorite(t.value.id);c.value=s.is_favorited}),Pe=()=>{if(!g.isAuthenticated){f.push("/login");return}y.value=!0},Re=()=>{navigator.share&&navigator.share({title:t.value.title,text:`Check out: ${t.value.title}`,url:window.location.href})},Fe=()=>F(this,null,function*(){if(!g.isAuthenticated){f.push("/login");return}try{yield Ce.post(`/listings/${t.value.id}/track-contact`,{type:"phone"})}catch(s){}$.value=!0}),ie=()=>F(this,null,function*(){var s;try{const l=yield x.fetchListing(u.params.slug);t.value=l.listing,w.value=l.similar,c.value=l.listing.is_favorited}catch(l){((s=l.response)==null?void 0:s.status)===404&&f.push("/404")}finally{T.value=!1}}),ne=s=>{s.key==="Escape"&&W.value&&J()};return _e(()=>{ie(),window.addEventListener("keydown",ne)}),be(()=>{window.removeEventListener("keydown",ne),document.body.style.overflow=""}),ke(()=>u.params.slug,(s,l)=>{s!==l&&(T.value=!0,i.value=0,$.value=!1,ie())}),(s,l)=>{var j,R,re,ue,ce,de,ve,he,ge,me;const m=Ze("router-link");return a(),o("div",Bt,[T.value?(a(),o("div",Et,[...l[3]||(l[3]=[e("div",{class:"skeleton h-80 mb-4 rounded-lg"},null,-1),e("div",{class:"skeleton h-8 w-1/3 mb-2"},null,-1),e("div",{class:"skeleton h-6 w-full mb-4"},null,-1),e("div",{class:"skeleton h-24 w-full"},null,-1)])])):t.value?(a(),o(X,{key:1},[e("div",Ot,[e("div",{class:"main-image-container",onClick:Ee,onTouchstart:Te,onTouchmove:Se,onTouchend:Le},[e("div",{class:"images-track",style:se({transform:`translateX(${Me.value}px)`,transition:n.value?"none":"transform 0.3s ease-out"})},[(a(!0),o(X,null,V(t.value.images,(p,C)=>(a(),o("div",{key:p.id,class:"image-slide"},[e("img",{src:p.medium_url||p.url,alt:`${t.value.title} - Image ${C+1}`,class:"main-image",onError:oe},null,40,Pt)]))),128))],4),((j=t.value.images)==null?void 0:j.length)>1?(a(),o("div",Rt,v(i.value+1)+" / "+v(t.value.images.length),1)):d("",!0),e("div",Ft,[t.value.is_featured?(a(),o("span",Wt,"Featured")):d("",!0),t.value.is_urgent?(a(),o("span",Gt,"Urgent")):d("",!0)]),((R=t.value.images)==null?void 0:R.length)>1?(a(),o("div",Zt,[(a(!0),o(X,null,V(t.value.images,(p,C)=>(a(),o("span",{key:C,class:E(["dot",{active:i.value===C}])},null,2))),128))])):d("",!0)],32),((re=t.value.images)==null?void 0:re.length)>1?(a(),o("div",Ht,[(a(!0),o(X,null,V(t.value.images,(p,C)=>(a(),o("button",{key:p.id,onClick:ee=>Ie(C),class:E(["thumbnail",{active:i.value===C}])},[e("img",{src:p.thumbnail_url||p.url,alt:`Image ${C+1}`},null,8,Qt)],10,Kt))),128))])):d("",!0)]),e("div",qt,[e("div",Jt,[e("div",es,[e("div",ts,[e("div",ss,[e("div",ls,[e("p",as,v(Ve.value),1),e("h1",os,v(t.value.title),1)]),e("div",is,[e("button",{onClick:Oe,class:E(["action-btn",{"is-favorite":c.value}])},[k(M(Qe),{class:E(["w-6 h-6",c.value?"fill-current":""])},null,8,["class"])],2),e("button",{onClick:Re,class:"action-btn"},[k(M(dt),{class:"w-6 h-6"})])])]),e("div",ns,[e("span",null,[k(M(qe),{class:"w-4 h-4"}),S(" "+v(t.value.location),1)]),e("span",null,[k(M(at),{class:"w-4 h-4"}),S(" "+v(Ne(t.value.published_at)),1)]),e("span",null,[k(M(rt),{class:"w-4 h-4"}),S(" "+v(t.value.views_count)+" views",1)])])]),e("div",rs,[l[9]||(l[9]=e("h3",{class:"section-title"},"Details",-1)),e("div",us,[t.value.condition?(a(),o("div",cs,[l[4]||(l[4]=e("span",{class:"label"},"Condition",-1)),e("span",ds,v(Be(t.value.condition)),1)])):d("",!0),t.value.brand?(a(),o("div",vs,[l[5]||(l[5]=e("span",{class:"label"},"Brand",-1)),e("span",hs,v(t.value.brand),1)])):d("",!0),t.value.model?(a(),o("div",gs,[l[6]||(l[6]=e("span",{class:"label"},"Model",-1)),e("span",ms,v(t.value.model),1)])):d("",!0),t.value.year?(a(),o("div",ps,[l[7]||(l[7]=e("span",{class:"label"},"Year",-1)),e("span",fs,v(t.value.year),1)])):d("",!0),t.value.category?(a(),o("div",ys,[l[8]||(l[8]=e("span",{class:"label"},"Category",-1)),e("span",_s,v(t.value.category.name),1)])):d("",!0)])]),e("div",bs,[l[10]||(l[10]=e("h3",{class:"section-title"},"Description",-1)),e("p",ks,v(t.value.description),1)]),e("div",xs,[l[11]||(l[11]=e("h3",{class:"section-title"},"Location",-1)),k(yt,{latitude:t.value.latitude,longitude:t.value.longitude,locality:t.value.locality,city:t.value.city,state:t.value.state,"postal-code":t.value.postal_code},null,8,["latitude","longitude","locality","city","state","postal-code"])])]),e("div",ws,[e("div",$s,[e("div",Cs,[e("img",{src:Ue.value,alt:t.value.user.name,class:"seller-avatar"},null,8,Ms),e("div",Ts,[k(m,{to:`/user/${t.value.user.id}`,class:"seller-name"},{default:fe(()=>[S(v(t.value.user.name),1)]),_:1},8,["to"]),e("div",Ss,[k(M(ut),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",null,v(t.value.user.rating||"0.0"),1),e("span",Ls,"("+v(t.value.user.total_reviews||0)+")",1)]),t.value.user.city?(a(),o("p",Is,v(t.value.user.city),1)):d("",!0)])]),t.value.user.is_verified_seller?(a(),o("div",Ds,[k(M(ct),{class:"w-5 h-5"}),l[12]||(l[12]=S(" Verified Seller ",-1))])):d("",!0),e("div",Ys,[Z.value?d("",!0):(a(),o("button",{key:0,onClick:Pe,class:"btn-chat"},[k(M(Je),{class:"w-5 h-5"}),l[13]||(l[13]=S(" Chat with Seller ",-1))])),t.value.user.phone&&!Z.value&&!$.value?(a(),o("button",{key:1,onClick:Fe,class:"btn-phone"},[k(M(ye),{class:"w-5 h-5"}),l[14]||(l[14]=S(" Show Phone Number ",-1))])):d("",!0),t.value.user.phone&&!Z.value&&$.value?(a(),o("a",{key:2,href:`tel:${t.value.user.phone}`,class:"btn-phone-revealed"},[k(M(ye),{class:"w-5 h-5"}),S(" "+v(t.value.user.phone),1)],8,js)):d("",!0),Z.value?(a(),U(m,{key:3,to:`/listing/${t.value.id}/edit`,class:"btn-edit"},{default:fe(()=>[...l[15]||(l[15]=[S(" Edit Listing ",-1)])]),_:1},8,["to"])):d("",!0)])]),l[17]||(l[17]=e("div",{class:"safety-card"},[e("h4",null,"Safety Tips"),e("ul",null,[e("li",null,"Meet in a safe public place"),e("li",null,"Check the item before you pay"),e("li",null,"Pay only after collecting the item"),e("li",null,"Never share financial information")])],-1)),e("button",{onClick:l[0]||(l[0]=p=>z.value=!0),class:"report-btn"},[k(M(ot),{class:"w-4 h-4"}),l[16]||(l[16]=S(" Report this ad ",-1))])])]),(ue=w.value)!=null&&ue.length?(a(),o("div",Xs,[l[18]||(l[18]=e("h2",{class:"similar-title"},"Similar Ads",-1)),e("div",zs,[(a(!0),o(X,null,V(w.value,p=>(a(),U(tt,{key:p.id,listing:p},null,8,["listing"]))),128))])])):d("",!0)])],64)):d("",!0),(a(),U(He,{to:"body"},[W.value?(a(),o("div",{key:0,class:"lightbox",onTouchstart:Xe,onTouchmove:ze,onTouchend:Ae},[e("button",{onClick:J,class:"lightbox-close"},[k(M($e),{class:"w-7 h-7"})]),e("div",{class:"lightbox-track",style:se({transform:`translateX(${De.value}px) translateY(${Ye.value}px)`,transition:A.value?"none":"transform 0.3s ease-out",opacity:je.value})},[(a(!0),o(X,null,V((ce=t.value)==null?void 0:ce.images,(p,C)=>{var ee;return a(),o("div",{key:p.id,class:"lightbox-slide"},[e("img",{src:p.url,alt:`${(ee=t.value)==null?void 0:ee.title} - Image ${C+1}`,class:"lightbox-image",style:se({transform:`scale(${C===i.value?L.value:1})`,transformOrigin:"center center"}),onError:oe},null,44,As)])}),128))],4),((ve=(de=t.value)==null?void 0:de.images)==null?void 0:ve.length)>1?(a(),o("div",Vs,v(i.value+1)+" / "+v(t.value.images.length),1)):d("",!0),((ge=(he=t.value)==null?void 0:he.images)==null?void 0:ge.length)>1?(a(),o("div",Us,[(a(!0),o(X,null,V(t.value.images,(p,C)=>(a(),o("span",{key:C,class:E(["lightbox-dot",{active:i.value===C}])},null,2))),128))])):d("",!0)],32)):d("",!0)])),y.value?(a(),U(Nt,{key:2,listing:t.value,onClose:l[1]||(l[1]=p=>y.value=!1)},null,8,["listing"])):d("",!0),z.value?(a(),U(it,{key:3,type:"listing",id:(me=t.value)==null?void 0:me.id,onClose:l[2]||(l[2]=p=>z.value=!1)},null,8,["id"])):d("",!0)])}}},sl=we(Ns,[["__scopeId","data-v-743a95fe"]]);export{sl as default};
