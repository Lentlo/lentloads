import{x as S,y as V,d as i,e as M,z as P,f as j,c as l,o as a,a as e,g as k,F as v,i as p,K as z,L as D,j as H,t as m,C as B,n as x,w as E,k as I,Q as K}from"./main-CeWmT0Lm.js";import{L as Q}from"./ListingCard-Dk-BQpZF.js";import"./listings-B47qvZnp.js";import"./dayjs.min-BiuRtYLQ.js";import"./relativeTime-UB1V0fS-.js";import"./SparklesIcon-w46enqeD.js";import"./BoltIcon-_4TpEJ4-.js";const T={class:"all-ads-page min-h-screen bg-gray-50"},U={class:"container-app py-4"},W={class:"mb-6"},$={key:0,class:"grid grid-cols-3 sm:grid-cols-4 gap-3"},q={key:1,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},G={class:"category-icon"},J=["src","alt"],O={class:"category-name"},R={class:"category-count"},X={key:2,class:"text-center py-4 text-gray-500 text-sm"},Y={class:"flex items-center justify-between mb-3"},Z={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ee={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},se={key:2,class:"card p-8 text-center"},te={key:3,class:"mt-6 text-center"},ae=["disabled"],le={key:0,class:"flex items-center gap-2"},oe={key:1},ie={key:4,class:"text-center text-sm text-gray-500 mt-4"},ne={__name:"AllAds",setup(re){const w=V(),d=i(!0),_=i([]),y=i(!0),c=i(!1),n=i([]),h=i("newest"),u=i(1),b=i(1),C=i(0),L=M(()=>_.value.filter(o=>o.listings_count>0)),A=M(()=>u.value<b.value),N=async()=>{var o;d.value=!0;try{if((o=w.categories)!=null&&o.length)_.value=w.categories;else{const s=await B.get("/categories");_.value=s.data.data||[]}}catch(s){console.error("Failed to fetch categories:",s)}finally{d.value=!1}},f=async(o=!1)=>{var s,g,t;o?c.value=!0:(y.value=!0,u.value=1);try{const r=await B.get("/listings",{params:{sort:h.value,page:o?u.value+1:1,per_page:12}});o?n.value=[...n.value,...r.data.data]:n.value=r.data.data||[],C.value=((s=r.data.meta)==null?void 0:s.total)||0,u.value=((g=r.data.meta)==null?void 0:g.current_page)||1,b.value=((t=r.data.meta)==null?void 0:t.last_page)||1}catch(r){console.error("Failed to fetch listings:",r)}finally{y.value=!1,c.value=!1}},F=()=>{!c.value&&A.value&&f(!0)};return P(()=>{N(),f()}),(o,s)=>{const g=j("router-link");return a(),l("div",T,[e("div",U,[s[8]||(s[8]=e("div",{class:"mb-4"},[e("h1",{class:"text-xl font-bold text-gray-900"},"All Ads"),e("p",{class:"text-sm text-gray-500"},"Browse by category or explore all listings")],-1)),e("div",W,[s[2]||(s[2]=e("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3"},"Categories",-1)),d.value?(a(),l("div",$,[(a(),l(v,null,p(8,t=>e("div",{key:t,class:"category-skeleton"},[...s[1]||(s[1]=[e("div",{class:"skeleton w-10 h-10 rounded-lg mb-2"},null,-1),e("div",{class:"skeleton h-3 w-16"},null,-1)])])),64))])):(a(),l("div",q,[(a(!0),l(v,null,p(L.value,t=>(a(),x(g,{key:t.id,to:`/category/${t.slug}`,class:"category-card"},{default:E(()=>[e("div",G,[t.icon_url?(a(),l("img",{key:0,src:t.icon_url,alt:t.name,class:"w-6 h-6"},null,8,J)):(a(),x(I(K),{key:1,class:"w-6 h-6 text-primary-600"}))]),e("span",O,m(t.name),1),e("span",R,m(t.listings_count)+" ads",1)]),_:2},1032,["to"]))),128))])),!d.value&&L.value.length===0?(a(),l("div",X," No categories with listings found ")):k("",!0)]),e("div",null,[e("div",Y,[s[4]||(s[4]=e("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"All Listings",-1)),z(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>h.value=t),onChange:f,class:"sort-select"},[...s[3]||(s[3]=[e("option",{value:"newest"},"Newest First",-1),e("option",{value:"price_low"},"Price: Low to High",-1),e("option",{value:"price_high"},"Price: High to Low",-1)])],544),[[D,h.value]])]),y.value&&n.value.length===0?(a(),l("div",Z,[(a(),l(v,null,p(8,t=>e("div",{key:t,class:"card p-3"},[...s[5]||(s[5]=[e("div",{class:"skeleton h-32 mb-2 rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-20 mb-1"},null,-1),e("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):n.value.length?(a(),l("div",ee,[(a(!0),l(v,null,p(n.value,t=>(a(),x(Q,{key:t.id,listing:t},null,8,["listing"]))),128))])):(a(),l("div",se,[...s[6]||(s[6]=[e("p",{class:"text-gray-500"},"No listings found",-1)])])),A.value?(a(),l("div",te,[e("button",{onClick:F,disabled:c.value,class:"load-more-btn"},[c.value?(a(),l("span",le,[...s[7]||(s[7]=[e("svg",{class:"animate-spin w-4 h-4",viewBox:"0 0 24 24",fill:"none"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),e("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",class:"opacity-75"})],-1),H(" Loading... ",-1)])])):(a(),l("span",oe,"Load More"))],8,ae)])):k("",!0),n.value.length>0?(a(),l("p",ie," Showing "+m(n.value.length)+" of "+m(C.value)+" ads ",1)):k("",!0)])])])}}},_e=S(ne,[["__scopeId","data-v-fb9a36f3"]]);export{_e as default};
