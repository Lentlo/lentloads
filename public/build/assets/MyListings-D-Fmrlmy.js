import{u as P}from"./listings-izbv-bH3.js";import{c as a,o as n,a as e,_ as V,b as E,d as r,e as d,t as i,I as M,r as v,E as Z,m as z,n as H,p as I,g as k,y as h,h as u,Q as R,F as $,j as C,R as q,K as x,q as K,M as Q}from"./main-Dzo1rjju.js";import{r as Y}from"./ExclamationCircleIcon-B9IXzuAo.js";import{r as G}from"./EyeIcon-QidhatGe.js";import{r as J}from"./ChatBubbleLeftIcon-DKbvV1Hu.js";import{r as O}from"./PencilIcon-XKPQXOY3.js";import{r as U}from"./CheckIcon-D-Th9v4Q.js";import{r as W}from"./TrashIcon-CpnuZcD-.js";function X(o,m){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function ee(o,m){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function te(o,m){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const se={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ne={class:"relative bg-white rounded-xl p-6 w-full max-w-md animate-scale-in"},ae={class:"text-center"},re={key:0,class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},oe={key:1,class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},le={key:2,class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},ie={class:"text-lg font-semibold text-gray-900 mb-2"},ce={class:"text-gray-500"},de={class:"flex gap-3 mt-6"},ue={__name:"ConfirmModal",props:{title:{type:String,default:"Confirm Action"},message:{type:String,default:"Are you sure you want to proceed?"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:null},type:{type:String,default:"info",validator:o=>["info","warning","danger"].includes(o)}},emits:["confirm","cancel"],setup(o){const m=o,p=E(()=>m.type==="danger"?"btn-danger":(m.type==="warning","btn-primary"));return(g,c)=>(n(),a("div",se,[e("div",{class:"absolute inset-0 bg-black/50",onClick:c[0]||(c[0]=f=>g.$emit("cancel"))}),e("div",ne,[e("div",ae,[o.type==="danger"?(n(),a("div",re,[r(d(ee),{class:"w-6 h-6 text-red-600"})])):o.type==="warning"?(n(),a("div",oe,[r(d(Y),{class:"w-6 h-6 text-yellow-600"})])):(n(),a("div",le,[r(d(te),{class:"w-6 h-6 text-primary-600"})])),e("h3",ie,i(o.title),1),e("p",ce,i(o.message),1)]),e("div",de,[e("button",{onClick:c[1]||(c[1]=f=>g.$emit("cancel")),class:"btn-secondary flex-1"},i(o.cancelText),1),e("button",{onClick:c[2]||(c[2]=f=>g.$emit("confirm")),class:M([o.confirmClass||p.value,"flex-1"])},i(o.confirmText),3)])])]))}},me=V(ue,[["__scopeId","data-v-4a58e1fe"]]),ve={class:"min-h-screen bg-gray-50 py-6"},ge={class:"container-app"},fe={class:"flex items-center justify-between mb-6"},ye={class:"card p-4 mb-6"},xe={class:"flex flex-wrap gap-4"},pe=["onClick"],be={class:"ml-1 text-sm"},he={key:0,class:"space-y-4"},we={key:1,class:"space-y-4"},_e=["src","alt"],ke={class:"flex-1"},$e={class:"flex items-start justify-between"},Ce={class:"text-lg font-bold text-primary-600 mt-1"},Me={class:"flex items-center gap-4 mt-2 text-sm text-gray-500"},Le={class:"flex items-center"},Se={class:"flex items-center"},je={class:"flex items-center"},Te={class:"flex items-center gap-2 mt-4"},Ae=["onClick"],Be=["onClick"],De=["onClick"],Ne={key:2,class:"card p-12 text-center"},Fe={key:3,class:"mt-6 flex justify-center gap-2"},Pe=["onClick"],Ke={__name:"MyListings",setup(o){const m=P(),p=v(!0),g=v([]),c=v("all"),f=v(1),L=v(1),w=v(!1),S=v(null),j=v([{label:"All",value:"all",count:0},{label:"Active",value:"active",count:0},{label:"Pending",value:"pending",count:0},{label:"Sold",value:"sold",count:0},{label:"Expired",value:"expired",count:0}]),T=l=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",sold:"bg-blue-100 text-blue-800",expired:"bg-gray-100 text-gray-800",rejected:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",y=async()=>{p.value=!0;try{const l={page:f.value};c.value!=="all"&&(l.status=c.value);const s=await m.fetchMyListings(l);g.value=s.data,L.value=s.meta.last_page,j.value[0].count=s.meta.total}finally{p.value=!1}},A=async l=>{try{await m.markAsSold(l.id),x.success("Listing marked as sold!"),y()}catch{x.error("Failed to update listing")}},B=async l=>{try{await m.renewListing(l.id),x.success("Listing renewed for 30 days!"),y()}catch{x.error("Failed to renew listing")}},D=l=>{S.value=l,w.value=!0},N=async()=>{try{await m.deleteListing(S.value.id),x.success("Listing deleted"),w.value=!1,y()}catch{x.error("Failed to delete listing")}},F=l=>{f.value=l,y()};return Z(c,()=>{f.value=1,y()}),z(()=>{y()}),(l,s)=>{const b=H("router-link");return n(),a("div",ve,[e("div",ge,[e("div",fe,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Listings"),e("p",{class:"text-gray-500"},"Manage your ads")],-1)),r(b,{to:"/sell",class:"btn-primary"},{default:h(()=>[r(d(R),{class:"w-5 h-5 mr-2"}),s[1]||(s[1]=u(" Post New Ad ",-1))]),_:1})]),e("div",ye,[e("div",xe,[(n(!0),a($,null,C(j.value,t=>(n(),a("button",{key:t.value,onClick:_=>c.value=t.value,class:M(["px-4 py-2 rounded-lg font-medium transition",c.value===t.value?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[u(i(t.label)+" ",1),e("span",be,"("+i(t.count)+")",1)],10,pe))),128))])]),p.value?(n(),a("div",he,[(n(),a($,null,C(3,t=>e("div",{key:t,class:"card p-4 flex gap-4"},[...s[3]||(s[3]=[K('<div class="skeleton w-32 h-24 rounded"></div><div class="flex-1"><div class="skeleton h-5 w-1/3 mb-2"></div><div class="skeleton h-4 w-1/4 mb-2"></div><div class="skeleton h-4 w-20"></div></div>',2)])])),64))])):g.value.length?(n(),a("div",we,[(n(!0),a($,null,C(g.value,t=>(n(),a("div",{key:t.id,class:"card p-4 flex flex-col sm:flex-row gap-4"},[r(b,{to:`/listing/${t.slug}`,class:"sm:w-40 flex-shrink-0"},{default:h(()=>[e("img",{src:t.primary_image_url,alt:t.title,class:"w-full h-32 object-cover rounded-lg"},null,8,_e)]),_:2},1032,["to"]),e("div",ke,[e("div",$e,[e("div",null,[r(b,{to:`/listing/${t.slug}`,class:"font-semibold text-gray-900 hover:text-primary-600"},{default:h(()=>[u(i(t.title),1)]),_:2},1032,["to"]),e("p",Ce,i(t.formatted_price),1)]),e("span",{class:M(["badge",T(t.status)])},i(t.status),3)]),e("div",Me,[e("span",Le,[r(d(G),{class:"w-4 h-4 mr-1"}),u(" "+i(t.views_count)+" views ",1)]),e("span",Se,[r(d(Q),{class:"w-4 h-4 mr-1"}),u(" "+i(t.favorites_count)+" favorites ",1)]),e("span",je,[r(d(J),{class:"w-4 h-4 mr-1"}),u(" "+i(t.contacts_count)+" contacts ",1)])]),e("div",Te,[r(b,{to:`/listing/${t.id}/edit`,class:"btn-secondary btn-sm"},{default:h(()=>[r(d(O),{class:"w-4 h-4 mr-1"}),s[4]||(s[4]=u(" Edit ",-1))]),_:1},8,["to"]),t.status==="active"?(n(),a("button",{key:0,onClick:_=>A(t),class:"btn-sm bg-green-100 text-green-700 hover:bg-green-200"},[r(d(U),{class:"w-4 h-4 mr-1"}),s[5]||(s[5]=u(" Mark as Sold ",-1))],8,Ae)):k("",!0),t.status==="expired"||t.status==="sold"?(n(),a("button",{key:1,onClick:_=>B(t),class:"btn-sm bg-blue-100 text-blue-700 hover:bg-blue-200"},[r(d(X),{class:"w-4 h-4 mr-1"}),s[6]||(s[6]=u(" Renew ",-1))],8,Be)):k("",!0),e("button",{onClick:_=>D(t),class:"btn-sm bg-red-100 text-red-700 hover:bg-red-200"},[r(d(W),{class:"w-4 h-4 mr-1"}),s[7]||(s[7]=u(" Delete ",-1))],8,De)])])]))),128))])):(n(),a("div",Ne,[r(d(q),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s[9]||(s[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No listings yet",-1)),s[10]||(s[10]=e("p",{class:"text-gray-500 mb-4"},"Start selling by posting your first ad",-1)),r(b,{to:"/sell",class:"btn-primary"},{default:h(()=>[...s[8]||(s[8]=[u(" Post Your First Ad ",-1)])]),_:1})])),L.value>1?(n(),a("div",Fe,[(n(!0),a($,null,C(L.value,t=>(n(),a("button",{key:t,onClick:_=>F(t),class:M(["w-10 h-10 rounded-lg",f.value===t?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"])},i(t),11,Pe))),128))])):k("",!0)]),w.value?(n(),I(me,{key:0,title:"Delete Listing",message:"Are you sure you want to delete this listing? This action cannot be undone.",confirmText:"Delete",confirmClass:"btn-danger",onConfirm:N,onCancel:s[0]||(s[0]=t=>w.value=!1)})):k("",!0)])}}};export{Ke as default};
