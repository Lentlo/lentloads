import{c as o,o as a,a as e,r as f,d as z,E as ve,Q as De,M as he,f as n,t as r,i as w,_ as me,D as pe,g as p,j as g,l as ge,F as B,h as E,p as X,z as P,B as re,R as Ue,m as D,C as fe,O as Z,u as Ne,b as Be,e as Xe,K as ue,S as Oe,y as Re,w as ce,s as Ae,T as N,U as Ee,J as Fe}from"./main-HxwpvIyu.js";import{u as Pe}from"./listings-Gf_EJ1y1.js";import{L as Ze}from"./ListingCard-Deq8PJZO.js";import{L as j}from"./leaflet-D2MsKczd.js";import{_ as We}from"./LoadingSpinner-B-1qoXHV.js";import{r as Ge}from"./ChatBubbleLeftIcon-DEFV-ifU.js";import{R as Qe}from"./ReportModal-JcFGGzs3.js";import{d as Je}from"./dayjs.min-s5HFrhn5.js";import{r as Ke}from"./ClockIcon-Bwcf1KIQ.js";import{r as He}from"./EyeIcon-BxADweEX.js";import{r as qe}from"./StarIcon-D-uCLUup.js";import{r as et}from"./CheckBadgeIcon-JpyRzyk-.js";import{r as de}from"./PhoneIcon-XsjXO37f.js";import{r as tt}from"./FlagIcon-DdOTutkg.js";import"./relativeTime-FfCO-JPX.js";import"./SparklesIcon-CRFiUpUI.js";import"./BoltIcon-DODSdE4S.js";function st(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function lt(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function at(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const ot={class:"location-display"},it={class:"mt-3 space-y-2"},nt={class:"flex items-start gap-2"},rt={class:"text-gray-900 font-medium"},ut={key:0,class:"text-sm text-gray-500"},ct=["href"],dt={__name:"LocationDisplay",props:{latitude:{type:Number,default:null},longitude:{type:Number,default:null},locality:{type:String,default:""},city:{type:String,default:""},state:{type:String,default:""},postalCode:{type:String,default:""}},setup(b){delete j.Icon.Default.prototype._getIconUrl,j.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const u=b,x=f(null);let m=null,$=null;const C=z(()=>u.latitude&&u.longitude),t=z(()=>{const v=[];return u.locality&&v.push(u.locality),u.city&&v.push(u.city),u.state&&v.push(u.state),v.join(", ")||"Location not specified"}),S=z(()=>C.value?`https://www.google.com/maps/dir/?api=1&destination=${u.latitude},${u.longitude}`:"#");ve(()=>{h()}),De(()=>{m&&(m.remove(),m=null)});const h=()=>{if(!x.value)return;const v=u.latitude||20.5937,_=u.longitude||78.9629,V=C.value?14:5;m=j.map(x.value,{scrollWheelZoom:!1,dragging:!j.Browser.mobile,tap:!1}).setView([v,_],V),j.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(m),C.value&&(j.circle([u.latitude,u.longitude],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(m),$=j.marker([u.latitude,u.longitude]).addTo(m))};return he(()=>[u.latitude,u.longitude],([v,_])=>{m&&v&&_&&(m.setView([v,_],14),$&&m.removeLayer($),j.circle([v,_],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(m),$=j.marker([v,_]).addTo(m))}),(v,_)=>(a(),o("div",ot,[e("div",{ref_key:"mapContainer",ref:x,class:"h-48 rounded-lg border border-gray-200 z-0"},null,512),e("div",it,[e("div",nt,[_[0]||(_[0]=e("svg",{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",null,[e("p",rt,r(t.value),1),b.postalCode?(a(),o("p",ut,"PIN: "+r(b.postalCode),1)):n("",!0)])]),C.value?(a(),o("a",{key:0,href:S.value,target:"_blank",class:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700"},[..._[1]||(_[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),w(" Get Directions ",-1)])],8,ct)):n("",!0)])]))}},vt={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},ht={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-xl animate-slide-up max-h-[90vh] overflow-y-auto"},mt={class:"flex items-center justify-between p-4 border-b"},pt={key:0,class:"p-4 bg-gray-50 border-b"},gt={class:"flex gap-3"},ft=["src","alt"],_t={class:"flex-1 min-w-0"},yt={class:"font-medium text-gray-900 truncate"},bt={class:"text-lg font-bold text-primary-600"},kt={class:"p-4 border-b"},wt={class:"flex flex-wrap gap-2"},xt=["onClick"],$t={class:"p-4"},Ct={class:"mt-3"},Mt={class:"flex items-center gap-2 text-sm"},St={key:0,class:"mt-2 flex items-center gap-2"},It=["max"],jt={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl safe-area-bottom"},Tt=["disabled"],Lt={__name:"ChatModal",props:{listing:{type:Object,required:!0}},emits:["close","sent"],setup(b,{emit:u}){const x=b,m=z(()=>{var k,i,c;return((i=(k=x.listing)==null?void 0:k.user)==null?void 0:i.id)||((c=x.listing)==null?void 0:c.user_id)}),$=u,C=pe(),t=f(""),S=f(!1),h=f(null),v=f(!1),_=["Is this still available?","Can you share more photos?","What is the condition?","Is the price negotiable?","Can I see it today?"],V=async()=>{var k,i;if(t.value.trim()){v.value=!0;try{const c={listing_id:x.listing.id,receiver_id:m.value,message:t.value.trim()};S.value&&h.value&&(c.offer_amount=h.value);const d=await fe.post("/conversations",c);Z.success("Message sent!"),$("sent",d.data.data),$("close");const T=d.data.data.conversation;C.push(`/messages/${T.uuid}`)}catch(c){if(((k=c.response)==null?void 0:k.status)===409){Z.info("You already have a conversation about this listing");const d=((i=c.response.data.data)==null?void 0:i.uuid)||c.response.data.uuid;C.push(`/messages/${d}`),$("close")}else Z.error("Failed to send message")}finally{v.value=!1}}};return(k,i)=>{var c;return a(),o("div",vt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:i[0]||(i[0]=d=>k.$emit("close"))}),e("div",ht,[e("div",mt,[i[6]||(i[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Contact Seller",-1)),e("button",{onClick:i[1]||(i[1]=d=>k.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[p(g(ge),{class:"w-5 h-5 text-gray-500"})])]),b.listing?(a(),o("div",pt,[e("div",gt,[e("img",{src:b.listing.primary_image_url,alt:b.listing.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,ft),e("div",_t,[e("h4",yt,r(b.listing.title),1),e("p",bt,r(b.listing.formatted_price),1)])])])):n("",!0),e("div",kt,[i[7]||(i[7]=e("p",{class:"text-sm text-gray-500 mb-3"},"Quick messages:",-1)),e("div",wt,[(a(),o(B,null,E(_,d=>e("button",{key:d,onClick:T=>t.value=d,class:X(["px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition",t.value===d?"bg-primary-100 text-primary-700":""])},r(d),11,xt)),64))])]),e("div",$t,[P(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=d=>t.value=d),rows:"3",class:"input resize-none",placeholder:"Write your message..."},null,512),[[re,t.value]]),e("div",Ct,[e("label",Mt,[P(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=d=>S.value=d),class:"rounded text-primary-600"},null,512),[[Ue,S.value]]),i[8]||(i[8]=w(" Include an offer ",-1))]),S.value?(a(),o("div",St,[i[9]||(i[9]=e("span",{class:"text-gray-500"},"â‚¹",-1)),P(e("input",{"onUpdate:modelValue":i[4]||(i[4]=d=>h.value=d),type:"number",class:"input flex-1",placeholder:"Your offer amount",max:(c=b.listing)==null?void 0:c.price},null,8,It),[[re,h.value,void 0,{number:!0}]])])):n("",!0)])]),e("div",jt,[e("button",{onClick:i[5]||(i[5]=d=>k.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:V,disabled:!t.value.trim()||v.value,class:"btn-primary flex-1"},[v.value?(a(),D(We,{key:1,class:"w-5 h-5 mr-2"})):(a(),D(g(Ge),{key:0,class:"w-5 h-5 mr-2"})),w(" "+r(v.value?"Sending...":"Send Message"),1)],8,Tt)])])])}}},zt=me(Lt,[["__scopeId","data-v-90892009"]]),Vt={class:"listing-detail-page"},Yt={key:0,class:"container-app py-6"},Dt={class:"image-gallery-section"},Ut=["src","alt"],Nt={key:0,class:"image-counter"},Bt={class:"image-badges"},Xt={key:0,class:"badge-featured"},Ot={key:1,class:"badge-urgent"},Rt={key:1,class:"swipe-dots"},At={key:0,class:"thumbnails-strip"},Et=["onClick"],Ft=["src","alt"],Pt={class:"container-app py-4"},Zt={class:"lg:grid lg:grid-cols-3 lg:gap-6"},Wt={class:"lg:col-span-2 space-y-4"},Gt={class:"detail-card"},Qt={class:"flex items-start justify-between gap-4"},Jt={class:"flex-1"},Kt={class:"price"},Ht={class:"title"},qt={class:"action-buttons"},es={class:"meta-info"},ts={class:"detail-card"},ss={class:"details-grid"},ls={key:0,class:"detail-item"},as={class:"value"},os={key:1,class:"detail-item"},is={class:"value"},ns={key:2,class:"detail-item"},rs={class:"value"},us={key:3,class:"detail-item"},cs={class:"value"},ds={key:4,class:"detail-item"},vs={class:"value"},hs={class:"detail-card"},ms={class:"description"},ps={class:"detail-card"},gs={class:"lg:col-span-1 space-y-4 mt-4 lg:mt-0"},fs={class:"seller-card"},_s={class:"seller-header"},ys=["src","alt"],bs={class:"seller-info"},ks={class:"seller-rating"},ws={class:"text-gray-400"},xs={key:0,class:"seller-location"},$s={key:0,class:"verified-badge"},Cs={class:"seller-actions"},Ms=["href"],Ss={key:0,class:"similar-section"},Is={class:"similar-grid"},js=["src","alt"],Ts={class:"lightbox-controls"},Ls=["disabled"],zs={class:"zoom-level"},Vs=["disabled"],Ys={key:2,class:"lightbox-counter"},Ds={__name:"ListingDetail",setup(b){const u=Ne(),x=pe(),m=Be(),$=Pe(),C=f(!0),t=f(null),S=f([]),h=f(0),v=f(!1),_=f(!1),V=f(!1),k=f(!1),i=f(!1),c=f(1),d=f(0),T=f(0);let W=0,G=0,O=0;const U=f(0);let Q=0,R=!1;const _e=l=>{l.touches.length===1&&(Q=l.touches[0].clientX,R=!0)},ye=l=>{if(!R||l.touches.length!==1)return;const s=l.touches[0].clientX-Q;U.value=Math.max(-100,Math.min(100,s))},be=()=>{var s,y,M,L;if(!R)return;R=!1;const l=50;U.value>l&&((y=(s=t.value)==null?void 0:s.images)==null?void 0:y.length)>1?K():U.value<-l&&((L=(M=t.value)==null?void 0:M.images)==null?void 0:L.length)>1&&H(),U.value=0},J=z(()=>{var l,s,y,M;return(s=(l=t.value)==null?void 0:l.images)!=null&&s.length?(M=t.value.images[h.value])==null?void 0:M.url:(y=t.value)==null?void 0:y.primary_image_url}),A=z(()=>{var l,s,y;return((l=m.user)==null?void 0:l.id)===((y=(s=t.value)==null?void 0:s.user)==null?void 0:y.id)}),ke=z(()=>{var s;return(((s=t.value)==null?void 0:s.formatted_price)||"").replace(/\s*\(Negotiable\)/gi,"").trim()}),we=z(()=>{var s,y,M,L;const l=(y=(s=t.value)==null?void 0:s.user)==null?void 0:y.avatar_url;return l&&!l.includes("default")?l:"https://ui-avatars.com/api/?name="+encodeURIComponent(((L=(M=t.value)==null?void 0:M.user)==null?void 0:L.name)||"U")+"&background=7c3aed&color=fff&size=120"}),xe=l=>{if(!l)return"Recently";const s=Je(l);return s.isValid()?s.format("MMM D, YYYY"):"Recently"},$e=l=>({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[l]||(l==null?void 0:l.replace(/_/g," ")),K=()=>{h.value=h.value>0?h.value-1:t.value.images.length-1,F()},H=()=>{h.value=h.value<t.value.images.length-1?h.value+1:0,F()},q=l=>{l.target.dataset.fallback||(l.target.dataset.fallback="true",l.target.src="https://placehold.co/800x600/e2e8f0/64748b?text=Image+Not+Available")},Ce=()=>{i.value=!0,document.body.style.overflow="hidden"},ee=()=>{i.value=!1,document.body.style.overflow="",F()},F=()=>{c.value=1,d.value=0,T.value=0},Me=()=>{c.value<3&&(c.value+=.5)},Se=()=>{c.value>1&&(c.value-=.5,c.value===1&&(d.value=0,T.value=0))},Ie=l=>{l.touches.length===2?O=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY):l.touches.length===1&&(W=l.touches[0].clientX-d.value,G=l.touches[0].clientY-T.value)},je=l=>{if(l.touches.length===2){const s=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY),y=s/O;c.value=Math.max(1,Math.min(3,c.value*y)),O=s}else l.touches.length===1&&c.value>1&&(d.value=l.touches[0].clientX-W,T.value=l.touches[0].clientY-G)},Te=()=>{O=0},Le=async()=>{if(!m.isAuthenticated){x.push("/login");return}const l=await $.toggleFavorite(t.value.id);v.value=l.is_favorited},ze=()=>{if(!m.isAuthenticated){x.push("/login");return}_.value=!0},Ve=()=>{navigator.share&&navigator.share({title:t.value.title,text:`Check out: ${t.value.title}`,url:window.location.href})},Ye=async()=>{if(!m.isAuthenticated){x.push("/login");return}try{await fe.post(`/listings/${t.value.id}/track-contact`,{type:"phone"})}catch{}k.value=!0},te=async()=>{var l;try{const s=await $.fetchListing(u.params.slug);t.value=s.listing,S.value=s.similar,v.value=s.listing.is_favorited}catch(s){((l=s.response)==null?void 0:l.status)===404&&x.push("/404")}finally{C.value=!1}};return ve(()=>te()),he(()=>u.params.slug,(l,s)=>{l!==s&&(C.value=!0,h.value=0,k.value=!1,te())}),(l,s)=>{var M,L,se,le,ae,oe,ie,ne;const y=Xe("router-link");return a(),o("div",Vt,[C.value?(a(),o("div",Yt,[...s[4]||(s[4]=[e("div",{class:"skeleton h-80 mb-4 rounded-lg"},null,-1),e("div",{class:"skeleton h-8 w-1/3 mb-2"},null,-1),e("div",{class:"skeleton h-6 w-full mb-4"},null,-1),e("div",{class:"skeleton h-24 w-full"},null,-1)])])):t.value?(a(),o(B,{key:1},[e("div",Dt,[e("div",{class:"main-image-container",onClick:Ce,onTouchstart:_e,onTouchmove:ye,onTouchend:be},[e("img",{src:J.value,alt:t.value.title,class:"main-image",style:ue({transform:`translateX(${U.value}px)`}),onError:q},null,44,Ut),((M=t.value.images)==null?void 0:M.length)>1?(a(),o("div",Nt,r(h.value+1)+" / "+r(t.value.images.length),1)):n("",!0),e("div",Bt,[t.value.is_featured?(a(),o("span",Xt,"Featured")):n("",!0),t.value.is_urgent?(a(),o("span",Ot,"Urgent")):n("",!0)]),((L=t.value.images)==null?void 0:L.length)>1?(a(),o("div",Rt,[(a(!0),o(B,null,E(t.value.images,(I,Y)=>(a(),o("span",{key:Y,class:X(["dot",{active:h.value===Y}])},null,2))),128))])):n("",!0)],32),((se=t.value.images)==null?void 0:se.length)>1?(a(),o("div",At,[(a(!0),o(B,null,E(t.value.images,(I,Y)=>(a(),o("button",{key:I.id,onClick:Us=>h.value=Y,class:X(["thumbnail",{active:h.value===Y}])},[e("img",{src:I.thumbnail_url||I.url,alt:`Image ${Y+1}`},null,8,Ft)],10,Et))),128))])):n("",!0)]),e("div",Pt,[e("div",Zt,[e("div",Wt,[e("div",Gt,[e("div",Qt,[e("div",Jt,[e("p",Kt,r(ke.value),1),e("h1",Ht,r(t.value.title),1)]),e("div",qt,[e("button",{onClick:Le,class:X(["action-btn",{"is-favorite":v.value}])},[p(g(Oe),{class:X(["w-6 h-6",v.value?"fill-current":""])},null,8,["class"])],2),e("button",{onClick:Ve,class:"action-btn"},[p(g(at),{class:"w-6 h-6"})])])]),e("div",es,[e("span",null,[p(g(Re),{class:"w-4 h-4"}),w(" "+r(t.value.location),1)]),e("span",null,[p(g(Ke),{class:"w-4 h-4"}),w(" "+r(xe(t.value.published_at)),1)]),e("span",null,[p(g(He),{class:"w-4 h-4"}),w(" "+r(t.value.views_count)+" views",1)])])]),e("div",ts,[s[10]||(s[10]=e("h3",{class:"section-title"},"Details",-1)),e("div",ss,[t.value.condition?(a(),o("div",ls,[s[5]||(s[5]=e("span",{class:"label"},"Condition",-1)),e("span",as,r($e(t.value.condition)),1)])):n("",!0),t.value.brand?(a(),o("div",os,[s[6]||(s[6]=e("span",{class:"label"},"Brand",-1)),e("span",is,r(t.value.brand),1)])):n("",!0),t.value.model?(a(),o("div",ns,[s[7]||(s[7]=e("span",{class:"label"},"Model",-1)),e("span",rs,r(t.value.model),1)])):n("",!0),t.value.year?(a(),o("div",us,[s[8]||(s[8]=e("span",{class:"label"},"Year",-1)),e("span",cs,r(t.value.year),1)])):n("",!0),t.value.category?(a(),o("div",ds,[s[9]||(s[9]=e("span",{class:"label"},"Category",-1)),e("span",vs,r(t.value.category.name),1)])):n("",!0)])]),e("div",hs,[s[11]||(s[11]=e("h3",{class:"section-title"},"Description",-1)),e("p",ms,r(t.value.description),1)]),e("div",ps,[s[12]||(s[12]=e("h3",{class:"section-title"},"Location",-1)),p(dt,{latitude:t.value.latitude,longitude:t.value.longitude,locality:t.value.locality,city:t.value.city,state:t.value.state,"postal-code":t.value.postal_code},null,8,["latitude","longitude","locality","city","state","postal-code"])])]),e("div",gs,[e("div",fs,[e("div",_s,[e("img",{src:we.value,alt:t.value.user.name,class:"seller-avatar"},null,8,ys),e("div",bs,[p(y,{to:`/user/${t.value.user.id}`,class:"seller-name"},{default:ce(()=>[w(r(t.value.user.name),1)]),_:1},8,["to"]),e("div",ks,[p(g(qe),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",null,r(t.value.user.rating||"0.0"),1),e("span",ws,"("+r(t.value.user.total_reviews||0)+")",1)]),t.value.user.city?(a(),o("p",xs,r(t.value.user.city),1)):n("",!0)])]),t.value.user.is_verified_seller?(a(),o("div",$s,[p(g(et),{class:"w-5 h-5"}),s[13]||(s[13]=w(" Verified Seller ",-1))])):n("",!0),e("div",Cs,[A.value?n("",!0):(a(),o("button",{key:0,onClick:ze,class:"btn-chat"},[p(g(Ae),{class:"w-5 h-5"}),s[14]||(s[14]=w(" Chat with Seller ",-1))])),t.value.user.phone&&!A.value&&!k.value?(a(),o("button",{key:1,onClick:Ye,class:"btn-phone"},[p(g(de),{class:"w-5 h-5"}),s[15]||(s[15]=w(" Show Phone Number ",-1))])):n("",!0),t.value.user.phone&&!A.value&&k.value?(a(),o("a",{key:2,href:`tel:${t.value.user.phone}`,class:"btn-phone-revealed"},[p(g(de),{class:"w-5 h-5"}),w(" "+r(t.value.user.phone),1)],8,Ms)):n("",!0),A.value?(a(),D(y,{key:3,to:`/listing/${t.value.id}/edit`,class:"btn-edit"},{default:ce(()=>[...s[16]||(s[16]=[w(" Edit Listing ",-1)])]),_:1},8,["to"])):n("",!0)])]),s[18]||(s[18]=e("div",{class:"safety-card"},[e("h4",null,"Safety Tips"),e("ul",null,[e("li",null,"Meet in a safe public place"),e("li",null,"Check the item before you pay"),e("li",null,"Pay only after collecting the item"),e("li",null,"Never share financial information")])],-1)),e("button",{onClick:s[0]||(s[0]=I=>V.value=!0),class:"report-btn"},[p(g(tt),{class:"w-4 h-4"}),s[17]||(s[17]=w(" Report this ad ",-1))])])]),(le=S.value)!=null&&le.length?(a(),o("div",Ss,[s[19]||(s[19]=e("h2",{class:"similar-title"},"Similar Ads",-1)),e("div",Is,[(a(!0),o(B,null,E(S.value,I=>(a(),D(Ze,{key:I.id,listing:I},null,8,["listing"]))),128))])])):n("",!0)])],64)):n("",!0),i.value?(a(),o("div",{key:2,class:"lightbox",onClick:ee},[e("button",{onClick:ee,class:"lightbox-close"},[p(g(ge),{class:"w-8 h-8"})]),e("div",{class:"lightbox-content",onClick:s[1]||(s[1]=N(()=>{},["stop"]))},[e("img",{src:J.value,alt:t.value.title,class:"lightbox-image",style:ue({transform:`scale(${c.value}) translate(${d.value}px, ${T.value}px)`}),onError:q,onTouchstart:Ie,onTouchmove:je,onTouchend:Te},null,44,js)]),e("div",Ts,[e("button",{onClick:N(Se,["stop"]),class:"zoom-btn",disabled:c.value<=1},[p(g(lt),{class:"w-6 h-6"})],8,Ls),e("span",zs,r(Math.round(c.value*100))+"%",1),e("button",{onClick:N(Me,["stop"]),class:"zoom-btn",disabled:c.value>=3},[p(g(Ee),{class:"w-6 h-6"})],8,Vs)]),((ae=t.value.images)==null?void 0:ae.length)>1?(a(),o("button",{key:0,onClick:N(K,["stop"]),class:"lightbox-nav lightbox-prev"},[p(g(st),{class:"w-8 h-8"})])):n("",!0),((oe=t.value.images)==null?void 0:oe.length)>1?(a(),o("button",{key:1,onClick:N(H,["stop"]),class:"lightbox-nav lightbox-next"},[p(g(Fe),{class:"w-8 h-8"})])):n("",!0),((ie=t.value.images)==null?void 0:ie.length)>1?(a(),o("div",Ys,r(h.value+1)+" / "+r(t.value.images.length),1)):n("",!0)])):n("",!0),_.value?(a(),D(zt,{key:3,listing:t.value,onClose:s[2]||(s[2]=I=>_.value=!1)},null,8,["listing"])):n("",!0),V.value?(a(),D(Qe,{key:4,type:"listing",id:(ne=t.value)==null?void 0:ne.id,onClose:s[3]||(s[3]=I=>V.value=!1)},null,8,["id"])):n("",!0)])}}},el=me(Ds,[["__scopeId","data-v-08da04c5"]]);export{el as default};
