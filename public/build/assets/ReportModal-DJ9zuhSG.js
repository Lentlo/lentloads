var h=(r,g,i)=>new Promise((p,a)=>{var u=o=>{try{m(i.next(o))}catch(v){a(v)}},l=o=>{try{m(i.throw(o))}catch(v){a(v)}},m=o=>o.done?p(o.value):Promise.resolve(o.value).then(u,l);m((i=i.apply(r,g)).next())});import{k as d,l as c,p as e,f,b as w,B as b,a as R,A as C,F as S,I as M,H as A,D as x,R as V,E as $,C as B}from"./vue-vendor-Clry8SR-.js";import{_ as I,f as F,b as z}from"./main-capacitor-rPhIOL4v.js";import{toast as y}from"./ui-vendor-B7DvqItC.js";function se(r,g){return c(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})])}const D={class:"report-modal"},L={class:"report-sheet"},N={class:"report-header"},U={class:"text-lg font-semibold text-gray-900"},H={class:"report-content"},O={class:"text-sm text-gray-500 mb-4"},T={class:"space-y-2"},j=["value"],q={class:"flex-1 min-w-0"},E={class:"font-medium text-gray-900 text-sm"},P={class:"text-xs text-gray-500"},W={class:"mt-4"},Y={class:"report-actions"},G=["disabled"],J={key:0,class:"flex items-center justify-center gap-2"},K={key:1},Q={__name:"ReportModal",props:{type:{type:String,required:!0,validator:r=>["listing","user"].includes(r)},itemId:{type:[Number,String],required:!0}},emits:["close","submitted"],setup(r,{emit:g}){const i=r,p=g,a=f(""),u=f(""),l=f(!1),m=[{value:"spam",label:"Spam or scam",description:"Fake listing or misleading information"},{value:"prohibited",label:"Prohibited item",description:"Item not allowed on platform"},{value:"duplicate",label:"Duplicate listing",description:"Same item posted multiple times"},{value:"wrong_category",label:"Wrong category",description:"Listed in wrong category"},{value:"offensive",label:"Offensive content",description:"Inappropriate language or images"},{value:"other",label:"Other",description:"Another reason"}],o=[{value:"harassment",label:"Harassment",description:"Threatening or abusive behavior"},{value:"scam",label:"Scammer",description:"Attempting to defraud users"},{value:"fake_profile",label:"Fake profile",description:"Using fake identity"},{value:"spam",label:"Spam",description:"Sending unsolicited messages"},{value:"other",label:"Other",description:"Another reason"}],v=w(()=>i.type==="listing"?m:o),_=()=>h(this,null,function*(){var n;if(a.value){l.value=!0;try{yield z.post("/reports",{reportable_type:i.type,reportable_id:i.itemId,reason:a.value,description:u.value||null}),y.success("Report submitted successfully"),p("submitted"),p("close")}catch(t){((n=t.response)==null?void 0:n.status)===409?(y.info("You have already reported this"),p("close")):y.error("Failed to submit report")}finally{l.value=!1}}});return(n,t)=>(c(),d("div",D,[e("div",{class:"report-backdrop",onClick:t[0]||(t[0]=s=>n.$emit("close"))}),e("div",L,[e("div",N,[e("h3",U," Report "+b(r.type==="listing"?"Listing":"User"),1),e("button",{onClick:t[1]||(t[1]=s=>n.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full -mr-2"},[R(C(F),{class:"w-5 h-5 text-gray-500"})])]),e("div",H,[e("p",O," Please select a reason for reporting this "+b(r.type==="listing"?"listing":"user")+". ",1),e("div",T,[(c(!0),d(S,null,M(v.value,s=>(c(),d("label",{key:s.value,class:A(["flex items-start gap-3 p-3 border rounded-xl cursor-pointer hover:bg-gray-50 transition",a.value===s.value?"border-primary-500 bg-primary-50":""])},[x(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[2]||(t[2]=k=>a.value=k),class:"mt-0.5 text-primary-600"},null,8,j),[[V,a.value]]),e("div",q,[e("p",E,b(s.label),1),e("p",P,b(s.description),1)])],2))),128))]),e("div",W,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional details (optional)",-1)),x(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),rows:"2",class:"input resize-none text-sm",placeholder:"Any extra information..."},null,512),[[$,u.value]])])]),e("div",Y,[e("button",{onClick:t[4]||(t[4]=s=>n.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:_,disabled:!a.value||l.value,class:"btn-danger flex-1"},[l.value?(c(),d("span",J,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" Submitting... ",-1)])])):(c(),d("span",K,"Submit Report"))],8,G)])])]))}},ae=I(Q,[["__scopeId","data-v-dcf83024"]]);export{ae as R,se as r};
