import{y as k,d as m,e as w,c as l,o as r,a as e,t as d,h as R,k as S,m as C,F as A,i as V,q as $,L as g,Q as F,O as I,j as M,D as z,P as v}from"./main-CpvpIuZ0.js";const B={class:"report-modal"},D={class:"report-sheet"},L={class:"report-header"},N={class:"text-lg font-semibold text-gray-900"},O={class:"report-content"},U={class:"text-sm text-gray-500 mb-4"},q={class:"space-y-2"},P=["value"],T={class:"flex-1 min-w-0"},j={class:"font-medium text-gray-900 text-sm"},H={class:"text-xs text-gray-500"},E={class:"mt-4"},Q={class:"report-actions"},W=["disabled"],Y={key:0,class:"flex items-center justify-center gap-2"},G={key:1},J={__name:"ReportModal",props:{type:{type:String,required:!0,validator:i=>["listing","user"].includes(i)},itemId:{type:[Number,String],required:!0}},emits:["close","submitted"],setup(i,{emit:b}){const c=i,p=b,a=m(""),u=m(""),n=m(!1),y=[{value:"spam",label:"Spam or scam",description:"Fake listing or misleading information"},{value:"prohibited",label:"Prohibited item",description:"Item not allowed on platform"},{value:"duplicate",label:"Duplicate listing",description:"Same item posted multiple times"},{value:"wrong_category",label:"Wrong category",description:"Listed in wrong category"},{value:"offensive",label:"Offensive content",description:"Inappropriate language or images"},{value:"other",label:"Other",description:"Another reason"}],f=[{value:"harassment",label:"Harassment",description:"Threatening or abusive behavior"},{value:"scam",label:"Scammer",description:"Attempting to defraud users"},{value:"fake_profile",label:"Fake profile",description:"Using fake identity"},{value:"spam",label:"Spam",description:"Sending unsolicited messages"},{value:"other",label:"Other",description:"Another reason"}],h=w(()=>c.type==="listing"?y:f),x=async()=>{var o;if(a.value){n.value=!0;try{await z.post("/reports",{reportable_type:c.type,reportable_id:c.itemId,reason:a.value,description:u.value||null}),v.success("Report submitted successfully"),p("submitted"),p("close")}catch(t){((o=t.response)==null?void 0:o.status)===409?(v.info("You have already reported this"),p("close")):v.error("Failed to submit report")}finally{n.value=!1}}};return(o,t)=>(r(),l("div",B,[e("div",{class:"report-backdrop",onClick:t[0]||(t[0]=s=>o.$emit("close"))}),e("div",D,[e("div",L,[e("h3",N," Report "+d(i.type==="listing"?"Listing":"User"),1),e("button",{onClick:t[1]||(t[1]=s=>o.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full -mr-2"},[R(S(C),{class:"w-5 h-5 text-gray-500"})])]),e("div",O,[e("p",U," Please select a reason for reporting this "+d(i.type==="listing"?"listing":"user")+". ",1),e("div",q,[(r(!0),l(A,null,V(h.value,s=>(r(),l("label",{key:s.value,class:$(["flex items-start gap-3 p-3 border rounded-xl cursor-pointer hover:bg-gray-50 transition",a.value===s.value?"border-primary-500 bg-primary-50":""])},[g(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[2]||(t[2]=_=>a.value=_),class:"mt-0.5 text-primary-600"},null,8,P),[[F,a.value]]),e("div",T,[e("p",j,d(s.label),1),e("p",H,d(s.description),1)])],2))),128))]),e("div",E,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional details (optional)",-1)),g(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),rows:"2",class:"input resize-none text-sm",placeholder:"Any extra information..."},null,512),[[I,u.value]])])]),e("div",Q,[e("button",{onClick:t[4]||(t[4]=s=>o.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:x,disabled:!a.value||n.value,class:"btn-danger flex-1"},[n.value?(r(),l("span",Y,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),M(" Submitting... ",-1)])])):(r(),l("span",G,"Submit Report"))],8,W)])])]))}},X=k(J,[["__scopeId","data-v-dcf83024"]]);export{X as R};
