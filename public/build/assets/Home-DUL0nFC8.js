import{c as r,o,a as e,u as D,r as u,b as k,d as m,e as h,f as U,g as j,h as V,t as g,w as F,v as T,F as x,i as b,j as A,k as K,l as P,m as Q,n as w,p as R,q as z,s as M,x as E,y as G}from"./main-CccGz_zE.js";import{_ as W}from"./ListingCard-D3VLmY4v.js";import{r as H}from"./MapPinIcon-BN0ObACQ.js";import{r as I}from"./MagnifyingGlassIcon-qiMtPc2a.js";import{r as N,a as Z,b as J,c as O,d as X}from"./TruckIcon-B7iuaGmF.js";import{r as B}from"./ShoppingBagIcon-CPmWYS7K.js";import"./listings-BbyQQlnX.js";import"./dayjs.min-Bof1u0Bp.js";import"./relativeTime-Ckc_g6N8.js";function Y(q,_){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const ee={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},te={class:"relative bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden"},se={class:"flex items-center justify-between p-4 border-b"},oe={class:"p-4"},re=["disabled"],ae={class:"relative mb-4"},ne={key:0,class:"mb-4 max-h-40 overflow-y-auto"},le=["onClick"],ie={class:"font-medium"},ce={class:"text-gray-500 text-sm"},de={key:1},ue={class:"grid grid-cols-2 gap-2"},me=["onClick"],pe={__name:"LocationModal",emits:["close","select"],setup(q,{emit:_}){const d=_,v=D(),i=u(""),c=u([]),p=u(!1);let f=null;const $=k(()=>v.popularCities.slice(0,10)),C=()=>{if(clearTimeout(f),i.value.length<2){c.value=[];return}f=setTimeout(async()=>{try{const a=await A.get("/locations/search-cities",{params:{q:i.value}});c.value=a.data.data}catch{c.value=[]}},300)},y=a=>{v.setLocation(a),d("select",a),d("close")},L=async()=>{p.value=!0;try{const a=await v.detectLocation();d("select",a),d("close")}catch{}finally{p.value=!1}};return(a,l)=>(o(),r("div",ee,[e("div",{class:"absolute inset-0 bg-black/50",onClick:l[0]||(l[0]=t=>a.$emit("close"))}),e("div",te,[e("div",se,[l[3]||(l[3]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Select Location",-1)),e("button",{onClick:l[1]||(l[1]=t=>a.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[m(h(U),{class:"w-6 h-6 text-gray-500"})])]),e("div",oe,[e("button",{onClick:L,disabled:p.value,class:"w-full flex items-center justify-center gap-2 p-3 mb-4 bg-primary-50 text-primary-600 rounded-lg hover:bg-primary-100"},[m(h(H),{class:"w-5 h-5"}),V(" "+g(p.value?"Detecting...":"Use Current Location"),1)],8,re),e("div",ae,[m(h(I),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),F(e("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),type:"text",placeholder:"Search city...",class:"input pl-10",onInput:C},null,544),[[T,i.value]])]),c.value.length?(o(),r("div",ne,[(o(!0),r(x,null,b(c.value,t=>(o(),r("button",{key:t.id,onClick:s=>y(t),class:"w-full p-3 text-left hover:bg-gray-50 rounded-lg"},[e("span",ie,g(t.name),1),e("span",ce,", "+g(t.state),1)],8,le))),128))])):j("",!0),i.value?j("",!0):(o(),r("div",de,[l[4]||(l[4]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Popular Cities",-1)),e("div",ue,[(o(!0),r(x,null,b($.value,t=>(o(),r("button",{key:t.id,onClick:s=>y(t),class:"p-2 text-left text-sm hover:bg-gray-50 rounded-lg"},g(t.name),9,me))),128))])]))])])]))}},ve={class:"min-h-screen bg-gray-100"},ge={class:"bg-primary-950 py-8"},he={class:"container-app"},fe={class:"flex gap-2 max-w-4xl mx-auto"},ye={class:"truncate"},xe={class:"flex-1 flex bg-white rounded-md border-2 border-gray-200 overflow-hidden focus-within:border-primary-500 transition"},be={class:"py-6 bg-white border-b"},_e={class:"container-app"},we={class:"flex items-center justify-between overflow-x-auto hide-scrollbar gap-6 py-2"},ke={class:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-2 group-hover:bg-primary-50 transition border border-gray-100"},$e={class:"text-xs text-gray-700 font-medium text-center"},Ce={class:"py-8"},Le={class:"container-app"},Se={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3"},Me={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3"},je={class:"text-center mt-8"},Ve={class:"py-12 bg-gradient-to-r from-primary-100 to-primary-50"},qe={class:"container-app"},Ne={class:"flex flex-col md:flex-row items-center justify-between gap-6"},Pe={__name:"Home",setup(q){const _=K(),d=D(),v=u(!0),i=u(""),c=u(!1),p=u([]),f=u([]),$=k(()=>d.categories);k(()=>d.popularCities);const C=k(()=>{var t;return(t=d.currentLocation)==null?void 0:t.city}),y=()=>{i.value.trim()&&_.push({path:"/search",query:{q:i.value}})},L=t=>{c.value=!1,d.setLocation(t)},a=t=>({mobiles:X,vehicles:O,property:N,jobs:J,electronics:Z,fashion:B,furniture:N,services:Y})[t]||B,l=async()=>{try{const t=await A.get("/home");p.value=t.data.data.featured_listings,f.value=t.data.data.recent_listings}catch(t){console.error("Failed to fetch home data:",t)}finally{v.value=!1}};return P(()=>{l()}),(t,s)=>{const S=Q("router-link");return o(),r("div",ve,[e("section",ge,[e("div",he,[e("div",fe,[e("button",{onClick:s[0]||(s[0]=n=>c.value=!0),class:"flex items-center px-4 py-3 bg-white rounded-md border-2 border-gray-200 text-gray-700 hover:border-primary-500 transition min-w-[140px]"},[m(h(H),{class:"w-5 h-5 mr-2 text-primary-600"}),e("span",ye,g(C.value||"All India"),1),m(h(R),{class:"w-4 h-4 ml-auto"})]),e("div",xe,[F(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>i.value=n),type:"text",placeholder:"Find Cars, Mobile Phones and more...",class:"flex-1 px-4 py-3 focus:outline-none text-gray-900",onKeyup:z(y,["enter"])},null,544),[[T,i.value]]),e("button",{onClick:y,class:"px-6 bg-primary-950 hover:bg-primary-900 transition"},[m(h(I),{class:"w-6 h-6 text-white"})])])])])]),e("section",be,[e("div",_e,[e("div",we,[(o(!0),r(x,null,b($.value,n=>(o(),w(S,{key:n.id,to:`/category/${n.slug}`,class:"flex flex-col items-center min-w-[80px] group"},{default:M(()=>[e("div",ke,[(o(),w(E(a(n.slug)),{class:"w-7 h-7 text-primary-950"}))]),e("span",$e,g(n.name),1)]),_:2},1032,["to"]))),128))])])]),e("section",Ce,[e("div",Le,[s[5]||(s[5]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Fresh recommendations",-1)),v.value?(o(),r("div",Se,[(o(),r(x,null,b(12,n=>e("div",{key:n,class:"bg-white rounded-md overflow-hidden border border-gray-200"},[...s[3]||(s[3]=[G('<div class="skeleton aspect-square"></div><div class="p-3"><div class="skeleton h-5 w-20 mb-2"></div><div class="skeleton h-4 w-full mb-2"></div><div class="skeleton h-3 w-16"></div></div>',2)])])),64))])):(o(),r("div",Me,[(o(!0),r(x,null,b([...p.value,...f.value],n=>(o(),w(W,{key:n.id,listing:n},null,8,["listing"]))),128))])),e("div",je,[m(S,{to:"/search",class:"inline-flex items-center px-6 py-3 border-2 border-primary-950 text-primary-950 font-semibold rounded-md hover:bg-primary-50 transition"},{default:M(()=>[...s[4]||(s[4]=[V(" Load more ",-1)])]),_:1})])])]),e("section",Ve,[e("div",qe,[e("div",Ne,[s[7]||(s[7]=e("div",null,[e("h2",{class:"text-2xl font-bold text-primary-950 mb-2"},"Want to see your stuff here?"),e("p",{class:"text-gray-600"},"Make some extra cash by selling things in your community. Go for it, it's quick and easy.")],-1)),m(S,{to:"/sell",class:"px-8 py-3 bg-primary-950 text-white font-semibold rounded-full hover:bg-primary-900 transition whitespace-nowrap"},{default:M(()=>[...s[6]||(s[6]=[V(" + Sell Now ",-1)])]),_:1})])])]),c.value?(o(),w(pe,{key:0,onClose:s[2]||(s[2]=n=>c.value=!1),onSelect:L})):j("",!0)])}}};export{Pe as default};
