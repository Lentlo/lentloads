import{c as a,o as e,a as s,C as I,L as J,r as u,b as L,E as B,m as O,n as K,p as S,g as v,q as D,d as n,e as d,y as Q,h as _,t as i,I as b,F as x,j as g,k as M}from"./main-50LE4Cwi.js";import{d as T}from"./dayjs.min-Bof1u0Bp.js";import{_ as W}from"./ListingCard-CMDFg5_-.js";import{r as X,R as Z}from"./ReportModal-BGIAStLS.js";import{r as ss}from"./UserIcon-CsddmdSV.js";import{r as $}from"./StarIcon-DzUh0zpM.js";import{r as ts}from"./FlagIcon-Gb_uv5PL.js";import{r as es}from"./MapPinIcon-VgcEhZij.js";import{r as as}from"./ShoppingBagIcon-CEJk5IGU.js";import"./listings-Bj0oglgN.js";import"./relativeTime-Ckc_g6N8.js";import"./SparklesIcon-vdMNDHqh.js";import"./ClockIcon-CKkuKf26.js";import"./LoadingSpinner-Bf85Nr7y.js";function ls(U,m){return e(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}const os={class:"min-h-screen bg-gray-50 py-6"},rs={class:"container-app"},is={key:0,class:"max-w-4xl mx-auto"},ns={key:1,class:"max-w-md mx-auto text-center py-12"},ds={key:2,class:"max-w-4xl mx-auto"},cs={class:"card p-6 mb-6"},us={class:"flex flex-col sm:flex-row items-start gap-4"},vs=["src","alt"],ms={class:"flex-1"},ps={class:"flex items-start justify-between"},xs={class:"text-2xl font-bold text-gray-900"},gs={class:"flex items-center gap-2 mt-1"},_s={class:"flex items-center text-yellow-500"},fs={class:"ml-1 font-medium"},ys={class:"text-gray-500"},hs={class:"flex gap-2"},ws={key:0,class:"text-gray-600 mt-3"},ks={class:"flex flex-wrap items-center gap-4 mt-4 text-sm text-gray-500"},bs={key:0,class:"flex items-center"},Ms={class:"flex items-center"},$s={key:1,class:"flex items-center text-green-600"},Rs={class:"flex gap-6 mt-4 pt-4 border-t"},Cs={class:"text-center"},Ys={class:"text-2xl font-bold text-gray-900"},js={class:"text-center"},Ns={class:"text-2xl font-bold text-gray-900"},Vs={class:"text-center"},As={class:"text-2xl font-bold text-gray-900"},Ls={class:"flex gap-4 mb-6"},Bs={key:0},Ss={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ds={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ts={key:2,class:"card p-12 text-center"},Us={key:1},qs={key:0,class:"space-y-4"},Es={key:1,class:"space-y-4"},Fs={class:"flex items-start gap-4"},Ps=["src","alt"],zs={class:"flex-1"},Gs={class:"flex items-center justify-between"},Hs={class:"font-semibold text-gray-900"},Is={class:"flex items-center gap-1 mt-1"},Js={class:"text-sm text-gray-500"},Os={key:0,class:"text-gray-600 mt-2"},Ks={key:2,class:"card p-12 text-center"},ct={__name:"UserProfile",setup(U){const m=I(),q=J(),f=u(!0),y=u(!0),h=u(!0),l=u(null),w=u([]),p=u([]),c=u("listings"),k=u(!1),E=L(()=>{var o,t;return((o=q.user)==null?void 0:o.id)===((t=l.value)==null?void 0:t.id)}),F=L(()=>{var o;return(o=l.value)!=null&&o.response_rate?Math.round(l.value.response_rate):0}),P=o=>T(o).format("MMMM YYYY"),z=o=>T(o).format("MMM D, YYYY"),R=async()=>{f.value=!0;try{const o=await M.get(`/users/${m.params.id}`);l.value=o.data.data}catch{l.value=null}finally{f.value=!1}},C=async()=>{y.value=!0;try{const o=await M.get(`/users/${m.params.id}/listings`);w.value=o.data.data}finally{y.value=!1}},G=async()=>{h.value=!0;try{const o=await M.get(`/users/${m.params.id}/reviews`);p.value=o.data.data}finally{h.value=!1}};return B(c,o=>{o==="reviews"&&!p.value.length&&G()}),B(()=>m.params.id,()=>{m.params.id&&(R(),C(),p.value=[],c.value="listings")}),O(()=>{R(),C()}),(o,t)=>{var Y;const H=K("router-link");return e(),a("div",os,[s("div",rs,[f.value?(e(),a("div",is,[...t[4]||(t[4]=[D('<div class="card p-6 mb-6"><div class="flex items-start gap-4"><div class="skeleton w-24 h-24 rounded-full"></div><div class="flex-1"><div class="skeleton h-6 w-1/3 mb-2"></div><div class="skeleton h-4 w-1/4 mb-4"></div><div class="skeleton h-4 w-2/3"></div></div></div></div>',1)])])):l.value?(e(),a("div",ds,[s("div",cs,[s("div",us,[s("img",{src:l.value.avatar_url,alt:l.value.name,class:"w-24 h-24 rounded-full object-cover"},null,8,vs),s("div",ms,[s("div",ps,[s("div",null,[s("h1",xs,i(l.value.name),1),s("div",gs,[s("div",_s,[n(d($),{class:"w-5 h-5 fill-current"}),s("span",fs,i(l.value.rating||"0.0"),1)]),t[8]||(t[8]=s("span",{class:"text-gray-400"},"â€¢",-1)),s("span",ys,i(l.value.reviews_count||0)+" reviews",1)])]),s("div",hs,[E.value?v("",!0):(e(),a("button",{key:0,onClick:t[0]||(t[0]=r=>k.value=!0),class:"p-2 text-gray-500 hover:bg-gray-100 rounded",title:"Report user"},[n(d(ts),{class:"w-5 h-5"})]))])]),l.value.bio?(e(),a("p",ws,i(l.value.bio),1)):v("",!0),s("div",ks,[l.value.city?(e(),a("div",bs,[n(d(es),{class:"w-4 h-4 mr-1"}),_(" "+i(l.value.city)+i(l.value.state?`, ${l.value.state}`:""),1)])):v("",!0),s("div",Ms,[n(d(ls),{class:"w-4 h-4 mr-1"}),_(" Member since "+i(P(l.value.created_at)),1)]),l.value.is_verified?(e(),a("div",$s,[n(d(X),{class:"w-4 h-4 mr-1"}),t[9]||(t[9]=_(" Verified ",-1))])):v("",!0)]),s("div",Rs,[s("div",Cs,[s("p",Ys,i(l.value.listings_count||0),1),t[10]||(t[10]=s("p",{class:"text-sm text-gray-500"},"Listings",-1))]),s("div",js,[s("p",Ns,i(l.value.sold_count||0),1),t[11]||(t[11]=s("p",{class:"text-sm text-gray-500"},"Sold",-1))]),s("div",Vs,[s("p",As,i(F.value)+"%",1),t[12]||(t[12]=s("p",{class:"text-sm text-gray-500"},"Response Rate",-1))])])])])]),s("div",Ls,[s("button",{onClick:t[1]||(t[1]=r=>c.value="listings"),class:b(["px-4 py-2 rounded-lg font-medium",c.value==="listings"?"bg-primary-600 text-white":"bg-white text-gray-600"])}," Listings ",2),s("button",{onClick:t[2]||(t[2]=r=>c.value="reviews"),class:b(["px-4 py-2 rounded-lg font-medium",c.value==="reviews"?"bg-primary-600 text-white":"bg-white text-gray-600"])}," Reviews ",2)]),c.value==="listings"?(e(),a("div",Bs,[y.value?(e(),a("div",Ss,[(e(),a(x,null,g(6,r=>s("div",{key:r,class:"card p-4"},[...t[13]||(t[13]=[s("div",{class:"skeleton aspect-square rounded-lg mb-2"},null,-1),s("div",{class:"skeleton h-4 w-3/4 mb-1"},null,-1),s("div",{class:"skeleton h-4 w-1/2"},null,-1)])])),64))])):w.value.length?(e(),a("div",Ds,[(e(!0),a(x,null,g(w.value,r=>(e(),S(W,{key:r.id,listing:r},null,8,["listing"]))),128))])):(e(),a("div",Ts,[n(d(as),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t[14]||(t[14]=s("p",{class:"text-gray-500"},"No listings yet",-1))]))])):v("",!0),c.value==="reviews"?(e(),a("div",Us,[h.value?(e(),a("div",qs,[(e(),a(x,null,g(3,r=>s("div",{key:r,class:"card p-4"},[...t[15]||(t[15]=[D('<div class="flex gap-4"><div class="skeleton w-10 h-10 rounded-full"></div><div class="flex-1"><div class="skeleton h-4 w-1/4 mb-2"></div><div class="skeleton h-3 w-full"></div></div></div>',1)])])),64))])):p.value.length?(e(),a("div",Es,[(e(!0),a(x,null,g(p.value,r=>{var j,N,V;return e(),a("div",{key:r.id,class:"card p-4"},[s("div",Fs,[s("img",{src:(j=r.reviewer)==null?void 0:j.avatar_url,alt:(N=r.reviewer)==null?void 0:N.name,class:"w-10 h-10 rounded-full object-cover"},null,8,Ps),s("div",zs,[s("div",Gs,[s("div",null,[s("p",Hs,i((V=r.reviewer)==null?void 0:V.name),1),s("div",Is,[(e(),a(x,null,g(5,A=>n(d($),{key:A,class:b(["w-4 h-4",A<=r.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))])]),s("span",Js,i(z(r.created_at)),1)]),r.comment?(e(),a("p",Os,i(r.comment),1)):v("",!0)])])])}),128))])):(e(),a("div",Ks,[n(d($),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t[16]||(t[16]=s("p",{class:"text-gray-500"},"No reviews yet",-1))]))])):v("",!0)])):(e(),a("div",ns,[n(d(ss),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t[6]||(t[6]=s("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"User not found",-1)),t[7]||(t[7]=s("p",{class:"text-gray-500 mb-4"},"This user doesn't exist or has been removed.",-1)),n(H,{to:"/",class:"btn-primary"},{default:Q(()=>[...t[5]||(t[5]=[_("Go Home",-1)])]),_:1})]))]),k.value?(e(),S(Z,{key:0,type:"user","item-id":(Y=l.value)==null?void 0:Y.id,onClose:t[3]||(t[3]=r=>k.value=!1)},null,8,["item-id"])):v("",!0)])}}};export{ct as default};
