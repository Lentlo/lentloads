import{_ as L,b as $,r as N,d as l,e as S,m as x,o as a,w as B,a as s,c as n,f as c,g as d,j as u,p as h,S as M,R as j,t as r}from"./main-CNm8sZUs.js";import{u as D}from"./listings-b1JtfoMS.js";import{d as p}from"./dayjs.min-iy57P9mS.js";import{r as E}from"./relativeTime-D5nU98bY.js";import{r as V}from"./SparklesIcon-OhqwyrnF.js";import{r as z}from"./BoltIcon-BNUPD1R1.js";import{r as A}from"./MapPinIcon-C3iSJA00.js";const I={class:"card-image"},P=["src","alt"],q={key:0,class:"badge-featured"},G={key:1,class:"badge-urgent"},O={class:"card-content"},R={class:"price-row"},T={class:"price"},U={key:0,class:"condition-badge"},H={class:"card-title"},J={class:"meta-row"},K={class:"location"},Q={key:0,class:"distance"},W={key:1,class:"time"},X={__name:"ListingCard",props:{listing:{type:Object,required:!0},showFavorite:{type:Boolean,default:!0}},setup(i){p.extend(E);const o=i,v=$(),_=D(),g=N(o.listing.is_favorited||!1),w=l(()=>{var e;return(o.listing.formatted_price||`â‚¹${(e=o.listing.price)==null?void 0:e.toLocaleString()}`).replace(/\s*\(Negotiable\)/gi,"").trim()}),m=l(()=>{const t=o.listing.condition;return t?{new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"}[t.toLowerCase()]||t.replace(/_/g," "):""}),y=l(()=>{const e=(o.listing.location||o.listing.city||"").split(",")[0].trim();return e.length>15?e.substring(0,15)+"...":e}),f=l(()=>{const t=o.listing.distance;return t==null?"":t<1?`${Math.round(t*1e3)}m away`:t<10?`${t.toFixed(1)} km`:`${Math.round(t)} km`}),k=async()=>{if(!v.isAuthenticated)return;const t=await _.toggleFavorite(o.listing.id);g.value=t.is_favorited},b=t=>p(t).fromNow(),C=t=>{t.target.src="https://images.unsplash.com/photo-1560393464-5c69a73c5770?w=400&h=300&fit=crop&auto=format"};return(t,e)=>{const F=S("router-link");return a(),x(F,{to:`/listing/${i.listing.slug}`,class:"listing-card group"},{default:B(()=>[s("div",I,[s("img",{src:i.listing.primary_image_url,alt:i.listing.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",onError:C},null,40,P),i.listing.is_featured?(a(),n("div",q,[d(u(V),{class:"w-3 h-3"}),e[0]||(e[0]=s("span",null,"Featured",-1))])):c("",!0),i.listing.is_urgent?(a(),n("div",G,[d(u(z),{class:"w-3 h-3"}),e[1]||(e[1]=s("span",null,"Urgent",-1))])):c("",!0),i.showFavorite?(a(),n("button",{key:2,onClick:M(k,["prevent"]),class:h(["btn-favorite",{"is-favorited":g.value}])},[d(u(j),{class:h(["w-5 h-5",g.value?"fill-current":""])},null,8,["class"])],2)):c("",!0)]),s("div",O,[s("div",R,[s("span",T,r(w.value),1),m.value?(a(),n("span",U,r(m.value),1)):c("",!0)]),s("h3",H,r(i.listing.title),1),s("div",J,[s("span",K,[d(u(A),{class:"w-3.5 h-3.5"}),s("span",null,r(y.value),1)]),f.value?(a(),n("span",Q,r(f.value),1)):(a(),n("span",W,r(b(i.listing.published_at||i.listing.created_at)),1))])])]),_:1},8,["to"])}}},at=L(X,[["__scopeId","data-v-929149c3"]]);export{at as L};
