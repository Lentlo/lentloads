import{x as S,y as V,d as r,e as M,z as P,f as j,c as l,o as t,a as e,g as h,F as v,i as p,K as z,L as D,j as H,t as k,C as B,n as x,w as E,k as I,Q as K}from"./main-Dyx1PIu1.js";import{L as Q}from"./ListingCard-CzA6C13x.js";import"./listings-DrPlP9lv.js";import"./dayjs.min-CqhGclyr.js";import"./relativeTime-BxpmYYer.js";import"./SparklesIcon-qdKdhl_t.js";import"./BoltIcon-JuRfnZSU.js";const T={class:"all-ads-page min-h-screen bg-gray-50"},U={class:"container-app py-4"},$={class:"mb-6"},q={key:0,class:"grid grid-cols-3 sm:grid-cols-4 gap-3"},G={key:1,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},J={class:"category-icon"},O=["src","alt"],R={class:"category-name"},W={key:2,class:"text-center py-4 text-gray-500 text-sm"},X={class:"flex items-center justify-between mb-3"},Y={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Z={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ee={key:2,class:"card p-8 text-center"},se={key:3,class:"mt-6 text-center"},te=["disabled"],ae={key:0,class:"flex items-center gap-2"},le={key:1},oe={key:4,class:"text-center text-sm text-gray-500 mt-4"},re={__name:"AllAds",setup(ie){const w=V(),d=r(!0),m=r([]),_=r(!0),c=r(!1),i=r([]),y=r("newest"),u=r(1),b=r(1),C=r(0),L=M(()=>m.value.filter(o=>!o.parent_id)),A=M(()=>u.value<b.value),N=async()=>{var o;d.value=!0;try{if((o=w.categories)!=null&&o.length)m.value=w.categories;else{const s=await B.get("/categories");m.value=s.data.data||[]}}catch(s){console.error("Failed to fetch categories:",s)}finally{d.value=!1}},f=async(o=!1)=>{var s,g,a;o?c.value=!0:(_.value=!0,u.value=1);try{const n=await B.get("/listings",{params:{sort:y.value,page:o?u.value+1:1,per_page:12}});o?i.value=[...i.value,...n.data.data]:i.value=n.data.data||[],C.value=((s=n.data.meta)==null?void 0:s.total)||0,u.value=((g=n.data.meta)==null?void 0:g.current_page)||1,b.value=((a=n.data.meta)==null?void 0:a.last_page)||1}catch(n){console.error("Failed to fetch listings:",n)}finally{_.value=!1,c.value=!1}},F=()=>{!c.value&&A.value&&f(!0)};return P(()=>{N(),f()}),(o,s)=>{const g=j("router-link");return t(),l("div",T,[e("div",U,[s[8]||(s[8]=e("div",{class:"mb-4"},[e("h1",{class:"text-xl font-bold text-gray-900"},"All Ads"),e("p",{class:"text-sm text-gray-500"},"Browse by category or explore all listings")],-1)),e("div",$,[s[2]||(s[2]=e("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3"},"Categories",-1)),d.value?(t(),l("div",q,[(t(),l(v,null,p(8,a=>e("div",{key:a,class:"category-skeleton"},[...s[1]||(s[1]=[e("div",{class:"skeleton w-10 h-10 rounded-lg mb-2"},null,-1),e("div",{class:"skeleton h-3 w-16"},null,-1)])])),64))])):(t(),l("div",G,[(t(!0),l(v,null,p(L.value,a=>(t(),x(g,{key:a.id,to:`/category/${a.slug}`,class:"category-card"},{default:E(()=>[e("div",J,[a.icon_url?(t(),l("img",{key:0,src:a.icon_url,alt:a.name,class:"w-6 h-6"},null,8,O)):(t(),x(I(K),{key:1,class:"w-6 h-6 text-primary-600"}))]),e("span",R,k(a.name),1)]),_:2},1032,["to"]))),128))])),!d.value&&L.value.length===0?(t(),l("div",W," No categories found ")):h("",!0)]),e("div",null,[e("div",X,[s[4]||(s[4]=e("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"All Listings",-1)),z(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>y.value=a),onChange:f,class:"sort-select"},[...s[3]||(s[3]=[e("option",{value:"newest"},"Newest First",-1),e("option",{value:"price_low"},"Price: Low to High",-1),e("option",{value:"price_high"},"Price: High to Low",-1)])],544),[[D,y.value]])]),_.value&&i.value.length===0?(t(),l("div",Y,[(t(),l(v,null,p(8,a=>e("div",{key:a,class:"card p-3"},[...s[5]||(s[5]=[e("div",{class:"skeleton h-32 mb-2 rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-20 mb-1"},null,-1),e("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):i.value.length?(t(),l("div",Z,[(t(!0),l(v,null,p(i.value,a=>(t(),x(Q,{key:a.id,listing:a},null,8,["listing"]))),128))])):(t(),l("div",ee,[...s[6]||(s[6]=[e("p",{class:"text-gray-500"},"No listings found",-1)])])),A.value?(t(),l("div",se,[e("button",{onClick:F,disabled:c.value,class:"load-more-btn"},[c.value?(t(),l("span",ae,[...s[7]||(s[7]=[e("svg",{class:"animate-spin w-4 h-4",viewBox:"0 0 24 24",fill:"none"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),e("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",class:"opacity-75"})],-1),H(" Loading... ",-1)])])):(t(),l("span",le,"Load More"))],8,te)])):h("",!0),i.value.length>0?(t(),l("p",oe," Showing "+k(i.value.length)+" of "+k(C.value)+" ads ",1)):h("",!0)])])])}}},me=S(re,[["__scopeId","data-v-f941aea7"]]);export{me as default};
