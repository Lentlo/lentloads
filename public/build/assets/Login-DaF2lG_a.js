import{c as l,o as a,a as e,D as G,u as J,b as K,r as y,L as S,E as Q,e as X,g as h,w as A,t as p,f as g,U,z as w,B as k,p as v,i as b,j as f,V as j,m as C,R as ee,W as M,C as se,O as L}from"./main-CnlZqw4q.js";import{r as z}from"./ArrowLeftIcon-DbkVCtvp.js";import{r as te}from"./UserIcon-CXfShN52.js";import{r as T}from"./EyeIcon-zeg65CoN.js";import{r as D}from"./EyeSlashIcon-B1l1DHVn.js";import{r as oe}from"./PhoneIcon-CpLn_l-F.js";function re(F,P){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}const ae={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4"},ne={class:"max-w-md w-full"},le={class:"text-center mb-8"},ie={class:"mt-6 text-3xl font-bold text-gray-900"},de={class:"mt-2 text-gray-600"},ue={class:"card p-8"},pe={key:0},me={key:0,class:"mt-1 text-sm text-red-600"},ce=["disabled"],fe={key:0,class:"flex items-center justify-center"},ye={key:1},ge={key:1},we={class:"mb-6"},he={class:"flex items-center p-3 bg-gray-50 rounded-lg"},ve={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},xe={class:"ml-3"},be={class:"font-medium text-gray-900"},_e={class:"text-sm text-gray-500"},ke={class:"flex items-center justify-between"},Ce={class:"relative"},Pe=["type"],Ee={key:0,class:"mt-1 text-sm text-red-600"},Ve={class:"flex items-center"},qe=["disabled"],Se={key:0},Ue={key:1},je={key:2},Me={class:"mb-6"},Be={class:"flex items-center p-3 bg-blue-50 rounded-lg"},Ne={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},We={class:"ml-3"},Ie={class:"text-sm text-gray-500"},Re={key:0,class:"mt-1 text-sm text-red-600"},$e={key:0},Ae={key:0,class:"mt-1 text-sm text-red-600"},Le={key:1},ze={key:0,class:"mt-1 text-sm text-red-600"},Te={class:"relative"},De=["type"],Fe={key:0,class:"mt-1 text-sm text-red-600"},Oe=["type"],He={key:0,class:"mt-1 text-sm text-red-600"},Ze=["disabled"],Ye={key:0},Ge={key:1},Je={class:"mt-6 pt-6 border-t"},Ke={class:"flex justify-center gap-3"},Qe={href:"tel:+918122116594",class:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm text-gray-700 transition"},as={__name:"Login",setup(F){const P=G(),B=J(),N=K(),u=y(!1),c=y(!1),m=y("identify"),E=y(""),x=y(""),V=y(null),W=y(null),I=y(null),n=S({login:"",password:"",remember:!1}),r=S({name:"",email:"",phone:"",password:"",password_confirmation:""}),t=S({login:"",password:"",name:"",email:"",phone:"",password_confirmation:""}),_=()=>{Object.keys(t).forEach(i=>t[i]="")},O=async()=>{var i,s,d;if(_(),!n.login||n.login.length<5){t.login="Please enter a valid phone number or email";return}u.value=!0;try{const o=await se.post("/auth/check-user",{login:n.login}),{exists:q,name:Y,type:$}=o.data.data;x.value=$,E.value=Y||"User",q?(m.value="login",await M(),(i=W.value)==null||i.focus()):(m.value="register",$==="email"?r.email=n.login:r.phone=n.login,await M(),(s=I.value)==null||s.focus())}catch(o){((d=o.response)==null?void 0:d.status)===429?t.login="Too many attempts. Please try again later.":t.login="Something went wrong. Please try again."}finally{u.value=!1}},H=async()=>{var i,s;if(_(),!n.password){t.password="Password is required";return}u.value=!0;try{await N.login({login:n.login,password:n.password,remember:n.remember}),L.success("Welcome back!");const d=B.query.redirect,o=d&&d.startsWith("/")&&!d.startsWith("//")?d:"/dashboard";P.push(o)}catch(d){((i=d.response)==null?void 0:i.status)===401?t.password="Incorrect password. Please try again.":((s=d.response)==null?void 0:s.status)===403?t.password="Your account has been suspended.":t.password="Something went wrong. Please try again."}finally{u.value=!1}},Z=async()=>{var i,s;if(_(),!r.name){t.name="Name is required";return}if(x.value==="phone"&&!r.email){t.email="Email is required";return}if(x.value==="email"&&!r.phone){t.phone="Phone number is required";return}if(!r.password||r.password.length<8){t.password="Password must be at least 8 characters";return}if(r.password!==r.password_confirmation){t.password_confirmation="Passwords do not match";return}u.value=!0;try{const d={name:r.name,email:x.value==="phone"?r.email:n.login,phone:x.value==="phone"?n.login:r.phone,password:r.password,password_confirmation:r.password_confirmation};await N.register(d),L.success("Account created successfully!");const o=B.query.redirect,q=o&&o.startsWith("/")&&!o.startsWith("//")?o:"/dashboard";P.push(q)}catch(d){if((s=(i=d.response)==null?void 0:i.data)!=null&&s.errors){const o=d.response.data.errors;o.email&&(t.email=o.email[0]),o.phone&&(t.phone=o.phone[0]),o.password&&(t.password=o.password[0]),o.name&&(t.name=o.name[0])}else t.password="Something went wrong. Please try again."}finally{u.value=!1}},R=()=>{m.value="identify",n.password="",Object.keys(r).forEach(i=>r[i]=""),_(),M(()=>{var i;return(i=V.value)==null?void 0:i.focus()})};return Q(()=>{var i;(i=V.value)==null||i.focus()}),(i,s)=>{const d=X("router-link");return a(),l("div",ae,[e("div",ne,[e("div",le,[h(d,{to:"/",class:"inline-flex items-center space-x-2"},{default:A(()=>[...s[10]||(s[10]=[e("div",{class:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-2xl"},"L")],-1),e("span",{class:"text-2xl font-bold text-gray-900"},"Lentloads",-1)])]),_:1}),e("h2",ie,p(m.value==="login"?"Welcome back":m.value==="register"?"Create account":"Sign in or Register"),1),e("p",de,p(m.value==="login"?`Welcome back, ${E.value}!`:m.value==="register"?"Create your account to get started":"Enter your phone number or email"),1)]),e("div",ue,[m.value==="identify"?(a(),l("div",pe,[e("form",{onSubmit:U(O,["prevent"]),class:"space-y-6"},[e("div",null,[s[11]||(s[11]=e("label",{for:"login",class:"label"},"Phone number or Email",-1)),w(e("input",{id:"login",ref_key:"loginInput",ref:V,"onUpdate:modelValue":s[0]||(s[0]=o=>n.login=o),type:"text",autocomplete:"email tel",required:"",class:v(["input",{"input-error":t.login}]),placeholder:"Enter phone or email"},null,2),[[k,n.login]]),s[12]||(s[12]=e("p",{class:"mt-1 text-xs text-gray-500"},"Example: 8122116594 or you@example.com",-1)),t.login?(a(),l("p",me,p(t.login),1)):g("",!0)]),e("button",{type:"submit",disabled:u.value,class:"btn-primary w-full"},[u.value?(a(),l("span",fe,[...s[13]||(s[13]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Checking... ",-1)])])):(a(),l("span",ye,"Continue"))],8,ce)],32)])):m.value==="login"?(a(),l("div",ge,[e("div",we,[e("button",{type:"button",onClick:R,class:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4"},[h(f(z),{class:"w-4 h-4 mr-1"}),s[14]||(s[14]=b(" Change ",-1))]),e("div",he,[e("div",ve,[h(f(te),{class:"w-5 h-5 text-primary-600"})]),e("div",xe,[e("p",be,p(E.value),1),e("p",_e,p(n.login),1)])])]),e("form",{onSubmit:U(H,["prevent"]),class:"space-y-6"},[e("div",null,[e("div",ke,[s[16]||(s[16]=e("label",{for:"password",class:"label"},"Password",-1)),h(d,{to:"/forgot-password",class:"text-sm text-primary-600 hover:underline"},{default:A(()=>[...s[15]||(s[15]=[b(" Forgot password? ",-1)])]),_:1})]),e("div",Ce,[w(e("input",{id:"password",ref_key:"passwordInput",ref:W,"onUpdate:modelValue":s[1]||(s[1]=o=>n.password=o),type:c.value?"text":"password",autocomplete:"current-password",required:"",class:v(["input pr-10",{"input-error":t.password}]),placeholder:"Enter your password"},null,10,Pe),[[j,n.password]]),e("button",{type:"button",onClick:s[2]||(s[2]=o=>c.value=!c.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"},[c.value?(a(),C(f(D),{key:1,class:"w-5 h-5"})):(a(),C(f(T),{key:0,class:"w-5 h-5"}))])]),t.password?(a(),l("p",Ee,p(t.password),1)):g("",!0)]),e("div",Ve,[w(e("input",{id:"remember","onUpdate:modelValue":s[3]||(s[3]=o=>n.remember=o),type:"checkbox",class:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"},null,512),[[ee,n.remember]]),s[17]||(s[17]=e("label",{for:"remember",class:"ml-2 text-sm text-gray-600"}," Remember me ",-1))]),e("button",{type:"submit",disabled:u.value,class:"btn-primary w-full"},[u.value?(a(),l("span",Se,"Signing in...")):(a(),l("span",Ue,"Sign in"))],8,qe)],32)])):m.value==="register"?(a(),l("div",je,[e("div",Me,[e("button",{type:"button",onClick:R,class:"flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4"},[h(f(z),{class:"w-4 h-4 mr-1"}),s[18]||(s[18]=b(" Change ",-1))]),e("div",Be,[e("div",Ne,[h(f(re),{class:"w-5 h-5 text-blue-600"})]),e("div",We,[s[19]||(s[19]=e("p",{class:"font-medium text-gray-900"},"New account",-1)),e("p",Ie,p(n.login),1)])])]),e("form",{onSubmit:U(Z,["prevent"]),class:"space-y-4"},[e("div",null,[s[20]||(s[20]=e("label",{for:"name",class:"label"},"Full Name",-1)),w(e("input",{id:"name",ref_key:"nameInput",ref:I,"onUpdate:modelValue":s[4]||(s[4]=o=>r.name=o),type:"text",autocomplete:"name",required:"",class:v(["input",{"input-error":t.name}]),placeholder:"Enter your full name"},null,2),[[k,r.name]]),t.name?(a(),l("p",Re,p(t.name),1)):g("",!0)]),x.value==="phone"?(a(),l("div",$e,[s[21]||(s[21]=e("label",{for:"email",class:"label"},"Email address",-1)),w(e("input",{id:"email","onUpdate:modelValue":s[5]||(s[5]=o=>r.email=o),type:"email",autocomplete:"email",required:"",class:v(["input",{"input-error":t.email}]),placeholder:"you@example.com"},null,2),[[k,r.email]]),t.email?(a(),l("p",Ae,p(t.email),1)):g("",!0)])):(a(),l("div",Le,[s[22]||(s[22]=e("label",{for:"phone",class:"label"},"Phone number",-1)),w(e("input",{id:"phone","onUpdate:modelValue":s[6]||(s[6]=o=>r.phone=o),type:"tel",autocomplete:"tel",required:"",class:v(["input",{"input-error":t.phone}]),placeholder:"Enter your phone number"},null,2),[[k,r.phone]]),t.phone?(a(),l("p",ze,p(t.phone),1)):g("",!0)])),e("div",null,[s[23]||(s[23]=e("label",{for:"reg-password",class:"label"},"Create Password",-1)),e("div",Te,[w(e("input",{id:"reg-password","onUpdate:modelValue":s[7]||(s[7]=o=>r.password=o),type:c.value?"text":"password",autocomplete:"new-password",required:"",class:v(["input pr-10",{"input-error":t.password}]),placeholder:"Min 8 characters"},null,10,De),[[j,r.password]]),e("button",{type:"button",onClick:s[8]||(s[8]=o=>c.value=!c.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"},[c.value?(a(),C(f(D),{key:1,class:"w-5 h-5"})):(a(),C(f(T),{key:0,class:"w-5 h-5"}))])]),t.password?(a(),l("p",Fe,p(t.password),1)):g("",!0)]),e("div",null,[s[24]||(s[24]=e("label",{for:"password-confirm",class:"label"},"Confirm Password",-1)),w(e("input",{id:"password-confirm","onUpdate:modelValue":s[9]||(s[9]=o=>r.password_confirmation=o),type:c.value?"text":"password",autocomplete:"new-password",required:"",class:v(["input",{"input-error":t.password_confirmation}]),placeholder:"Confirm your password"},null,10,Oe),[[j,r.password_confirmation]]),t.password_confirmation?(a(),l("p",He,p(t.password_confirmation),1)):g("",!0)]),e("button",{type:"submit",disabled:u.value,class:"btn-primary w-full"},[u.value?(a(),l("span",Ye,"Creating account...")):(a(),l("span",Ge,"Create Account"))],8,Ze)],32)])):g("",!0),e("div",Je,[s[27]||(s[27]=e("p",{class:"text-sm text-gray-500 text-center mb-3"}," Need help? Contact us ",-1)),e("div",Ke,[e("a",Qe,[h(f(oe),{class:"w-4 h-4"}),s[25]||(s[25]=b(" Call Us ",-1))]),s[26]||(s[26]=e("a",{href:"https://wa.me/918122116594?text=Hi,%20I%20need%20help%20with%20my%20Lentloads%20account",target:"_blank",class:"flex items-center gap-2 px-4 py-2 bg-green-100 hover:bg-green-200 rounded-lg text-sm text-green-700 transition"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})]),b(" WhatsApp ")],-1))])])])])])}}};export{as as default};
