import{I as v,r as x,m as y,n as p,o,s as b,a as e,c as l,g as n,M as w,d as _,e as k,J as E,E as C,t as a}from"./main-CccGz_zE.js";import{u as F}from"./listings-BbyQQlnX.js";import{d as c}from"./dayjs.min-Bof1u0Bp.js";import{r as B}from"./relativeTime-Ckc_g6N8.js";const j={class:"relative aspect-square bg-gray-100 overflow-hidden"},A=["src","alt"],N={key:0,class:"absolute top-0 left-0 bg-amber-400 text-amber-900 text-xs font-semibold px-2 py-1"},S={class:"p-3"},D={class:"text-lg font-bold text-gray-900"},I={class:"text-sm text-gray-600 line-clamp-1 mt-1"},V={class:"flex items-center justify-between mt-2 text-xs text-gray-400"},q={class:"uppercase truncate max-w-[60%]"},O={__name:"ListingCard",props:{listing:{type:Object,required:!0},showFavorite:{type:Boolean,default:!0}},setup(t){c.extend(B);const i=t,d=v(),u=F(),r=x(i.listing.is_favorited||!1),g=async()=>{if(!d.isAuthenticated)return;const s=await u.toggleFavorite(i.listing.id);r.value=s.is_favorited},m=s=>c(s).fromNow(),h=s=>{s.target.src="https://placehold.co/400x300/E5E7EB/9CA3AF?text=No+Image"};return(s,z)=>{const f=y("router-link");return o(),p(f,{to:`/listing/${t.listing.slug}`,class:"group block bg-white rounded-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-200"},{default:b(()=>[e("div",j,[e("img",{src:t.listing.primary_image_url,alt:t.listing.title,class:"w-full h-full object-cover",loading:"lazy",onError:h},null,40,A),t.listing.is_featured?(o(),l("div",N," FEATURED ")):n("",!0),t.showFavorite?(o(),l("button",{key:1,onClick:w(g,["prevent"]),class:"absolute top-2 right-2 w-8 h-8 bg-white rounded-full shadow flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[_(k(E),{class:C(["w-5 h-5",r.value?"text-red-500 fill-current":"text-gray-400"])},null,8,["class"])])):n("",!0)]),e("div",S,[e("p",D,a(t.listing.formatted_price),1),e("h3",I,a(t.listing.title),1),e("div",V,[e("span",q,a(t.listing.location),1),e("span",null,a(m(t.listing.published_at||t.listing.created_at)),1)])])]),_:1},8,["to"])}}};export{O as _};
