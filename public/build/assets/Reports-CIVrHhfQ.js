import{r as c,L as H,E as W,c as i,o as n,a as t,f as p,z as k,N as w,G as B,F as G,h as q,t as l,g,j as m,l as F,C as R,O as y,p as O,m as L}from"./main-CQn_a_2L.js";import{d as T}from"./dayjs.min-DBgBIX5i.js";import{r as J}from"./TagIcon-DLMnzKaF.js";import{r as K}from"./UserIcon-CXXssHql.js";import{r as Q}from"./EyeIcon-B1jbuYPl.js";import{r as X}from"./CheckIcon-a1GkPhOX.js";const Z={class:"p-6"},tt={class:"card p-4 mb-6"},et={class:"flex flex-wrap gap-4"},st={class:"card overflow-hidden"},ot={class:"w-full"},at={class:"divide-y"},lt={key:0},nt={key:1},it={class:"px-4 py-3"},rt={class:"flex items-center gap-3"},dt={class:"font-medium text-gray-900"},pt={class:"text-sm text-gray-500"},ut={class:"px-4 py-3"},ct={class:"badge bg-red-100 text-red-700"},mt={class:"px-4 py-3 text-gray-600"},vt={class:"px-4 py-3"},gt={class:"px-4 py-3 text-gray-600"},yt={class:"px-4 py-3"},xt={class:"flex items-center gap-2"},bt=["onClick"],ft=["onClick"],_t=["onClick"],ht={key:0,class:"p-4 border-t flex items-center justify-between"},kt={class:"text-sm text-gray-500"},wt={class:"flex gap-2"},Rt=["disabled"],Ct=["disabled"],Dt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},$t={class:"relative bg-white rounded-xl p-6 w-full max-w-lg"},St={class:"flex items-center justify-between mb-4"},Mt={class:"space-y-4"},Pt={class:"font-medium"},Nt={class:"badge bg-red-100 text-red-700"},Vt={key:0},Yt={class:"text-gray-700"},jt={class:"font-medium"},At={class:"text-sm text-gray-500"},Bt={key:1,class:"pt-4 border-t"},Ft={class:"font-medium"},Ot={key:0,class:"text-sm text-gray-600 mt-1"},Lt={key:0,class:"flex gap-2 mt-6 pt-4 border-t"},Gt={__name:"Reports",setup(Tt){const x=c(!0),b=c([]),r=c(1),v=c(1),f=c(20),_=c(0),a=c(null),d=H({status:"",type:"",reason:""}),U=o=>T(o).format("MMM D, YYYY"),z=o=>T(o).format("MMM D, YYYY h:mm A"),C=o=>({spam:"Spam/Scam",prohibited:"Prohibited Item",duplicate:"Duplicate",offensive:"Offensive Content",harassment:"Harassment",scam:"Scammer",fake_profile:"Fake Profile",wrong_category:"Wrong Category",other:"Other"})[o]||o,I=o=>({pending:"bg-yellow-100 text-yellow-800",reviewed:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",dismissed:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",u=async()=>{x.value=!0;try{const o=await R.get("/admin/reports",{params:{page:r.value,status:d.status,type:d.type,reason:d.reason}});b.value=o.data.data,r.value=o.data.meta.current_page,v.value=o.data.meta.last_page,f.value=o.data.meta.per_page,_.value=o.data.meta.total}finally{x.value=!1}},D=o=>{o>=1&&o<=v.value&&(r.value=o,u())},E=o=>{a.value=o},$=async o=>{const e=prompt('What action did you take? (e.g., "Removed listing", "Banned user")');if(e)try{await R.post(`/admin/reports/${o.id}/resolve`,{notes:e}),y.success("Report resolved"),u()}catch{y.error("Failed to resolve report")}},S=async o=>{if(confirm("Dismiss this report? No action will be taken."))try{await R.post(`/admin/reports/${o.id}/dismiss`),y.success("Report dismissed"),u()}catch{y.error("Failed to dismiss report")}};return W(()=>{u()}),(o,e)=>{var h,M,P,N;return n(),i("div",Z,[e[22]||(e[22]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Reports")],-1)),t("div",tt,[t("div",et,[k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.status=s),onChange:u,class:"input w-auto"},[...e[9]||(e[9]=[B('<option value="">All Status</option><option value="pending">Pending</option><option value="reviewed">Reviewed</option><option value="resolved">Resolved</option><option value="dismissed">Dismissed</option>',5)])],544),[[w,d.status]]),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.type=s),onChange:u,class:"input w-auto"},[...e[10]||(e[10]=[t("option",{value:""},"All Types",-1),t("option",{value:"listing"},"Listings",-1),t("option",{value:"user"},"Users",-1)])],544),[[w,d.type]]),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.reason=s),onChange:u,class:"input w-auto"},[...e[11]||(e[11]=[B('<option value="">All Reasons</option><option value="spam">Spam/Scam</option><option value="prohibited">Prohibited Item</option><option value="offensive">Offensive Content</option><option value="harassment">Harassment</option><option value="other">Other</option>',6)])],544),[[w,d.reason]])])]),t("div",st,[t("table",ot,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Report"),t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Reason"),t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Reporter"),t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Status"),t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Date"),t("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Actions")])],-1)),t("tbody",at,[x.value?(n(),i("tr",lt,[...e[12]||(e[12]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500"}," Loading... ",-1)])])):b.value.length?p("",!0):(n(),i("tr",nt,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500"}," No reports found ",-1)])])),(n(!0),i(G,null,q(b.value,s=>{var V,Y,j;return n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",it,[t("div",rt,[t("div",{class:O(["w-10 h-10 rounded flex items-center justify-center",s.reportable_type==="listing"?"bg-blue-100":"bg-purple-100"])},[s.reportable_type==="listing"?(n(),L(m(J),{key:0,class:"w-5 h-5 text-blue-600"})):(n(),L(m(K),{key:1,class:"w-5 h-5 text-purple-600"}))],2),t("div",null,[t("p",dt,l(s.reportable_type==="listing"?(V=s.reportable)==null?void 0:V.title:(Y=s.reportable)==null?void 0:Y.name),1),t("p",pt,l(s.reportable_type),1)])])]),t("td",ut,[t("span",ct,l(C(s.reason)),1)]),t("td",mt,l((j=s.reporter)==null?void 0:j.name),1),t("td",vt,[t("span",{class:O(["badge",I(s.status)])},l(s.status),3)]),t("td",gt,l(U(s.created_at)),1),t("td",yt,[t("div",xt,[t("button",{onClick:A=>E(s),class:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"View Details"},[g(m(Q),{class:"w-5 h-5"})],8,bt),s.status==="pending"?(n(),i("button",{key:0,onClick:A=>$(s),class:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Resolve"},[g(m(X),{class:"w-5 h-5"})],8,ft)):p("",!0),s.status==="pending"?(n(),i("button",{key:1,onClick:A=>S(s),class:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Dismiss"},[g(m(F),{class:"w-5 h-5"})],8,_t)):p("",!0)])])])}),128))])]),v.value>1?(n(),i("div",ht,[t("p",kt," Showing "+l((r.value-1)*f.value+1)+" to "+l(Math.min(r.value*f.value,_.value))+" of "+l(_.value)+" reports ",1),t("div",wt,[t("button",{onClick:e[3]||(e[3]=s=>D(r.value-1)),disabled:r.value===1,class:"btn-secondary btn-sm"}," Previous ",8,Rt),t("button",{onClick:e[4]||(e[4]=s=>D(r.value+1)),disabled:r.value===v.value,class:"btn-secondary btn-sm"}," Next ",8,Ct)])])):p("",!0)]),a.value?(n(),i("div",Dt,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[5]||(e[5]=s=>a.value=null)}),t("div",$t,[t("div",St,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"Report Details",-1)),t("button",{onClick:e[6]||(e[6]=s=>a.value=null),class:"p-1 hover:bg-gray-100 rounded"},[g(m(F),{class:"w-5 h-5"})])]),t("div",Mt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Reported Item",-1)),t("p",Pt,l(a.value.reportable_type==="listing"?(h=a.value.reportable)==null?void 0:h.title:(M=a.value.reportable)==null?void 0:M.name),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-500"},"Reason",-1)),t("span",Nt,l(C(a.value.reason)),1)]),a.value.description?(n(),i("div",Vt,[e[18]||(e[18]=t("p",{class:"text-sm text-gray-500"},"Description",-1)),t("p",Yt,l(a.value.description),1)])):p("",!0),t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-500"},"Reported By",-1)),t("p",jt,l((P=a.value.reporter)==null?void 0:P.name),1),t("p",At,l((N=a.value.reporter)==null?void 0:N.email),1)]),t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm text-gray-500"},"Reported At",-1)),t("p",null,l(z(a.value.created_at)),1)]),a.value.status!=="pending"?(n(),i("div",Bt,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-500"},"Resolution",-1)),t("p",Ft,l(a.value.status),1),a.value.admin_notes?(n(),i("p",Ot,l(a.value.admin_notes),1)):p("",!0)])):p("",!0)]),a.value.status==="pending"?(n(),i("div",Lt,[t("button",{onClick:e[7]||(e[7]=s=>{S(a.value),a.value=null}),class:"btn-secondary flex-1"}," Dismiss "),t("button",{onClick:e[8]||(e[8]=s=>{$(a.value),a.value=null}),class:"btn-primary flex-1"}," Take Action ")])):p("",!0)])])):p("",!0)])}}};export{Gt as default};
