import{c as d,o as r,a as e,_ as R,r as m,b as S,t as n,d as $,e as g,f as A,F as C,j as I,I as M,w as f,H as B,v as F,p as h,h as V,k as j,K as v}from"./main-Dzo1rjju.js";import{_ as N}from"./LoadingSpinner-Br-C2Ysa.js";import{r as O}from"./FlagIcon-ygPWOw_w.js";function ee(a,b){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}const T={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},U={class:"relative bg-white rounded-xl w-full max-w-md animate-slide-up"},z={class:"flex items-center justify-between p-4 border-b"},D={class:"text-lg font-semibold text-gray-900"},P={class:"p-4"},q={class:"text-sm text-gray-500 mb-4"},H={class:"space-y-2"},L=["value"],E={class:"font-medium text-gray-900"},K={class:"text-sm text-gray-500"},W={class:"mt-4"},Y={class:"flex gap-3 p-4 border-t bg-gray-50 rounded-b-xl"},Z=["disabled"],G={__name:"ReportModal",props:{type:{type:String,required:!0,validator:a=>["listing","user"].includes(a)},itemId:{type:[Number,String],required:!0}},emits:["close","submitted"],setup(a,{emit:b}){const u=a,c=b,i=m(""),p=m(""),l=m(!1),y=[{value:"spam",label:"Spam or scam",description:"Fake listing, misleading information, or phishing attempt"},{value:"prohibited",label:"Prohibited item",description:"Item that is not allowed to be sold on this platform"},{value:"duplicate",label:"Duplicate listing",description:"Same item posted multiple times"},{value:"wrong_category",label:"Wrong category",description:"Item is listed in the wrong category"},{value:"offensive",label:"Offensive content",description:"Contains inappropriate language or images"},{value:"other",label:"Other",description:"Another reason not listed above"}],_=[{value:"harassment",label:"Harassment",description:"Threatening or abusive behavior"},{value:"scam",label:"Scammer",description:"Attempting to defraud buyers or sellers"},{value:"fake_profile",label:"Fake profile",description:"Using fake identity or stolen photos"},{value:"spam",label:"Spam",description:"Sending unsolicited messages or ads"},{value:"other",label:"Other",description:"Another reason not listed above"}],x=S(()=>u.type==="listing"?y:_),k=async()=>{var o;if(i.value){l.value=!0;try{await j.post("/reports",{reportable_type:u.type,reportable_id:u.itemId,reason:i.value,description:p.value||null}),v.success("Report submitted. Thank you for helping keep our community safe."),c("submitted"),c("close")}catch(t){((o=t.response)==null?void 0:o.status)===409?(v.info("You have already reported this item"),c("close")):v.error("Failed to submit report")}finally{l.value=!1}}};return(o,t)=>(r(),d("div",T,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[0]||(t[0]=s=>o.$emit("close"))}),e("div",U,[e("div",z,[e("h3",D," Report "+n(a.type==="listing"?"Listing":"User"),1),e("button",{onClick:t[1]||(t[1]=s=>o.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[$(g(A),{class:"w-5 h-5 text-gray-500"})])]),e("div",P,[e("p",q," Please select a reason for reporting this "+n(a.type==="listing"?"listing":"user")+". Our team will review your report. ",1),e("div",H,[(r(!0),d(C,null,I(x.value,s=>(r(),d("label",{key:s.value,class:M(["flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition",i.value===s.value?"border-primary-500 bg-primary-50":""])},[f(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[2]||(t[2]=w=>i.value=w),class:"mt-0.5 text-primary-600"},null,8,L),[[B,i.value]]),e("div",null,[e("p",E,n(s.label),1),e("p",K,n(s.description),1)])],2))),128))]),e("div",W,[t[5]||(t[5]=e("label",{class:"label"},"Additional details (optional)",-1)),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),rows:"3",class:"input resize-none",placeholder:"Provide any additional information that might help us investigate..."},null,512),[[F,p.value]])])]),e("div",Y,[e("button",{onClick:t[4]||(t[4]=s=>o.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:k,disabled:!i.value||l.value,class:"btn-danger flex-1"},[l.value?(r(),h(N,{key:1,class:"w-5 h-5 mr-2"})):(r(),h(g(O),{key:0,class:"w-5 h-5 mr-2"})),V(" "+n(l.value?"Submitting...":"Submit Report"),1)],8,Z)])])]))}},te=R(G,[["__scopeId","data-v-1de2ecb5"]]);export{te as R,ee as r};
