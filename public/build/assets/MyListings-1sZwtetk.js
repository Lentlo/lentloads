import{u as V}from"./listings-DO-G3FtV.js";import{c as o,o as n,a as t,_ as A,d as z,g as a,j as r,t as i,p as L,r as f,M as H,E as I,e as O,m as R,f as $,w as b,U,W as j,F as C,h as M,i as m,O as h,S as W}from"./main-BFr8vjHw.js";import{r as Y}from"./ExclamationCircleIcon-nL7c3WpI.js";import{r as q}from"./CheckCircleIcon-DL25si4j.js";import{r as G}from"./ClockIcon-CYtN5YxQ.js";import{r as J}from"./EyeIcon-BLqgJjQr.js";import{r as K}from"./ChatBubbleLeftIcon-_jbOjebW.js";import{r as Q}from"./PencilIcon-pLoIEqwM.js";import{r as X}from"./CheckIcon-ZVM1iHYT.js";import{r as tt}from"./ArrowPathIcon-DQo5vSsS.js";import{r as st}from"./TrashIcon-Bay-Gnfy.js";function et(c,v){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function nt(c,v){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function at(c,v){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}const ot={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},lt={class:"relative bg-white w-full sm:max-w-sm sm:rounded-xl rounded-t-2xl p-6 animate-slide-up safe-area-bottom"},it={class:"text-center"},rt={key:0,class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},ct={key:1,class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},dt={key:2,class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},ut={class:"text-lg font-semibold text-gray-900 mb-2"},vt={class:"text-gray-500 text-sm"},mt={class:"flex gap-3 mt-6"},ft={__name:"ConfirmModal",props:{title:{type:String,default:"Confirm Action"},message:{type:String,default:"Are you sure you want to proceed?"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:null},type:{type:String,default:"info",validator:c=>["info","warning","danger"].includes(c)}},emits:["confirm","cancel"],setup(c){const v=c,w=z(()=>v.type==="danger"?"btn-danger":"btn-primary");return(g,d)=>(n(),o("div",ot,[t("div",{class:"absolute inset-0 bg-black/50",onClick:d[0]||(d[0]=p=>g.$emit("cancel"))}),t("div",lt,[t("div",it,[c.type==="danger"?(n(),o("div",rt,[a(r(et),{class:"w-6 h-6 text-red-600"})])):c.type==="warning"?(n(),o("div",ct,[a(r(Y),{class:"w-6 h-6 text-yellow-600"})])):(n(),o("div",dt,[a(r(nt),{class:"w-6 h-6 text-primary-600"})])),t("h3",ut,i(c.title),1),t("p",vt,i(c.message),1)]),t("div",mt,[t("button",{onClick:d[1]||(d[1]=p=>g.$emit("cancel")),class:"btn-secondary flex-1"},i(c.cancelText),1),t("button",{onClick:d[2]||(d[2]=p=>g.$emit("confirm")),class:L([c.confirmClass||w.value,"flex-1"])},i(c.confirmText),3)])])]))}},gt=A(ft,[["__scopeId","data-v-b1b2a972"]]),pt={class:"my-listings-page"},_t={class:"container-app py-6"},ht={class:"page-header"},wt={class:"stats-grid"},yt={class:"stat-card"},bt={class:"stat-icon bg-blue-100 text-blue-600"},kt={class:"stat-info"},xt={class:"stat-value"},$t={class:"stat-card"},Ct={class:"stat-icon bg-green-100 text-green-600"},Mt={class:"stat-info"},Lt={class:"stat-value"},St={class:"stat-card"},Tt={class:"stat-icon bg-yellow-100 text-yellow-600"},jt={class:"stat-info"},At={class:"stat-value"},Pt={class:"stat-card"},Bt={class:"stat-icon bg-purple-100 text-purple-600"},Nt={class:"stat-info"},Dt={class:"stat-value"},Ft={class:"filters-row"},Zt=["onClick"],Et={class:"count"},Vt={key:0,class:"listings-container"},zt={key:1,class:"listings-container"},Ht=["src","alt"],It={class:"listing-content"},Ot={class:"listing-price"},Rt={class:"listing-stats"},Ut={class:"listing-actions"},Wt=["onClick"],Yt=["onClick"],qt=["onClick"],Gt={key:2,class:"empty-state"},Jt={class:"empty-icon"},Kt={key:3,class:"pagination"},Qt=["onClick"],Xt={__name:"MyListings",setup(c){const v=V(),w=f(!0),g=f([]),d=f("all"),p=f(1),S=f(1),k=f(!1),T=f(null),u=f([{label:"All",value:"all",count:0},{label:"Active",value:"active",count:0},{label:"Pending",value:"pending",count:0},{label:"Sold",value:"sold",count:0},{label:"Expired",value:"expired",count:0}]),P=l=>({active:"status-active",pending:"status-pending",sold:"status-sold",expired:"status-expired",rejected:"status-rejected"})[l]||"status-default",B=l=>(l==null?void 0:l.replace(/\s*\(Negotiable\)/gi,"").trim())||"",_=async()=>{w.value=!0;try{const l={page:p.value};d.value!=="all"&&(l.status=d.value);const s=await v.fetchMyListings(l);g.value=s.data,S.value=s.meta.last_page,u.value[0].count=s.meta.total,s.counts&&(u.value[1].count=s.counts.active||0,u.value[2].count=s.counts.pending||0,u.value[3].count=s.counts.sold||0,u.value[4].count=s.counts.expired||0)}finally{w.value=!1}},N=async l=>{try{await v.markAsSold(l.id),h.success("Listing marked as sold!"),_()}catch{h.error("Failed to update listing")}},D=async l=>{try{await v.renewListing(l.id),h.success("Listing renewed for 30 days!"),_()}catch{h.error("Failed to renew listing")}},F=l=>{T.value=l,k.value=!0},Z=async()=>{try{await v.deleteListing(T.value.id),h.success("Listing deleted"),k.value=!1,_()}catch{h.error("Failed to delete listing")}},E=l=>{p.value=l,_()};return H(d,()=>{p.value=1,_()}),I(()=>{_()}),(l,s)=>{const y=O("router-link");return n(),o("div",pt,[t("div",_t,[t("div",ht,[s[2]||(s[2]=t("div",null,[t("h1",null,"My Listings"),t("p",null,"Manage your ads")],-1)),a(y,{to:"/sell",class:"post-btn"},{default:b(()=>[a(r(U),{class:"w-5 h-5"}),s[1]||(s[1]=t("span",null,"Post New Ad",-1))]),_:1})]),t("div",wt,[t("div",yt,[t("div",bt,[a(r(j),{class:"w-6 h-6"})]),t("div",kt,[t("span",xt,i(u.value[0].count),1),s[3]||(s[3]=t("span",{class:"stat-label"},"Total Listings",-1))])]),t("div",$t,[t("div",Ct,[a(r(q),{class:"w-6 h-6"})]),t("div",Mt,[t("span",Lt,i(u.value[1].count),1),s[4]||(s[4]=t("span",{class:"stat-label"},"Active",-1))])]),t("div",St,[t("div",Tt,[a(r(G),{class:"w-6 h-6"})]),t("div",jt,[t("span",At,i(u.value[2].count),1),s[5]||(s[5]=t("span",{class:"stat-label"},"Pending",-1))])]),t("div",Pt,[t("div",Bt,[a(r(at),{class:"w-6 h-6"})]),t("div",Nt,[t("span",Dt,i(u.value[3].count),1),s[6]||(s[6]=t("span",{class:"stat-label"},"Sold",-1))])])]),t("div",Ft,[(n(!0),o(C,null,M(u.value,e=>(n(),o("button",{key:e.value,onClick:x=>d.value=e.value,class:L(["filter-btn",{active:d.value===e.value}])},[m(i(e.label)+" ",1),t("span",Et,i(e.count),1)],10,Zt))),128))]),w.value?(n(),o("div",Vt,[(n(),o(C,null,M(3,e=>t("div",{key:e,class:"listing-card-skeleton"},[...s[7]||(s[7]=[t("div",{class:"skeleton h-40 rounded-lg"},null,-1),t("div",{class:"skeleton h-5 w-2/3 mt-3"},null,-1),t("div",{class:"skeleton h-4 w-1/3 mt-2"},null,-1)])])),64))])):g.value.length?(n(),o("div",zt,[(n(!0),o(C,null,M(g.value,e=>(n(),o("div",{key:e.id,class:"listing-card"},[a(y,{to:`/listing/${e.slug}`,class:"listing-image"},{default:b(()=>[t("img",{src:e.primary_image_url,alt:e.title},null,8,Ht),t("span",{class:L(["status-badge",P(e.status)])},i(e.status),3)]),_:2},1032,["to"]),t("div",It,[a(y,{to:`/listing/${e.slug}`,class:"listing-title"},{default:b(()=>[m(i(e.title),1)]),_:2},1032,["to"]),t("p",Ot,i(B(e.formatted_price)),1),t("div",Rt,[t("span",null,[a(r(J),{class:"w-4 h-4"}),m(" "+i(e.views_count),1)]),t("span",null,[a(r(W),{class:"w-4 h-4"}),m(" "+i(e.favorites_count),1)]),t("span",null,[a(r(K),{class:"w-4 h-4"}),m(" "+i(e.contacts_count||0),1)])]),t("div",Ut,[a(y,{to:`/listing/${e.id}/edit`,class:"action-btn edit"},{default:b(()=>[a(r(Q),{class:"w-4 h-4"}),s[8]||(s[8]=m(" Edit ",-1))]),_:1},8,["to"]),e.status==="active"?(n(),o("button",{key:0,onClick:x=>N(e),class:"action-btn sold"},[a(r(X),{class:"w-4 h-4"}),s[9]||(s[9]=m(" Mark Sold ",-1))],8,Wt)):$("",!0),e.status==="expired"||e.status==="sold"?(n(),o("button",{key:1,onClick:x=>D(e),class:"action-btn renew"},[a(r(tt),{class:"w-4 h-4"}),s[10]||(s[10]=m(" Renew ",-1))],8,Yt)):$("",!0),t("button",{onClick:x=>F(e),class:"action-btn delete"},[a(r(st),{class:"w-4 h-4"})],8,qt)])])]))),128))])):(n(),o("div",Gt,[t("div",Jt,[a(r(j),{class:"w-16 h-16"})]),s[12]||(s[12]=t("h3",null,"No listings yet",-1)),s[13]||(s[13]=t("p",null,"Start selling by posting your first ad",-1)),a(y,{to:"/sell",class:"btn-primary"},{default:b(()=>[...s[11]||(s[11]=[m(" Post Your First Ad ",-1)])]),_:1})])),S.value>1?(n(),o("div",Kt,[(n(!0),o(C,null,M(S.value,e=>(n(),o("button",{key:e,onClick:x=>E(e),class:L(["page-btn",{active:p.value===e}])},i(e),11,Qt))),128))])):$("",!0)]),k.value?(n(),R(gt,{key:0,title:"Delete Listing",message:"Are you sure you want to delete this listing? This action cannot be undone.",confirmText:"Delete",confirmClass:"btn-danger",onConfirm:Z,onCancel:s[0]||(s[0]=e=>k.value=!1)})):$("",!0)])}}},us=A(Xt,[["__scopeId","data-v-26b6f378"]]);export{us as default};
