import{c as a,o as e,a as t,u as J,b as O,r as u,d as B,L,D as I,e as K,m as D,f as v,E as S,g as n,j as d,w as Q,i as f,t as i,p as b,F as x,h as g,B as M}from"./main-CW87vYqH.js";import{d as T}from"./dayjs.min-iy57P9mS.js";import{_ as W}from"./ListingCard-DCghZkgD.js";import{R as X}from"./ReportModal-DhZCTmk1.js";import{r as Z}from"./UserIcon-D_AXdHZQ.js";import{r as $}from"./StarIcon-BsigvggO.js";import{r as tt}from"./FlagIcon-CTlMccb2.js";import{r as st}from"./MapPinIcon-CzspQzrd.js";import{r as et}from"./CheckBadgeIcon-BqONhXCJ.js";import{r as at}from"./ShoppingBagIcon-BV7Jrtdy.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./listings-CIS9NDY0.js";import"./relativeTime-D5nU98bY.js";import"./SparklesIcon-Coarl32o.js";import"./BoltIcon-DQHp0I1a.js";import"./ClockIcon-DrGVdGxp.js";import"./LoadingSpinner-B6P8M0d7.js";function lt(U,m){return e(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}const ot={class:"min-h-screen bg-gray-50 py-6"},rt={class:"container-app"},it={key:0,class:"max-w-4xl mx-auto"},nt={key:1,class:"max-w-md mx-auto text-center py-12"},dt={key:2,class:"max-w-4xl mx-auto"},ct={class:"card p-6 mb-6"},ut={class:"flex flex-col sm:flex-row items-start gap-4"},vt=["src","alt"],mt={class:"flex-1"},pt={class:"flex items-start justify-between"},xt={class:"text-2xl font-bold text-gray-900"},gt={class:"flex items-center gap-2 mt-1"},ft={class:"flex items-center text-yellow-500"},_t={class:"ml-1 font-medium"},yt={class:"text-gray-500"},ht={class:"flex gap-2"},wt={key:0,class:"text-gray-600 mt-3"},kt={class:"flex flex-wrap items-center gap-4 mt-4 text-sm text-gray-500"},bt={key:0,class:"flex items-center"},Mt={class:"flex items-center"},$t={key:1,class:"flex items-center text-green-600"},Rt={class:"flex gap-6 mt-4 pt-4 border-t"},Ct={class:"text-center"},Yt={class:"text-2xl font-bold text-gray-900"},jt={class:"text-center"},Nt={class:"text-2xl font-bold text-gray-900"},Vt={class:"text-center"},At={class:"text-2xl font-bold text-gray-900"},Bt={class:"flex gap-4 mb-6"},Lt={key:0},Dt={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},St={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Tt={key:2,class:"card p-12 text-center"},Ut={key:1},Et={key:0,class:"space-y-4"},Ft={key:1,class:"space-y-4"},Pt={class:"flex items-start gap-4"},qt=["src","alt"],zt={class:"flex-1"},Gt={class:"flex items-center justify-between"},Ht={class:"font-semibold text-gray-900"},Jt={class:"flex items-center gap-1 mt-1"},Ot={class:"text-sm text-gray-500"},It={key:0,class:"text-gray-600 mt-2"},Kt={key:2,class:"card p-12 text-center"},ms={__name:"UserProfile",setup(U){const m=J(),E=O(),_=u(!0),y=u(!0),h=u(!0),l=u(null),w=u([]),p=u([]),c=u("listings"),k=u(!1),F=B(()=>{var o,s;return((o=E.user)==null?void 0:o.id)===((s=l.value)==null?void 0:s.id)}),P=B(()=>{var o;return(o=l.value)!=null&&o.response_rate?Math.round(l.value.response_rate):0}),q=o=>T(o).format("MMMM YYYY"),z=o=>T(o).format("MMM D, YYYY"),R=async()=>{_.value=!0;try{const o=await M.get(`/users/${m.params.id}`);l.value=o.data.data}catch{l.value=null}finally{_.value=!1}},C=async()=>{y.value=!0;try{const o=await M.get(`/users/${m.params.id}/listings`);w.value=o.data.data}finally{y.value=!1}},G=async()=>{h.value=!0;try{const o=await M.get(`/users/${m.params.id}/reviews`);p.value=o.data.data}finally{h.value=!1}};return L(c,o=>{o==="reviews"&&!p.value.length&&G()}),L(()=>m.params.id,()=>{m.params.id&&(R(),C(),p.value=[],c.value="listings")}),I(()=>{R(),C()}),(o,s)=>{var Y;const H=K("router-link");return e(),a("div",ot,[t("div",rt,[_.value?(e(),a("div",it,[...s[4]||(s[4]=[S('<div class="card p-6 mb-6"><div class="flex items-start gap-4"><div class="skeleton w-24 h-24 rounded-full"></div><div class="flex-1"><div class="skeleton h-6 w-1/3 mb-2"></div><div class="skeleton h-4 w-1/4 mb-4"></div><div class="skeleton h-4 w-2/3"></div></div></div></div>',1)])])):l.value?(e(),a("div",dt,[t("div",ct,[t("div",ut,[t("img",{src:l.value.avatar_url,alt:l.value.name,class:"w-24 h-24 rounded-full object-cover"},null,8,vt),t("div",mt,[t("div",pt,[t("div",null,[t("h1",xt,i(l.value.name),1),t("div",gt,[t("div",ft,[n(d($),{class:"w-5 h-5 fill-current"}),t("span",_t,i(l.value.rating||"0.0"),1)]),s[8]||(s[8]=t("span",{class:"text-gray-400"},"â€¢",-1)),t("span",yt,i(l.value.reviews_count||0)+" reviews",1)])]),t("div",ht,[F.value?v("",!0):(e(),a("button",{key:0,onClick:s[0]||(s[0]=r=>k.value=!0),class:"p-2 text-gray-500 hover:bg-gray-100 rounded",title:"Report user"},[n(d(tt),{class:"w-5 h-5"})]))])]),l.value.bio?(e(),a("p",wt,i(l.value.bio),1)):v("",!0),t("div",kt,[l.value.city?(e(),a("div",bt,[n(d(st),{class:"w-4 h-4 mr-1"}),f(" "+i(l.value.city)+i(l.value.state?`, ${l.value.state}`:""),1)])):v("",!0),t("div",Mt,[n(d(lt),{class:"w-4 h-4 mr-1"}),f(" Member since "+i(q(l.value.created_at)),1)]),l.value.is_verified?(e(),a("div",$t,[n(d(et),{class:"w-4 h-4 mr-1"}),s[9]||(s[9]=f(" Verified ",-1))])):v("",!0)]),t("div",Rt,[t("div",Ct,[t("p",Yt,i(l.value.listings_count||0),1),s[10]||(s[10]=t("p",{class:"text-sm text-gray-500"},"Listings",-1))]),t("div",jt,[t("p",Nt,i(l.value.sold_count||0),1),s[11]||(s[11]=t("p",{class:"text-sm text-gray-500"},"Sold",-1))]),t("div",Vt,[t("p",At,i(P.value)+"%",1),s[12]||(s[12]=t("p",{class:"text-sm text-gray-500"},"Response Rate",-1))])])])])]),t("div",Bt,[t("button",{onClick:s[1]||(s[1]=r=>c.value="listings"),class:b(["px-4 py-2 rounded-lg font-medium",c.value==="listings"?"bg-primary-600 text-white":"bg-white text-gray-600"])}," Listings ",2),t("button",{onClick:s[2]||(s[2]=r=>c.value="reviews"),class:b(["px-4 py-2 rounded-lg font-medium",c.value==="reviews"?"bg-primary-600 text-white":"bg-white text-gray-600"])}," Reviews ",2)]),c.value==="listings"?(e(),a("div",Lt,[y.value?(e(),a("div",Dt,[(e(),a(x,null,g(6,r=>t("div",{key:r,class:"card p-4"},[...s[13]||(s[13]=[t("div",{class:"skeleton aspect-square rounded-lg mb-2"},null,-1),t("div",{class:"skeleton h-4 w-3/4 mb-1"},null,-1),t("div",{class:"skeleton h-4 w-1/2"},null,-1)])])),64))])):w.value.length?(e(),a("div",St,[(e(!0),a(x,null,g(w.value,r=>(e(),D(W,{key:r.id,listing:r},null,8,["listing"]))),128))])):(e(),a("div",Tt,[n(d(at),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s[14]||(s[14]=t("p",{class:"text-gray-500"},"No listings yet",-1))]))])):v("",!0),c.value==="reviews"?(e(),a("div",Ut,[h.value?(e(),a("div",Et,[(e(),a(x,null,g(3,r=>t("div",{key:r,class:"card p-4"},[...s[15]||(s[15]=[S('<div class="flex gap-4"><div class="skeleton w-10 h-10 rounded-full"></div><div class="flex-1"><div class="skeleton h-4 w-1/4 mb-2"></div><div class="skeleton h-3 w-full"></div></div></div>',1)])])),64))])):p.value.length?(e(),a("div",Ft,[(e(!0),a(x,null,g(p.value,r=>{var j,N,V;return e(),a("div",{key:r.id,class:"card p-4"},[t("div",Pt,[t("img",{src:(j=r.reviewer)==null?void 0:j.avatar_url,alt:(N=r.reviewer)==null?void 0:N.name,class:"w-10 h-10 rounded-full object-cover"},null,8,qt),t("div",zt,[t("div",Gt,[t("div",null,[t("p",Ht,i((V=r.reviewer)==null?void 0:V.name),1),t("div",Jt,[(e(),a(x,null,g(5,A=>n(d($),{key:A,class:b(["w-4 h-4",A<=r.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))])]),t("span",Ot,i(z(r.created_at)),1)]),r.comment?(e(),a("p",It,i(r.comment),1)):v("",!0)])])])}),128))])):(e(),a("div",Kt,[n(d($),{class:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s[16]||(s[16]=t("p",{class:"text-gray-500"},"No reviews yet",-1))]))])):v("",!0)])):(e(),a("div",nt,[n(d(Z),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s[6]||(s[6]=t("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"User not found",-1)),s[7]||(s[7]=t("p",{class:"text-gray-500 mb-4"},"This user doesn't exist or has been removed.",-1)),n(H,{to:"/",class:"btn-primary"},{default:Q(()=>[...s[5]||(s[5]=[f("Go Home",-1)])]),_:1})]))]),k.value?(e(),D(X,{key:0,type:"user","item-id":(Y=l.value)==null?void 0:Y.id,onClose:s[3]||(s[3]=r=>k.value=!1)},null,8,["item-id"])):v("",!0)])}}};export{ms as default};
