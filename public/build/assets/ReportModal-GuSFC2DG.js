import{_ as k,r as m,d as w,c as o,o as r,a as e,t as d,g as R,j as S,l as C,F as A,h as V,p as $,y as b,O as z,A as B,i as F,B as I,N as v}from"./main-CS8gAOSV.js";const M={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},N={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-2xl flex flex-col animate-slide-up",style:{"max-height":"calc(100dvh - 60px)"}},j={class:"flex items-center justify-between p-4 border-b flex-shrink-0"},O={class:"text-lg font-semibold text-gray-900"},U={class:"flex-1 overflow-y-auto p-4 min-h-0"},D={class:"text-sm text-gray-500 mb-4"},L={class:"space-y-2"},T=["value"],q={class:"flex-1"},H={class:"font-medium text-gray-900 text-sm"},P={class:"text-xs text-gray-500"},E={class:"mt-4"},W={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl flex-shrink-0 safe-area-bottom"},Y=["disabled"],G={key:0,class:"flex items-center justify-center gap-2"},J={key:1},K={__name:"ReportModal",props:{type:{type:String,required:!0,validator:i=>["listing","user"].includes(i)},itemId:{type:[Number,String],required:!0}},emits:["close","submitted"],setup(i,{emit:g}){const c=i,u=g,a=m(""),p=m(""),n=m(!1),f=[{value:"spam",label:"Spam or scam",description:"Fake listing or misleading information"},{value:"prohibited",label:"Prohibited item",description:"Item not allowed on platform"},{value:"duplicate",label:"Duplicate listing",description:"Same item posted multiple times"},{value:"wrong_category",label:"Wrong category",description:"Listed in wrong category"},{value:"offensive",label:"Offensive content",description:"Inappropriate language or images"},{value:"other",label:"Other",description:"Another reason"}],y=[{value:"harassment",label:"Harassment",description:"Threatening or abusive behavior"},{value:"scam",label:"Scammer",description:"Attempting to defraud users"},{value:"fake_profile",label:"Fake profile",description:"Using fake identity"},{value:"spam",label:"Spam",description:"Sending unsolicited messages"},{value:"other",label:"Other",description:"Another reason"}],x=w(()=>c.type==="listing"?f:y),h=async()=>{var l;if(a.value){n.value=!0;try{await I.post("/reports",{reportable_type:c.type,reportable_id:c.itemId,reason:a.value,description:p.value||null}),v.success("Report submitted successfully"),u("submitted"),u("close")}catch(t){((l=t.response)==null?void 0:l.status)===409?(v.info("You have already reported this"),u("close")):v.error("Failed to submit report")}finally{n.value=!1}}};return(l,t)=>(r(),o("div",M,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[0]||(t[0]=s=>l.$emit("close"))}),e("div",N,[e("div",j,[e("h3",O," Report "+d(i.type==="listing"?"Listing":"User"),1),e("button",{onClick:t[1]||(t[1]=s=>l.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-full"},[R(S(C),{class:"w-5 h-5 text-gray-500"})])]),e("div",U,[e("p",D," Please select a reason for reporting this "+d(i.type==="listing"?"listing":"user")+". ",1),e("div",L,[(r(!0),o(A,null,V(x.value,s=>(r(),o("label",{key:s.value,class:$(["flex items-start gap-3 p-3 border rounded-xl cursor-pointer hover:bg-gray-50 transition",a.value===s.value?"border-primary-500 bg-primary-50":""])},[b(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[2]||(t[2]=_=>a.value=_),class:"mt-1 text-primary-600"},null,8,T),[[z,a.value]]),e("div",q,[e("p",H,d(s.label),1),e("p",P,d(s.description),1)])],2))),128))]),e("div",E,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Additional details (optional)",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),rows:"2",class:"input resize-none text-sm",placeholder:"Any extra information..."},null,512),[[B,p.value]])])]),e("div",W,[e("button",{onClick:t[4]||(t[4]=s=>l.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:h,disabled:!a.value||n.value,class:"btn-danger flex-1"},[n.value?(r(),o("span",G,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" Submitting... ",-1)])])):(r(),o("span",J,"Submit Report"))],8,Y)])])]))}},X=k(K,[["__scopeId","data-v-c6884003"]]);export{X as R};
