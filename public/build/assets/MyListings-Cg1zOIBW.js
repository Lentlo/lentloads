import{u as F}from"./listings-DWqJCQ2m.js";import{c as a,o as n,a as t,_ as V,d as E,g as r,j as d,t as i,p as L,r as g,L as Z,D as z,e as H,m as I,f as k,w,i as u,T as Q,F as $,h as C,U as R,P as x,E as U,Q as Y}from"./main-OYBDBnCW.js";import{r as q}from"./ExclamationCircleIcon-AapwfdR2.js";import{r as G}from"./EyeIcon-Dpzwz3s5.js";import{r as J}from"./ChatBubbleLeftIcon-Dzgbfjyx.js";import{r as K,a as O}from"./TrashIcon-C2Zy7jh7.js";import{r as W}from"./CheckIcon-Dp8WG3Zp.js";import{r as X}from"./ArrowPathIcon-BAv2yAwi.js";function ee(o,m){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function te(o,m){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}const se={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ne={class:"relative bg-white rounded-xl p-6 w-full max-w-md animate-scale-in"},ae={class:"text-center"},re={key:0,class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},le={key:1,class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},oe={key:2,class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},ie={class:"text-lg font-semibold text-gray-900 mb-2"},ce={class:"text-gray-500"},de={class:"flex gap-3 mt-6"},ue={__name:"ConfirmModal",props:{title:{type:String,default:"Confirm Action"},message:{type:String,default:"Are you sure you want to proceed?"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:null},type:{type:String,default:"info",validator:o=>["info","warning","danger"].includes(o)}},emits:["confirm","cancel"],setup(o){const m=o,p=E(()=>m.type==="danger"?"btn-danger":(m.type==="warning","btn-primary"));return(v,c)=>(n(),a("div",se,[t("div",{class:"absolute inset-0 bg-black/50",onClick:c[0]||(c[0]=f=>v.$emit("cancel"))}),t("div",ne,[t("div",ae,[o.type==="danger"?(n(),a("div",re,[r(d(ee),{class:"w-6 h-6 text-red-600"})])):o.type==="warning"?(n(),a("div",le,[r(d(q),{class:"w-6 h-6 text-yellow-600"})])):(n(),a("div",oe,[r(d(te),{class:"w-6 h-6 text-primary-600"})])),t("h3",ie,i(o.title),1),t("p",ce,i(o.message),1)]),t("div",de,[t("button",{onClick:c[1]||(c[1]=f=>v.$emit("cancel")),class:"btn-secondary flex-1"},i(o.cancelText),1),t("button",{onClick:c[2]||(c[2]=f=>v.$emit("confirm")),class:L([o.confirmClass||p.value,"flex-1"])},i(o.confirmText),3)])])]))}},me=V(ue,[["__scopeId","data-v-4a58e1fe"]]),ge={class:"min-h-screen bg-gray-50 py-6"},ve={class:"container-app"},fe={class:"flex items-center justify-between mb-6"},ye={class:"card p-4 mb-6"},xe={class:"flex flex-wrap gap-4"},pe=["onClick"],be={class:"ml-1 text-sm"},we={key:0,class:"space-y-4"},he={key:1,class:"space-y-4"},_e=["src","alt"],ke={class:"flex-1"},$e={class:"flex items-start justify-between"},Ce={class:"text-lg font-bold text-primary-600 mt-1"},Le={class:"flex items-center gap-4 mt-2 text-sm text-gray-500"},Se={class:"flex items-center"},Me={class:"flex items-center"},je={class:"flex items-center"},Te={class:"flex items-center gap-2 mt-4"},Ae=["onClick"],De=["onClick"],Ne=["onClick"],Pe={key:2,class:"card p-12 text-center"},Be={key:3,class:"mt-6 flex justify-center gap-2"},Fe=["onClick"],Ue={__name:"MyListings",setup(o){const m=F(),p=g(!0),v=g([]),c=g("all"),f=g(1),S=g(1),h=g(!1),M=g(null),j=g([{label:"All",value:"all",count:0},{label:"Active",value:"active",count:0},{label:"Pending",value:"pending",count:0},{label:"Sold",value:"sold",count:0},{label:"Expired",value:"expired",count:0}]),T=l=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",sold:"bg-blue-100 text-blue-800",expired:"bg-gray-100 text-gray-800",rejected:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",y=async()=>{p.value=!0;try{const l={page:f.value};c.value!=="all"&&(l.status=c.value);const s=await m.fetchMyListings(l);v.value=s.data,S.value=s.meta.last_page,j.value[0].count=s.meta.total}finally{p.value=!1}},A=async l=>{try{await m.markAsSold(l.id),x.success("Listing marked as sold!"),y()}catch{x.error("Failed to update listing")}},D=async l=>{try{await m.renewListing(l.id),x.success("Listing renewed for 30 days!"),y()}catch{x.error("Failed to renew listing")}},N=l=>{M.value=l,h.value=!0},P=async()=>{try{await m.deleteListing(M.value.id),x.success("Listing deleted"),h.value=!1,y()}catch{x.error("Failed to delete listing")}},B=l=>{f.value=l,y()};return Z(c,()=>{f.value=1,y()}),z(()=>{y()}),(l,s)=>{const b=H("router-link");return n(),a("div",ge,[t("div",ve,[t("div",fe,[s[2]||(s[2]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"My Listings"),t("p",{class:"text-gray-500"},"Manage your ads")],-1)),r(b,{to:"/sell",class:"btn-primary"},{default:w(()=>[r(d(Q),{class:"w-5 h-5 mr-2"}),s[1]||(s[1]=u(" Post New Ad ",-1))]),_:1})]),t("div",ye,[t("div",xe,[(n(!0),a($,null,C(j.value,e=>(n(),a("button",{key:e.value,onClick:_=>c.value=e.value,class:L(["px-4 py-2 rounded-lg font-medium transition",c.value===e.value?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[u(i(e.label)+" ",1),t("span",be,"("+i(e.count)+")",1)],10,pe))),128))])]),p.value?(n(),a("div",we,[(n(),a($,null,C(3,e=>t("div",{key:e,class:"card p-4 flex gap-4"},[...s[3]||(s[3]=[U('<div class="skeleton w-32 h-24 rounded"></div><div class="flex-1"><div class="skeleton h-5 w-1/3 mb-2"></div><div class="skeleton h-4 w-1/4 mb-2"></div><div class="skeleton h-4 w-20"></div></div>',2)])])),64))])):v.value.length?(n(),a("div",he,[(n(!0),a($,null,C(v.value,e=>(n(),a("div",{key:e.id,class:"card p-4 flex flex-col sm:flex-row gap-4"},[r(b,{to:`/listing/${e.slug}`,class:"sm:w-40 flex-shrink-0"},{default:w(()=>[t("img",{src:e.primary_image_url,alt:e.title,class:"w-full h-32 object-cover rounded-lg"},null,8,_e)]),_:2},1032,["to"]),t("div",ke,[t("div",$e,[t("div",null,[r(b,{to:`/listing/${e.slug}`,class:"font-semibold text-gray-900 hover:text-primary-600"},{default:w(()=>[u(i(e.title),1)]),_:2},1032,["to"]),t("p",Ce,i(e.formatted_price),1)]),t("span",{class:L(["badge",T(e.status)])},i(e.status),3)]),t("div",Le,[t("span",Se,[r(d(G),{class:"w-4 h-4 mr-1"}),u(" "+i(e.views_count)+" views ",1)]),t("span",Me,[r(d(Y),{class:"w-4 h-4 mr-1"}),u(" "+i(e.favorites_count)+" favorites ",1)]),t("span",je,[r(d(J),{class:"w-4 h-4 mr-1"}),u(" "+i(e.contacts_count)+" contacts ",1)])]),t("div",Te,[r(b,{to:`/listing/${e.id}/edit`,class:"btn-secondary btn-sm"},{default:w(()=>[r(d(K),{class:"w-4 h-4 mr-1"}),s[4]||(s[4]=u(" Edit ",-1))]),_:1},8,["to"]),e.status==="active"?(n(),a("button",{key:0,onClick:_=>A(e),class:"btn-sm bg-green-100 text-green-700 hover:bg-green-200"},[r(d(W),{class:"w-4 h-4 mr-1"}),s[5]||(s[5]=u(" Mark as Sold ",-1))],8,Ae)):k("",!0),e.status==="expired"||e.status==="sold"?(n(),a("button",{key:1,onClick:_=>D(e),class:"btn-sm bg-blue-100 text-blue-700 hover:bg-blue-200"},[r(d(X),{class:"w-4 h-4 mr-1"}),s[6]||(s[6]=u(" Renew ",-1))],8,De)):k("",!0),t("button",{onClick:_=>N(e),class:"btn-sm bg-red-100 text-red-700 hover:bg-red-200"},[r(d(O),{class:"w-4 h-4 mr-1"}),s[7]||(s[7]=u(" Delete ",-1))],8,Ne)])])]))),128))])):(n(),a("div",Pe,[r(d(R),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s[9]||(s[9]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No listings yet",-1)),s[10]||(s[10]=t("p",{class:"text-gray-500 mb-4"},"Start selling by posting your first ad",-1)),r(b,{to:"/sell",class:"btn-primary"},{default:w(()=>[...s[8]||(s[8]=[u(" Post Your First Ad ",-1)])]),_:1})])),S.value>1?(n(),a("div",Be,[(n(!0),a($,null,C(S.value,e=>(n(),a("button",{key:e,onClick:_=>B(e),class:L(["w-10 h-10 rounded-lg",f.value===e?"bg-primary-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"])},i(e),11,Fe))),128))])):k("",!0)]),h.value?(n(),I(me,{key:0,title:"Delete Listing",message:"Are you sure you want to delete this listing? This action cannot be undone.",confirmText:"Delete",confirmClass:"btn-danger",onConfirm:P,onCancel:s[0]||(s[0]=e=>h.value=!1)})):k("",!0)])}}};export{Ue as default};
