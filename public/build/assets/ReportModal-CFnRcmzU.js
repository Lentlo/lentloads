import{_ as R,r as c,d as S,c as m,o as r,a as e,t as n,g as $,j as b,l as C,F as A,h as B,p as F,y as g,N as I,A as N,m as y,i as V,B as M,P as v}from"./main-DmsOSjqV.js";import{_ as O}from"./LoadingSpinner-BB_1sRCd.js";import{r as P}from"./FlagIcon-Ucvh11LI.js";const T={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},U={class:"relative bg-white rounded-xl w-full max-w-md animate-slide-up"},j={class:"flex items-center justify-between p-4 border-b"},z={class:"text-lg font-semibold text-gray-900"},D={class:"p-4"},q={class:"text-sm text-gray-500 mb-4"},L={class:"space-y-2"},E=["value"],H={class:"font-medium text-gray-900"},W={class:"text-sm text-gray-500"},Y={class:"mt-4"},G={class:"flex gap-3 p-4 border-t bg-gray-50 rounded-b-xl"},J=["disabled"],K={__name:"ReportModal",props:{type:{type:String,required:!0,validator:o=>["listing","user"].includes(o)},itemId:{type:[Number,String],required:!0}},emits:["close","submitted"],setup(o,{emit:f}){const d=o,u=f,a=c(""),p=c(""),l=c(!1),h=[{value:"spam",label:"Spam or scam",description:"Fake listing, misleading information, or phishing attempt"},{value:"prohibited",label:"Prohibited item",description:"Item that is not allowed to be sold on this platform"},{value:"duplicate",label:"Duplicate listing",description:"Same item posted multiple times"},{value:"wrong_category",label:"Wrong category",description:"Item is listed in the wrong category"},{value:"offensive",label:"Offensive content",description:"Contains inappropriate language or images"},{value:"other",label:"Other",description:"Another reason not listed above"}],_=[{value:"harassment",label:"Harassment",description:"Threatening or abusive behavior"},{value:"scam",label:"Scammer",description:"Attempting to defraud buyers or sellers"},{value:"fake_profile",label:"Fake profile",description:"Using fake identity or stolen photos"},{value:"spam",label:"Spam",description:"Sending unsolicited messages or ads"},{value:"other",label:"Other",description:"Another reason not listed above"}],x=S(()=>d.type==="listing"?h:_),k=async()=>{var i;if(a.value){l.value=!0;try{await M.post("/reports",{reportable_type:d.type,reportable_id:d.itemId,reason:a.value,description:p.value||null}),v.success("Report submitted. Thank you for helping keep our community safe."),u("submitted"),u("close")}catch(t){((i=t.response)==null?void 0:i.status)===409?(v.info("You have already reported this item"),u("close")):v.error("Failed to submit report")}finally{l.value=!1}}};return(i,t)=>(r(),m("div",T,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[0]||(t[0]=s=>i.$emit("close"))}),e("div",U,[e("div",j,[e("h3",z," Report "+n(o.type==="listing"?"Listing":"User"),1),e("button",{onClick:t[1]||(t[1]=s=>i.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[$(b(C),{class:"w-5 h-5 text-gray-500"})])]),e("div",D,[e("p",q," Please select a reason for reporting this "+n(o.type==="listing"?"listing":"user")+". Our team will review your report. ",1),e("div",L,[(r(!0),m(A,null,B(x.value,s=>(r(),m("label",{key:s.value,class:F(["flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition",a.value===s.value?"border-primary-500 bg-primary-50":""])},[g(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":t[2]||(t[2]=w=>a.value=w),class:"mt-0.5 text-primary-600"},null,8,E),[[I,a.value]]),e("div",null,[e("p",H,n(s.label),1),e("p",W,n(s.description),1)])],2))),128))]),e("div",Y,[t[5]||(t[5]=e("label",{class:"label"},"Additional details (optional)",-1)),g(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),rows:"3",class:"input resize-none",placeholder:"Provide any additional information that might help us investigate..."},null,512),[[N,p.value]])])]),e("div",G,[e("button",{onClick:t[4]||(t[4]=s=>i.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:k,disabled:!a.value||l.value,class:"btn-danger flex-1"},[l.value?(r(),y(O,{key:1,class:"w-5 h-5 mr-2"})):(r(),y(b(P),{key:0,class:"w-5 h-5 mr-2"})),V(" "+n(l.value?"Submitting...":"Submit Report"),1)],8,J)])])]))}},ee=R(K,[["__scopeId","data-v-1de2ecb5"]]);export{ee as R};
