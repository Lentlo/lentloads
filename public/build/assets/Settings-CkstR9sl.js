import{r as c,y as G,o as O,d,e as u,f as e,h as g,F as V,m as $,w as o,v as p,A as j,t as v,N as k,H as _,i as w,p as E,j as S,P as L,q as m,G as B,I as b}from"./main-CJNCjlVx.js";import{r as J}from"./PencilIcon-BzY1QJ9O.js";import{r as K}from"./TrashIcon-xsdtNTOn.js";const Q={class:"p-6"},W={class:"flex gap-4 mb-6 border-b"},X=["onClick"],Y={key:0,class:"card p-6"},Z={class:"grid grid-cols-2 gap-4"},h=["disabled"],ee={key:1,class:"card p-6"},te={class:"flex items-center justify-between"},le={class:"relative inline-flex items-center cursor-pointer"},se=["disabled"],ne={key:2,class:"space-y-6"},ae={class:"flex items-center justify-between"},ie={class:"card overflow-hidden"},oe={class:"w-full"},re={class:"divide-y"},de={class:"px-4 py-3 font-medium text-gray-900"},ue={class:"px-4 py-3 text-gray-600"},pe={class:"px-4 py-3"},ve={class:"px-4 py-3"},me={class:"flex items-center gap-2"},be=["onClick"],ge=["onClick"],ce={key:3,class:"space-y-6"},ye={class:"flex items-center justify-between"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe=["src","alt"],ke={class:"p-4"},we={class:"flex items-center justify-between mb-2"},Se={class:"font-semibold"},Ce={key:0,class:"text-sm text-gray-500 truncate"},Ue={class:"flex gap-2 mt-4"},Ve=["onClick"],$e=["onClick"],_e={key:4,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Be={class:"relative bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Pe={class:"text-lg font-semibold mb-4"},De={class:"flex items-center gap-2"},Fe={class:"flex gap-2"},Ae=["disabled"],Me={key:5,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},je={class:"relative bg-white rounded-xl p-6 w-full max-w-md"},Ee={class:"text-lg font-semibold mb-4"},Le=["src"],Ne={class:"flex items-center gap-2"},Ie={class:"flex gap-2"},Te=["disabled"],Ge={__name:"Settings",setup(qe){const N=[{id:"general",label:"General"},{id:"listings",label:"Listings"},{id:"pages",label:"Pages"},{id:"banners",label:"Banners"}],y=c("general"),r=c(!1),n=G({}),P=c([]),D=c([]),i=c(null),a=c(null),f=c(null),I=async()=>{try{const s=await m.get("/admin/settings");Object.assign(n,s.data.data)}catch{console.error("Failed to fetch settings")}},F=async s=>{r.value=!0;try{await m.put("/admin/settings",n),b.success("Settings saved")}catch{b.error("Failed to save settings")}finally{r.value=!1}},C=async()=>{try{const s=await m.get("/admin/pages");P.value=s.data.data}catch{console.error("Failed to fetch pages")}},A=s=>{i.value=s?{...s}:{title:"",slug:"",content:"",is_active:!0}},T=async()=>{r.value=!0;try{i.value.id?await m.put(`/admin/pages/${i.value.id}`,i.value):await m.post("/admin/pages",i.value),b.success("Page saved"),i.value=null,C()}catch{b.error("Failed to save page")}finally{r.value=!1}},q=async s=>{if(confirm(`Delete "${s.title}"?`))try{await m.delete(`/admin/pages/${s.id}`),b.success("Page deleted"),C()}catch{b.error("Failed to delete page")}},U=async()=>{try{const s=await m.get("/admin/banners");D.value=s.data.data}catch{console.error("Failed to fetch banners")}},M=s=>{a.value=s?{...s}:{title:"",link:"",position:0,is_active:!0},f.value=null},R=s=>{f.value=s.target.files[0]},H=async()=>{r.value=!0;try{const s=new FormData;s.append("title",a.value.title),s.append("link",a.value.link||""),s.append("position",a.value.position),s.append("is_active",a.value.is_active?1:0),f.value&&s.append("image",f.value),a.value.id?(s.append("_method","PUT"),await m.post(`/admin/banners/${a.value.id}`,s)):await m.post("/admin/banners",s),b.success("Banner saved"),a.value=null,U()}catch{b.error("Failed to save banner")}finally{r.value=!1}},z=async s=>{if(confirm(`Delete "${s.title}"?`))try{await m.delete(`/admin/banners/${s.id}`),b.success("Banner deleted"),U()}catch{b.error("Failed to delete banner")}};return O(()=>{I(),C(),U()}),(s,t)=>(u(),d("div",Q,[t[57]||(t[57]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Settings",-1)),e("div",W,[(u(),d(V,null,$(N,l=>e("button",{key:l.id,onClick:x=>y.value=l.id,class:B(["px-4 py-2 font-medium border-b-2 -mb-px transition",y.value===l.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"])},v(l.label),11,X)),64))]),y.value==="general"?(u(),d("div",Y,[t[34]||(t[34]=e("h2",{class:"text-lg font-semibold mb-4"},"General Settings",-1)),e("form",{onSubmit:t[6]||(t[6]=k(l=>F(),["prevent"])),class:"space-y-4"},[e("div",null,[t[26]||(t[26]=e("label",{class:"label"},"Site Name",-1)),o(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.site_name=l),type:"text",class:"input"},null,512),[[p,n.site_name]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"label"},"Site Description",-1)),o(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>n.site_description=l),rows:"2",class:"input"},null,512),[[p,n.site_description]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"label"},"Contact Email",-1)),o(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.contact_email=l),type:"email",class:"input"},null,512),[[p,n.contact_email]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"label"},"Contact Phone",-1)),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>n.contact_phone=l),type:"tel",class:"input"},null,512),[[p,n.contact_phone]])]),e("div",Z,[e("div",null,[t[31]||(t[31]=e("label",{class:"label"},"Default Currency",-1)),o(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>n.currency=l),class:"input"},[...t[30]||(t[30]=[e("option",{value:"INR"},"INR (₹)",-1),e("option",{value:"USD"},"USD ($)",-1),e("option",{value:"EUR"},"EUR (€)",-1)])],512),[[j,n.currency]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"label"},"Default Language",-1)),o(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>n.language=l),class:"input"},[...t[32]||(t[32]=[e("option",{value:"en"},"English",-1),e("option",{value:"hi"},"Hindi",-1)])],512),[[j,n.language]])])]),e("button",{type:"submit",disabled:r.value,class:"btn-primary"},v(r.value?"Saving...":"Save Settings"),9,h)],32)])):g("",!0),y.value==="listings"?(u(),d("div",ee,[t[41]||(t[41]=e("h2",{class:"text-lg font-semibold mb-4"},"Listing Settings",-1)),e("form",{onSubmit:t[11]||(t[11]=k(l=>F(),["prevent"])),class:"space-y-4"},[e("div",te,[t[36]||(t[36]=e("div",null,[e("p",{class:"font-medium"},"Require Approval"),e("p",{class:"text-sm text-gray-500"},"New listings need admin approval")],-1)),e("label",le,[o(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>n.require_approval=l),type:"checkbox",class:"sr-only peer"},null,512),[[_,n.require_approval]]),t[35]||(t[35]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-primary-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"},null,-1))])]),e("div",null,[t[37]||(t[37]=e("label",{class:"label"},"Max Images per Listing",-1)),o(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>n.max_images=l),type:"number",min:"1",max:"20",class:"input w-32"},null,512),[[p,n.max_images,void 0,{number:!0}]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"label"},"Listing Expiry (days)",-1)),o(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>n.listing_expiry_days=l),type:"number",min:"7",max:"365",class:"input w-32"},null,512),[[p,n.listing_expiry_days,void 0,{number:!0}]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"label"},"Max Free Listings per User",-1)),o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>n.max_free_listings=l),type:"number",min:"0",class:"input w-32"},null,512),[[p,n.max_free_listings,void 0,{number:!0}]]),t[40]||(t[40]=e("p",{class:"text-sm text-gray-500 mt-1"},"Set 0 for unlimited",-1))]),e("button",{type:"submit",disabled:r.value,class:"btn-primary"},v(r.value?"Saving...":"Save Settings"),9,se)],32)])):g("",!0),y.value==="pages"?(u(),d("div",ne,[e("div",ae,[t[43]||(t[43]=e("h2",{class:"text-lg font-semibold"},"Static Pages",-1)),e("button",{onClick:t[12]||(t[12]=l=>A(null)),class:"btn-primary"},[w(S(L),{class:"w-5 h-5 mr-2"}),t[42]||(t[42]=E(" Add Page ",-1))])]),e("div",ie,[e("table",oe,[t[44]||(t[44]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Title"),e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Slug"),e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Status"),e("th",{class:"px-4 py-3 text-left text-sm font-semibold text-gray-900"},"Actions")])],-1)),e("tbody",re,[(u(!0),d(V,null,$(P.value,l=>(u(),d("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",de,v(l.title),1),e("td",ue,"/page/"+v(l.slug),1),e("td",pe,[e("span",{class:B(["badge",l.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},v(l.is_active?"Active":"Draft"),3)]),e("td",ve,[e("div",me,[e("button",{onClick:x=>A(l),class:"p-1 text-blue-600 hover:bg-blue-50 rounded"},[w(S(J),{class:"w-5 h-5"})],8,be),e("button",{onClick:x=>q(l),class:"p-1 text-red-600 hover:bg-red-50 rounded"},[w(S(K),{class:"w-5 h-5"})],8,ge)])])]))),128))])])])])):g("",!0),y.value==="banners"?(u(),d("div",ce,[e("div",ye,[t[46]||(t[46]=e("h2",{class:"text-lg font-semibold"},"Homepage Banners",-1)),e("button",{onClick:t[13]||(t[13]=l=>M(null)),class:"btn-primary"},[w(S(L),{class:"w-5 h-5 mr-2"}),t[45]||(t[45]=E(" Add Banner ",-1))])]),e("div",fe,[(u(!0),d(V,null,$(D.value,l=>(u(),d("div",{key:l.id,class:"card overflow-hidden"},[e("img",{src:l.image_url,alt:l.title,class:"w-full h-40 object-cover"},null,8,xe),e("div",ke,[e("div",we,[e("h3",Se,v(l.title),1),e("span",{class:B(["badge",l.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},v(l.is_active?"Active":"Inactive"),3)]),l.link?(u(),d("p",Ce,v(l.link),1)):g("",!0),e("div",Ue,[e("button",{onClick:x=>M(l),class:"btn-secondary btn-sm flex-1"}," Edit ",8,Ve),e("button",{onClick:x=>z(l),class:"btn-sm bg-red-100 text-red-700 flex-1"}," Delete ",8,$e)])])]))),128))])])):g("",!0),i.value!==null?(u(),d("div",_e,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[14]||(t[14]=l=>i.value=null)}),e("div",Be,[e("h3",Pe,v(i.value.id?"Edit Page":"Add Page"),1),e("form",{onSubmit:k(T,["prevent"]),class:"space-y-4"},[e("div",null,[t[47]||(t[47]=e("label",{class:"label"},"Title",-1)),o(e("input",{"onUpdate:modelValue":t[15]||(t[15]=l=>i.value.title=l),type:"text",class:"input",required:""},null,512),[[p,i.value.title]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"label"},"Slug",-1)),o(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>i.value.slug=l),type:"text",class:"input",placeholder:"auto-generated"},null,512),[[p,i.value.slug]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"label"},"Content",-1)),o(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=l=>i.value.content=l),rows:"10",class:"input font-mono text-sm"},null,512),[[p,i.value.content]]),t[50]||(t[50]=e("p",{class:"text-sm text-gray-500 mt-1"},"HTML is supported",-1))]),e("div",De,[o(e("input",{"onUpdate:modelValue":t[18]||(t[18]=l=>i.value.is_active=l),type:"checkbox",class:"rounded text-primary-600"},null,512),[[_,i.value.is_active]]),t[51]||(t[51]=e("label",null,"Active",-1))]),e("div",Fe,[e("button",{type:"button",onClick:t[19]||(t[19]=l=>i.value=null),class:"btn-secondary flex-1"},"Cancel"),e("button",{type:"submit",disabled:r.value,class:"btn-primary flex-1"},v(r.value?"Saving...":"Save Page"),9,Ae)])],32)])])):g("",!0),a.value!==null?(u(),d("div",Me,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[20]||(t[20]=l=>a.value=null)}),e("div",je,[e("h3",Ee,v(a.value.id?"Edit Banner":"Add Banner"),1),e("form",{onSubmit:k(H,["prevent"]),class:"space-y-4"},[e("div",null,[t[52]||(t[52]=e("label",{class:"label"},"Title",-1)),o(e("input",{"onUpdate:modelValue":t[21]||(t[21]=l=>a.value.title=l),type:"text",class:"input",required:""},null,512),[[p,a.value.title]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"label"},"Link (optional)",-1)),o(e("input",{"onUpdate:modelValue":t[22]||(t[22]=l=>a.value.link=l),type:"url",class:"input",placeholder:"https://"},null,512),[[p,a.value.link]])]),e("div",null,[t[54]||(t[54]=e("label",{class:"label"},"Image",-1)),e("input",{type:"file",accept:"image/*",onChange:R,class:"input"},null,32),a.value.image_url?(u(),d("img",{key:0,src:a.value.image_url,class:"mt-2 h-24 rounded"},null,8,Le)):g("",!0)]),e("div",null,[t[55]||(t[55]=e("label",{class:"label"},"Position",-1)),o(e("input",{"onUpdate:modelValue":t[23]||(t[23]=l=>a.value.position=l),type:"number",class:"input w-24"},null,512),[[p,a.value.position,void 0,{number:!0}]])]),e("div",Ne,[o(e("input",{"onUpdate:modelValue":t[24]||(t[24]=l=>a.value.is_active=l),type:"checkbox",class:"rounded text-primary-600"},null,512),[[_,a.value.is_active]]),t[56]||(t[56]=e("label",null,"Active",-1))]),e("div",Ie,[e("button",{type:"button",onClick:t[25]||(t[25]=l=>a.value=null),class:"btn-secondary flex-1"},"Cancel"),e("button",{type:"submit",disabled:r.value,class:"btn-primary flex-1"},v(r.value?"Saving...":"Save Banner"),9,Te)])],32)])])):g("",!0)]))}};export{Ge as default};
