var ie=Object.defineProperty,re=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var J=(v,i,r)=>i in v?ie(v,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):v[i]=r,O=(v,i)=>{for(var r in i||(i={}))de.call(i,r)&&J(v,r,i[r]);if(q)for(var r of q(i))ve.call(i,r)&&J(v,r,i[r]);return v},W=(v,i)=>re(v,ue(i));var A=(v,i,r)=>new Promise((M,k)=>{var $=c=>{try{h(r.next(c))}catch(p){k(p)}},o=c=>{try{h(r.throw(c))}catch(p){k(p)}},h=c=>c.done?M(c.value):Promise.resolve(c.value).then($,o);h((r=r.apply(v,i)).next())});import{k as n,l,p as e,q as ce,f as m,b as U,s as Z,o as pe,v as me,z as F,x as y,J as _e,a as _,A as w,y as ye,C as I,F as f,B as u,I as g,D as b,L as K,E as we,G as fe,M as he}from"./vue-vendor-JbibKI1S.js";import{_ as ge,d as be,e as ke,f as xe,b as V}from"./main-capacitor-DexhVPa1.js";import{d as Q}from"./dayjs.min-BhkFl9I1.js";import{L as Me}from"./ListingCard-Yo1Vzq5Z.js";import{r as $e,R as Ce}from"./ReportModal-DKtawrK-.js";import{r as Re}from"./UserIcon-CoweibMj.js";import{r as Ae}from"./CheckIcon-C37w7-s6.js";import{r as Le}from"./ShoppingBagIcon-CKdr8bSu.js";import{r as B}from"./StarIcon-Cav1k2_9.js";import"./ui-vendor-P7jBoO03.js";import"./listings-CGtpfsfK.js";import"./relativeTime-Ds0s5tmk.js";import"./SparklesIcon-CSUdwgID.js";function Se(v,i){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function Ue(v,i){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}const Ve={class:"profile-page"},Be={key:0,class:"container-app py-6"},Ye={key:1,class:"container-app py-12"},Ne={class:"empty-state"},De={class:"empty-icon"},Fe={class:"profile-header"},Ie={class:"container-app"},Pe={class:"header-content"},Te={class:"avatar-wrapper"},ze=["src","alt"],Ee={key:0,class:"verified-check"},Ge={class:"user-info"},je={class:"user-name"},He={class:"rating-row"},qe={class:"stars"},Je={class:"rating-text"},Oe={class:"reviews-count"},We={class:"meta-row"},Ze={key:0},Ke={key:0,class:"bio"},Qe={class:"stats-bar"},Xe={class:"stat"},es={class:"stat-value"},ss={class:"stat"},ts={class:"stat-value"},as={class:"stat"},ls={class:"stat-value"},ns={class:"container-app py-4"},os={class:"tabs"},is={key:0,class:"tab-content"},rs={key:0,class:"listings-grid"},us={key:1,class:"listings-grid"},ds={key:2,class:"empty-tab"},vs={key:1,class:"tab-content"},cs={key:0,class:"reviews-list"},ps={key:1,class:"reviews-list"},ms=["src","alt"],_s={class:"review-content"},ys={class:"review-header"},ws={class:"reviewer-name"},fs={class:"review-date"},hs={class:"review-stars"},gs={key:0,class:"review-text"},bs={key:2,class:"empty-tab"},ks={class:"review-modal"},xs={class:"review-modal-header"},Ms={class:"form-group"},$s={class:"rating-input"},Cs=["onClick","onMouseenter"],Rs={key:0,class:"rating-label"},As={class:"form-group"},Ls={class:"type-buttons"},Ss={class:"form-group"},Us={class:"char-count"},Vs={key:0,class:"error-message"},Bs=["disabled"],Ys={__name:"UserProfile",setup(v){const i=ce(),r=be(),M=m(!0),k=m(!0),$=m(!0),o=m(null),h=m([]),c=m([]),p=m("listings"),Y=m(!1),C=m(!1),N=m(0),L=m(!1),S=m(""),d=m({rating:0,type:"buyer",comment:""}),X=["Poor","Fair","Good","Very Good","Excellent"],ee=U(()=>r.isAuthenticated),P=U(()=>{var t,s;return((t=r.user)==null?void 0:t.id)===((s=o.value)==null?void 0:s.id)}),se=U(()=>{var t;return Math.round(((t=o.value)==null?void 0:t.response_rate)||0)}),te=U(()=>{var s,x;const t=(s=o.value)==null?void 0:s.avatar_url;return t&&!t.includes("default")&&!t.includes("null")?t:"https://ui-avatars.com/api/?name="+encodeURIComponent(((x=o.value)==null?void 0:x.name)||"U")+"&background=7c3aed&color=fff&size=200&bold=true"}),ae=t=>t!=null&&t.avatar_url&&!t.avatar_url.includes("default")?t.avatar_url:"https://ui-avatars.com/api/?name="+encodeURIComponent((t==null?void 0:t.name)||"U")+"&background=e2e8f0&color=64748b&size=80",le=t=>Q(t).format("MMMM YYYY"),ne=t=>Q(t).format("MMM D, YYYY"),D=()=>A(this,null,function*(){M.value=!0;try{const s=(yield V.get(`/users/${i.params.id}`)).data.data;o.value=W(O({},s.user),{member_since:s.member_since,response_rate:s.response_rate})}catch(t){o.value=null}finally{M.value=!1}}),T=()=>A(this,null,function*(){k.value=!0;try{const t=yield V.get(`/users/${i.params.id}/listings`);h.value=t.data.data}finally{k.value=!1}}),z=()=>A(this,null,function*(){$.value=!0;try{const t=yield V.get(`/users/${i.params.id}/reviews`);c.value=t.data.data}finally{$.value=!1}}),oe=()=>A(this,null,function*(){var t,s;if(d.value.rating){L.value=!0,S.value="";try{yield V.post("/reviews",{reviewed_id:o.value.id,rating:d.value.rating,type:d.value.type,comment:d.value.comment||null}),C.value=!1,d.value={rating:0,type:"buyer",comment:""},p.value==="reviews"?z():c.value=[],D()}catch(x){S.value=((s=(t=x.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to submit review. Please try again."}finally{L.value=!1}}});return Z(p,t=>{t==="reviews"&&!c.value.length&&z()}),Z(()=>i.params.id,()=>{i.params.id&&(D(),T(),c.value=[],p.value="listings")}),pe(()=>{D(),T()}),(t,s)=>{var E,G;const x=me("router-link");return l(),n("div",Ve,[M.value?(l(),n("div",Be,[...s[11]||(s[11]=[_e('<div class="profile-header-skeleton" data-v-287bb8d9><div class="skeleton w-28 h-28 rounded-full" data-v-287bb8d9></div><div class="flex-1 space-y-3" data-v-287bb8d9><div class="skeleton h-7 w-1/3" data-v-287bb8d9></div><div class="skeleton h-4 w-1/4" data-v-287bb8d9></div><div class="skeleton h-4 w-1/2" data-v-287bb8d9></div></div></div>',1)])])):o.value?(l(),n(f,{key:2},[e("div",Fe,[e("div",Ie,[e("div",Pe,[e("div",Te,[e("img",{src:te.value,alt:o.value.name,class:"avatar"},null,8,ze),o.value.is_verified?(l(),n("div",Ee,[_(w(Ae),{class:"w-4 h-4"})])):y("",!0)]),e("div",Ge,[e("h1",je,u(o.value.name),1),e("div",He,[e("div",qe,[(l(),n(f,null,g(5,a=>_(w(B),{key:a,class:b(["w-4 h-4",a<=Math.round(o.value.rating||0)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),e("span",Je,u(o.value.rating||"0.0"),1),e("span",Oe,"â€¢ "+u(o.value.reviews_count||0)+" reviews",1),!P.value&&ee.value?(l(),n("button",{key:0,onClick:s[0]||(s[0]=a=>C.value=!0),class:"write-review-btn"},[_(w(Ue),{class:"w-4 h-4"}),s[15]||(s[15]=e("span",null,"Write Review",-1))])):y("",!0),P.value?y("",!0):(l(),n("button",{key:1,onClick:s[1]||(s[1]=a=>Y.value=!0),class:"report-user"},[_(w($e),{class:"w-4 h-4"})]))]),e("div",We,[o.value.city?(l(),n("span",Ze,[_(w(ke),{class:"w-4 h-4"}),I(" "+u(o.value.city)+u(o.value.state?`, ${o.value.state}`:""),1)])):y("",!0),e("span",null,[_(w(Se),{class:"w-4 h-4"}),I(" Member since "+u(le(o.value.created_at)),1)])]),o.value.bio?(l(),n("p",Ke,u(o.value.bio),1)):y("",!0)])]),e("div",Qe,[e("div",Xe,[e("span",es,u(o.value.listings_count||0),1),s[16]||(s[16]=e("span",{class:"stat-label"},"Listings",-1))]),e("div",ss,[e("span",ts,u(o.value.sold_count||0),1),s[17]||(s[17]=e("span",{class:"stat-label"},"Sold",-1))]),e("div",as,[e("span",ls,u(se.value)+"%",1),s[18]||(s[18]=e("span",{class:"stat-label"},"Response Rate",-1))])])])]),e("div",ns,[e("div",os,[e("button",{onClick:s[2]||(s[2]=a=>p.value="listings"),class:b({active:p.value==="listings"})}," Listings ",2),e("button",{onClick:s[3]||(s[3]=a=>p.value="reviews"),class:b({active:p.value==="reviews"})}," Reviews ",2)]),p.value==="listings"?(l(),n("div",is,[k.value?(l(),n("div",rs,[(l(),n(f,null,g(6,a=>e("div",{key:a,class:"listing-skeleton"},[...s[19]||(s[19]=[e("div",{class:"skeleton aspect-square rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-3/4 mt-2"},null,-1),e("div",{class:"skeleton h-4 w-1/2 mt-1"},null,-1)])])),64))])):h.value.length?(l(),n("div",us,[(l(!0),n(f,null,g(h.value,a=>(l(),F(Me,{key:a.id,listing:a},null,8,["listing"]))),128))])):(l(),n("div",ds,[_(w(Le),{class:"w-12 h-12"}),s[20]||(s[20]=e("p",null,"No listings yet",-1))]))])):y("",!0),p.value==="reviews"?(l(),n("div",vs,[$.value?(l(),n("div",cs,[(l(),n(f,null,g(3,a=>e("div",{key:a,class:"review-skeleton"},[...s[21]||(s[21]=[e("div",{class:"skeleton w-10 h-10 rounded-full"},null,-1),e("div",{class:"flex-1 space-y-2"},[e("div",{class:"skeleton h-4 w-1/4"}),e("div",{class:"skeleton h-3 w-full"})],-1)])])),64))])):c.value.length?(l(),n("div",ps,[(l(!0),n(f,null,g(c.value,a=>{var R,j;return l(),n("div",{key:a.id,class:"review-card"},[e("img",{src:ae(a.reviewer),alt:(R=a.reviewer)==null?void 0:R.name,class:"reviewer-avatar"},null,8,ms),e("div",_s,[e("div",ys,[e("span",ws,u((j=a.reviewer)==null?void 0:j.name),1),e("span",fs,u(ne(a.created_at)),1)]),e("div",hs,[(l(),n(f,null,g(5,H=>_(w(B),{key:H,class:b(["w-4 h-4",H<=a.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),a.comment?(l(),n("p",gs,u(a.comment),1)):y("",!0)])])}),128))])):(l(),n("div",bs,[_(w(B),{class:"w-12 h-12"}),s[22]||(s[22]=e("p",null,"No reviews yet",-1))]))])):y("",!0)])],64)):(l(),n("div",Ye,[e("div",Ne,[e("div",De,[_(w(Re),{class:"w-16 h-16"})]),s[13]||(s[13]=e("h2",null,"User not found",-1)),s[14]||(s[14]=e("p",null,"This user doesn't exist or has been removed.",-1)),_(x,{to:"/",class:"btn-primary"},{default:ye(()=>[...s[12]||(s[12]=[I("Go Home",-1)])]),_:1})])])),Y.value?(l(),F(Ce,{key:3,type:"user","item-id":(E=o.value)==null?void 0:E.id,onClose:s[4]||(s[4]=a=>Y.value=!1)},null,8,["item-id"])):y("",!0),(l(),F(he,{to:"body"},[C.value?(l(),n("div",{key:0,class:"review-modal-overlay",onClick:s[10]||(s[10]=K(a=>C.value=!1,["self"]))},[e("div",ks,[e("div",xs,[e("h3",null,"Review "+u((G=o.value)==null?void 0:G.name),1),e("button",{onClick:s[5]||(s[5]=a=>C.value=!1),class:"close-btn"},[_(w(xe),{class:"w-5 h-5"})])]),e("form",{onSubmit:K(oe,["prevent"]),class:"review-form"},[e("div",Ms,[s[23]||(s[23]=e("label",null,"Rating",-1)),e("div",$s,[(l(),n(f,null,g(5,a=>e("button",{key:a,type:"button",onClick:R=>d.value.rating=a,onMouseenter:R=>N.value=a,onMouseleave:s[6]||(s[6]=R=>N.value=0),class:"star-btn"},[_(w(B),{class:b(["w-8 h-8",a<=(N.value||d.value.rating)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])],40,Cs)),64))]),d.value.rating?(l(),n("span",Rs,u(X[d.value.rating-1]),1)):y("",!0)]),e("div",As,[s[24]||(s[24]=e("label",null,"I'm reviewing as a",-1)),e("div",Ls,[e("button",{type:"button",onClick:s[7]||(s[7]=a=>d.value.type="buyer"),class:b({active:d.value.type==="buyer"})}," Buyer ",2),e("button",{type:"button",onClick:s[8]||(s[8]=a=>d.value.type="seller"),class:b({active:d.value.type==="seller"})}," Seller ",2)])]),e("div",Ss,[s[25]||(s[25]=e("label",null,"Comment (optional)",-1)),we(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=a=>d.value.comment=a),placeholder:"Share your experience with this user...",rows:"4",maxlength:"1000"},null,512),[[fe,d.value.comment]]),e("span",Us,u(d.value.comment.length)+"/1000",1)]),S.value?(l(),n("p",Vs,u(S.value),1)):y("",!0),e("button",{type:"submit",class:"submit-btn",disabled:!d.value.rating||L.value},u(L.value?"Submitting...":"Submit Review"),9,Bs)],32)])])):y("",!0)]))])}}},Ws=ge(Ys,[["__scopeId","data-v-287bb8d9"]]);export{Ws as default};
