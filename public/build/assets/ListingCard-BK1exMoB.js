import{_ as L,b as F,r as N,d as g,e as S,m as x,o as a,w as B,a as e,c as n,f as l,g as c,j as d,p as f,R as $,S as j,t as r}from"./main-QOXgzBjM.js";import{u as E}from"./listings-YuEa73Vj.js";import{d as p}from"./dayjs.min-iy57P9mS.js";import{r as M}from"./relativeTime-D5nU98bY.js";import{r as V}from"./SparklesIcon-Cd-n_rvt.js";import{r as z}from"./BoltIcon-CZ-Je01x.js";import{r as A}from"./MapPinIcon-DBe48H6z.js";const D={class:"card-image"},I=["src","alt"],P={key:0,class:"badge-featured"},q={key:1,class:"badge-urgent"},G={class:"card-content"},O={class:"price-row"},R={class:"price"},T={key:0,class:"condition-badge"},U={class:"card-title"},H={class:"meta-row"},J={class:"location"},K={class:"time"},Q={__name:"ListingCard",props:{listing:{type:Object,required:!0},showFavorite:{type:Boolean,default:!0}},setup(o){p.extend(M);const i=o,h=F(),v=E(),u=N(i.listing.is_favorited||!1),_=g(()=>{var s;return(i.listing.formatted_price||`â‚¹${(s=i.listing.price)==null?void 0:s.toLocaleString()}`).replace(/\s*\(Negotiable\)/gi,"").trim()}),m=g(()=>{const t=i.listing.condition;return t?{new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"}[t.toLowerCase()]||t.replace(/_/g," "):""}),w=g(()=>{const s=(i.listing.location||i.listing.city||"").split(",")[0].trim();return s.length>15?s.substring(0,15)+"...":s}),y=async()=>{if(!h.isAuthenticated)return;const t=await v.toggleFavorite(i.listing.id);u.value=t.is_favorited},b=t=>p(t).fromNow(),k=t=>{t.target.src="https://images.unsplash.com/photo-1560393464-5c69a73c5770?w=400&h=300&fit=crop&auto=format"};return(t,s)=>{const C=S("router-link");return a(),x(C,{to:`/listing/${o.listing.slug}`,class:"listing-card group"},{default:B(()=>[e("div",D,[e("img",{src:o.listing.primary_image_url,alt:o.listing.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",onError:k},null,40,I),o.listing.is_featured?(a(),n("div",P,[c(d(V),{class:"w-3 h-3"}),s[0]||(s[0]=e("span",null,"Featured",-1))])):l("",!0),o.listing.is_urgent?(a(),n("div",q,[c(d(z),{class:"w-3 h-3"}),s[1]||(s[1]=e("span",null,"Urgent",-1))])):l("",!0),o.showFavorite?(a(),n("button",{key:2,onClick:$(y,["prevent"]),class:f(["btn-favorite",{"is-favorited":u.value}])},[c(d(j),{class:f(["w-5 h-5",u.value?"fill-current":""])},null,8,["class"])],2)):l("",!0)]),e("div",G,[e("div",O,[e("span",R,r(_.value),1),m.value?(a(),n("span",T,r(m.value),1)):l("",!0)]),e("h3",U,r(o.listing.title),1),e("div",H,[e("span",J,[c(d(A),{class:"w-3.5 h-3.5"}),e("span",null,r(w.value),1)]),e("span",K,r(b(o.listing.published_at||o.listing.created_at)),1)])])]),_:1},8,["to"])}}},ot=L(Q,[["__scopeId","data-v-53b904a4"]]);export{ot as L};
