import{u as B}from"./listings-B47qvZnp.js";import{d as i,e as V,z as $,f as A,c as a,o,a as t,g as f,t as n,F as b,i as k,h as c,k as g,E as D,w,j as F,O as v,m as z,J as E}from"./main-CeWmT0Lm.js";import{d as C}from"./dayjs.min-BiuRtYLQ.js";import{r as O}from"./relativeTime-UB1V0fS-.js";const P={class:"favorites-page min-h-screen bg-gray-50"},T={class:"container-app py-6"},J={class:"flex items-center justify-between mb-6"},R={class:"text-gray-500"},q={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},G={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},H=["onClick"],K={class:"aspect-[4/3] bg-gray-100"},Q=["src","alt"],U={key:0,class:"absolute inset-0 bg-black/50 flex items-center justify-center"},W={class:"p-4"},X={class:"text-lg font-bold text-gray-900"},Y={class:"text-gray-700 font-medium line-clamp-2 mt-1"},Z={class:"flex items-center mt-2 text-sm text-gray-500"},I={class:"text-xs text-gray-400 mt-1"},ee={key:2,class:"card p-12 text-center"},te={key:3,class:"mt-6 text-center"},se=["disabled"],ce={__name:"Favorites",setup(ae){C.extend(O);const y=B(),m=i(!0),d=i(!1),r=i([]),u=i(0),_=i(1),p=i(1),j=V(()=>_.value<p.value),L=l=>C(l).fromNow(),h=async(l=!1)=>{l?d.value=!0:m.value=!0;try{const e=await y.fetchFavorites();l?r.value=[...r.value,...e.data]:r.value=e.data,u.value=e.meta.total,_.value=e.meta.current_page,p.value=e.meta.last_page}finally{m.value=!1,d.value=!1}},M=async l=>{try{await y.toggleFavorite(l),r.value=r.value.filter(e=>e.id!==l),u.value--,v.success("Removed from favorites")}catch{v.error("Failed to remove from favorites")}},N=async()=>{if(confirm("Are you sure you want to clear all favorites?"))try{await api.delete("/favorites/clear"),r.value=[],u.value=0,v.success("All favorites cleared")}catch{v.error("Failed to clear favorites")}},S=()=>{h(!0)};return $(()=>{h()}),(l,e)=>{const x=A("router-link");return o(),a("div",P,[t("div",T,[t("div",J,[t("div",null,[e[0]||(e[0]=t("h1",{class:"text-2xl font-bold text-gray-900"},"My Favorites",-1)),t("p",R,n(u.value)+" saved items",1)]),r.value.length?(o(),a("button",{key:0,onClick:N,class:"text-sm text-red-600 hover:underline"}," Clear all ")):f("",!0)]),m.value?(o(),a("div",q,[(o(),a(b,null,k(8,s=>t("div",{key:s,class:"card p-4"},[...e[1]||(e[1]=[t("div",{class:"skeleton h-40 mb-3"},null,-1),t("div",{class:"skeleton h-4 w-20 mb-2"},null,-1),t("div",{class:"skeleton h-4 w-full"},null,-1)])])),64))])):r.value.length?(o(),a("div",G,[(o(!0),a(b,null,k(r.value,s=>(o(),a("div",{key:s.id,class:"card-hover group relative"},[t("button",{onClick:oe=>M(s.id),class:"absolute top-2 right-2 z-10 w-8 h-8 bg-white rounded-full shadow flex items-center justify-center opacity-0 group-hover:opacity-100 transition"},[c(g(z),{class:"w-5 h-5 text-gray-600"})],8,H),c(x,{to:`/listing/${s.slug}`},{default:w(()=>[t("div",K,[t("img",{src:s.primary_image_url,alt:s.title,class:"w-full h-full object-cover"},null,8,Q),s.status==="sold"?(o(),a("div",U,[...e[2]||(e[2]=[t("span",{class:"bg-white text-gray-900 px-4 py-2 rounded-lg font-semibold"}," SOLD ",-1)])])):f("",!0)]),t("div",W,[t("p",X,n(s.formatted_price),1),t("h3",Y,n(s.title),1),t("div",Z,[c(g(E),{class:"w-4 h-4 mr-1"}),F(" "+n(s.location),1)]),t("p",I," Saved "+n(L(s.favorited_at)),1)])]),_:2},1032,["to"])]))),128))])):(o(),a("div",ee,[c(g(D),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[4]||(e[4]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No favorites yet",-1)),e[5]||(e[5]=t("p",{class:"text-gray-500 mb-4"},"Save items you like by clicking the heart icon",-1)),c(x,{to:"/search",class:"btn-primary"},{default:w(()=>[...e[3]||(e[3]=[F(" Browse Listings ",-1)])]),_:1})])),j.value?(o(),a("div",te,[t("button",{onClick:S,disabled:d.value,class:"btn-secondary"},n(d.value?"Loading...":"Load More"),9,se)])):f("",!0)])])}}};export{ce as default};
