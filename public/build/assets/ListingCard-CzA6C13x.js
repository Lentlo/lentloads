import{x as F,b as L,d as N,e as l,f as $,n as S,o,w as B,a as s,c as n,g as c,h as d,k as u,q as h,V as M,E as V,t as r,J as E}from"./main-Dyx1PIu1.js";import{u as j}from"./listings-DrPlP9lv.js";import{d as v}from"./dayjs.min-CqhGclyr.js";import{r as D}from"./relativeTime-BxpmYYer.js";import{r as I}from"./SparklesIcon-qdKdhl_t.js";import{r as q}from"./BoltIcon-JuRfnZSU.js";const z={class:"card-image"},A=["src","alt"],P={key:0,class:"badge-featured"},R={key:1,class:"badge-urgent"},G={class:"card-content"},J={class:"price-row"},O={class:"price"},T={key:0,class:"condition-badge"},U={class:"card-title"},H={class:"meta-row"},K={class:"location"},Q={key:0,class:"distance"},W={key:1,class:"time"},X={__name:"ListingCard",props:{listing:{type:Object,required:!0},showFavorite:{type:Boolean,default:!0}},setup(i){v.extend(D);const a=i,p=L(),_=j(),g=N(a.listing.is_favorited||!1),w=l(()=>{var e;return(a.listing.formatted_price||`â‚¹${(e=a.listing.price)==null?void 0:e.toLocaleString()}`).replace(/\s*\(Negotiable\)/gi,"").trim()}),f=l(()=>{const t=a.listing.condition;return t?{new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"}[t.toLowerCase()]||t.replace(/_/g," "):""}),k=l(()=>{const e=(a.listing.location||a.listing.city||"").split(",")[0].trim();return e.length>15?e.substring(0,15)+"...":e}),m=l(()=>{const t=a.listing.distance;return t==null?"":t<1?`${Math.round(t*1e3)}m away`:t<10?`${t.toFixed(1)} km`:`${Math.round(t)} km`}),y=async()=>{if(!p.isAuthenticated)return;const t=await _.toggleFavorite(a.listing.id);g.value=t.is_favorited},b=t=>{if(!t)return"Recently";const e=v(t);return e.isValid()?e.fromNow():"Recently"},x=t=>{t.target.dataset.fallback||(t.target.dataset.fallback="true",t.target.src="https://placehold.co/400x400/e2e8f0/64748b?text=No+Image")};return(t,e)=>{const C=$("router-link");return o(),S(C,{to:`/listing/${i.listing.slug}`,class:"listing-card group"},{default:B(()=>[s("div",z,[s("img",{src:i.listing.primary_image_url,alt:i.listing.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",onError:x},null,40,A),i.listing.is_featured?(o(),n("div",P,[d(u(I),{class:"w-3 h-3"}),e[0]||(e[0]=s("span",null,"Featured",-1))])):c("",!0),i.listing.is_urgent?(o(),n("div",R,[d(u(q),{class:"w-3 h-3"}),e[1]||(e[1]=s("span",null,"Urgent",-1))])):c("",!0),i.showFavorite?(o(),n("button",{key:2,onClick:M(y,["prevent"]),class:h(["btn-favorite",{"is-favorited":g.value}])},[d(u(V),{class:h(["w-5 h-5",g.value?"fill-current":""])},null,8,["class"])],2)):c("",!0)]),s("div",G,[s("div",J,[s("span",O,r(w.value),1),f.value?(o(),n("span",T,r(f.value),1)):c("",!0)]),s("h3",U,r(i.listing.title),1),s("div",H,[s("span",K,[d(u(E),{class:"w-3.5 h-3.5"}),s("span",null,r(k.value),1)]),m.value?(o(),n("span",Q,r(m.value),1)):(o(),n("span",W,r(b(i.listing.published_at||i.listing.created_at)),1))])])]),_:1},8,["to"])}}},at=F(X,[["__scopeId","data-v-ca433a40"]]);export{at as L};
