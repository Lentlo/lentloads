var b=($,k,g)=>new Promise((m,c)=>{var p=a=>{try{n(g.next(a))}catch(d){c(d)}},v=a=>{try{n(g.throw(a))}catch(d){c(d)}},n=a=>a.done?m(a.value):Promise.resolve(a.value).then(p,v);n((g=g.apply($,k)).next())});import{f as i,b as F,o as H,v as I,k as l,l as t,p as s,x as w,F as h,I as _,D as E,Q as K,C as Q,B as C,z as L,y as T,H as U,K as q}from"./vue-vendor-Clry8SR-.js";import{_ as G,u as J,b as S,c as O,h as R}from"./main-capacitor-rPhIOL4v.js";import{L as W}from"./ListingCard-BH_E9Uvu.js";import{r as X}from"./MusicalNoteIcon-Dd8piNzs.js";import{r as V}from"./ShoppingBagIcon-BBIrlnAE.js";import{a as D,b as Y,r as Z}from"./TruckIcon-iz7wJR1j.js";import{r as ee}from"./WrenchScrewdriverIcon-EnL5cLhB.js";import{r as P,a as se}from"./HomeModernIcon-D5LY2ZTt.js";import"./ui-vendor-B7DvqItC.js";import"./listings-BoIexBmh.js";import"./dayjs.min-VXSoyYVV.js";import"./relativeTime-BN4FbP67.js";import"./SparklesIcon-BKZY3LMx.js";const te={class:"all-ads-page min-h-screen bg-gray-50"},oe={class:"container-app py-4"},ae={class:"mb-6"},le={key:0,class:"grid grid-cols-3 sm:grid-cols-4 gap-3"},re={key:1,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},ne={class:"category-name"},ie={key:2,class:"text-center py-4 text-gray-500 text-sm"},ce={class:"flex items-center justify-between mb-3"},de={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ue={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ge={key:2,class:"card p-8 text-center"},pe={key:3,class:"mt-6 text-center"},ve=["disabled"],me={key:0,class:"flex items-center gap-2"},fe={key:1},ye={key:4,class:"text-center text-sm text-gray-500 mt-4"},he={__name:"AllAds",setup($){const k=r=>({mobiles:Z,vehicles:D,property:P,jobs:se,electronics:Y,fashion:V,furniture:P,services:ee,bikes:D,books:V,sports:O,music:X})[r]||R,g=r=>({mobiles:"icon-purple",vehicles:"icon-blue",property:"icon-green",jobs:"icon-orange",electronics:"icon-indigo",fashion:"icon-pink",furniture:"icon-teal",services:"icon-amber"})[r]||"icon-gray",m=J(),c=i(!0),p=i([]),v=i(!0),n=i(!1),a=i([]),d=i("newest"),f=i(1),A=i(1),B=i(0),M=F(()=>p.value.filter(r=>!r.parent_id)),N=F(()=>f.value<A.value),j=()=>b(this,null,function*(){var r;c.value=!0;try{if((r=m.categories)!=null&&r.length)p.value=m.categories;else{const e=yield S.get("/categories");p.value=e.data.data||[]}}catch(e){console.error("Failed to fetch categories:",e)}finally{c.value=!1}}),x=(r=!1)=>b(this,null,function*(){var e,y,o;r?n.value=!0:(v.value=!0,f.value=1);try{const u=yield S.get("/listings",{params:{sort:d.value,page:r?f.value+1:1,per_page:12}});r?a.value=[...a.value,...u.data.data]:a.value=u.data.data||[],B.value=((e=u.data.meta)==null?void 0:e.total)||0,f.value=((y=u.data.meta)==null?void 0:y.current_page)||1,A.value=((o=u.data.meta)==null?void 0:o.last_page)||1}catch(u){console.error("Failed to fetch listings:",u)}finally{v.value=!1,n.value=!1}}),z=()=>{!n.value&&N.value&&x(!0)};return H(()=>{j(),x()}),(r,e)=>{const y=I("router-link");return t(),l("div",te,[s("div",oe,[e[8]||(e[8]=s("div",{class:"mb-4"},[s("h1",{class:"text-xl font-bold text-gray-900"},"All Ads"),s("p",{class:"text-sm text-gray-500"},"Browse by category or explore all listings")],-1)),s("div",ae,[e[2]||(e[2]=s("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3"},"Categories",-1)),c.value?(t(),l("div",le,[(t(),l(h,null,_(8,o=>s("div",{key:o,class:"category-skeleton"},[...e[1]||(e[1]=[s("div",{class:"skeleton w-10 h-10 rounded-lg mb-2"},null,-1),s("div",{class:"skeleton h-3 w-16"},null,-1)])])),64))])):(t(),l("div",re,[(t(!0),l(h,null,_(M.value,o=>(t(),L(y,{key:o.id,to:`/category/${o.slug}`,class:"category-card"},{default:T(()=>[s("div",{class:U(["category-icon",g(o.slug)])},[(t(),L(q(k(o.slug)),{class:"w-6 h-6"}))],2),s("span",ne,C(o.name),1)]),_:2},1032,["to"]))),128))])),!c.value&&M.value.length===0?(t(),l("div",ie," No categories found ")):w("",!0)]),s("div",null,[s("div",ce,[e[4]||(e[4]=s("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"All Listings",-1)),E(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),onChange:x,class:"sort-select"},[...e[3]||(e[3]=[s("option",{value:"newest"},"Newest First",-1),s("option",{value:"price_low"},"Price: Low to High",-1),s("option",{value:"price_high"},"Price: High to Low",-1)])],544),[[K,d.value]])]),v.value&&a.value.length===0?(t(),l("div",de,[(t(),l(h,null,_(8,o=>s("div",{key:o,class:"card p-3"},[...e[5]||(e[5]=[s("div",{class:"skeleton h-32 mb-2 rounded-lg"},null,-1),s("div",{class:"skeleton h-4 w-20 mb-1"},null,-1),s("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):a.value.length?(t(),l("div",ue,[(t(!0),l(h,null,_(a.value,o=>(t(),L(W,{key:o.id,listing:o},null,8,["listing"]))),128))])):(t(),l("div",ge,[...e[6]||(e[6]=[s("p",{class:"text-gray-500"},"No listings found",-1)])])),N.value?(t(),l("div",pe,[s("button",{onClick:z,disabled:n.value,class:"load-more-btn"},[n.value?(t(),l("span",me,[...e[7]||(e[7]=[s("svg",{class:"animate-spin w-4 h-4",viewBox:"0 0 24 24",fill:"none"},[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),s("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",class:"opacity-75"})],-1),Q(" Loading... ",-1)])])):(t(),l("span",fe,"Load More"))],8,ve)])):w("",!0),a.value.length>0?(t(),l("p",ye," Showing "+C(a.value.length)+" of "+C(B.value)+" ads ",1)):w("",!0)])])])}}},Ve=G(he,[["__scopeId","data-v-163ea866"]]);export{Ve as default};
