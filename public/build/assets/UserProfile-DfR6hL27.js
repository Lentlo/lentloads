import{c as l,o as a,a as s,_ as H,u as J,b as O,r as u,d as M,L as V,D as K,e as Q,m as D,f as v,E as W,g as r,j as d,w as X,i as $,F as p,t as i,h as m,p as y,B as R}from"./main-Bp0sOZm1.js";import{d as S}from"./dayjs.min-iy57P9mS.js";import{L as Z}from"./ListingCard-CwPiVZaO.js";import{R as ss}from"./ReportModal-DCkcuXRM.js";import{r as ts}from"./UserIcon-kBZ5NNlq.js";import{r as es}from"./CheckIcon-CxZ1muaY.js";import{r as as}from"./FlagIcon-B3kmde5r.js";import{r as ls}from"./MapPinIcon-DDkCV4dY.js";import{r as os}from"./ShoppingBagIcon-kC3uzSLP.js";import{r as C}from"./StarIcon-8CAoGzLC.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./listings-D96WPE9A.js";import"./relativeTime-D5nU98bY.js";import"./SparklesIcon-CgGLbQ3U.js";import"./BoltIcon-BQAQ3n-C.js";function ns(j,_){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}const is={class:"profile-page"},rs={key:0,class:"container-app py-6"},ds={key:1,class:"container-app py-12"},cs={class:"empty-state"},us={class:"empty-icon"},vs={class:"profile-header"},ps={class:"container-app"},_s={class:"header-content"},ms={class:"avatar-wrapper"},fs=["src","alt"],hs={key:0,class:"verified-check"},ys={class:"user-info"},ks={class:"user-name"},gs={class:"rating-row"},ws={class:"stars"},bs={class:"rating-text"},xs={class:"reviews-count"},Ms={class:"meta-row"},$s={key:0},Rs={key:0,class:"bio"},Cs={class:"stats-bar"},As={class:"stat"},Ls={class:"stat-value"},Us={class:"stat"},Ys={class:"stat-value"},Ns={class:"stat"},Bs={class:"stat-value"},Vs={class:"container-app py-4"},Ds={class:"tabs"},Ss={key:0,class:"tab-content"},js={key:0,class:"listings-grid"},zs={key:1,class:"listings-grid"},Is={key:2,class:"empty-tab"},Ps={key:1,class:"tab-content"},Ts={key:0,class:"reviews-list"},Es={key:1,class:"reviews-list"},Fs=["src","alt"],qs={class:"review-content"},Gs={class:"review-header"},Hs={class:"reviewer-name"},Js={class:"review-date"},Os={class:"review-stars"},Ks={key:0,class:"review-text"},Qs={key:2,class:"empty-tab"},Ws={__name:"UserProfile",setup(j){const _=J(),z=O(),k=u(!0),g=u(!0),w=u(!0),o=u(null),b=u([]),f=u([]),c=u("listings"),x=u(!1),I=M(()=>{var e,t;return((e=z.user)==null?void 0:e.id)===((t=o.value)==null?void 0:t.id)}),P=M(()=>{var e;return Math.round(((e=o.value)==null?void 0:e.response_rate)||0)}),T=M(()=>{var t,h;const e=(t=o.value)==null?void 0:t.avatar_url;return e&&!e.includes("default")&&!e.includes("null")?e:"https://ui-avatars.com/api/?name="+encodeURIComponent(((h=o.value)==null?void 0:h.name)||"U")+"&background=7c3aed&color=fff&size=200&bold=true"}),E=e=>e!=null&&e.avatar_url&&!e.avatar_url.includes("default")?e.avatar_url:"https://ui-avatars.com/api/?name="+encodeURIComponent((e==null?void 0:e.name)||"U")+"&background=e2e8f0&color=64748b&size=80",F=e=>S(e).format("MMMM YYYY"),q=e=>S(e).format("MMM D, YYYY"),A=async()=>{k.value=!0;try{const e=await R.get(`/users/${_.params.id}`);o.value=e.data.data}catch{o.value=null}finally{k.value=!1}},L=async()=>{g.value=!0;try{const e=await R.get(`/users/${_.params.id}/listings`);b.value=e.data.data}finally{g.value=!1}},G=async()=>{w.value=!0;try{const e=await R.get(`/users/${_.params.id}/reviews`);f.value=e.data.data}finally{w.value=!1}};return V(c,e=>{e==="reviews"&&!f.value.length&&G()}),V(()=>_.params.id,()=>{_.params.id&&(A(),L(),f.value=[],c.value="listings")}),K(()=>{A(),L()}),(e,t)=>{var U;const h=Q("router-link");return a(),l("div",is,[k.value?(a(),l("div",rs,[...t[4]||(t[4]=[W('<div class="profile-header-skeleton" data-v-f7d9a0c9><div class="skeleton w-28 h-28 rounded-full" data-v-f7d9a0c9></div><div class="flex-1 space-y-3" data-v-f7d9a0c9><div class="skeleton h-7 w-1/3" data-v-f7d9a0c9></div><div class="skeleton h-4 w-1/4" data-v-f7d9a0c9></div><div class="skeleton h-4 w-1/2" data-v-f7d9a0c9></div></div></div>',1)])])):o.value?(a(),l(p,{key:2},[s("div",vs,[s("div",ps,[s("div",_s,[s("div",ms,[s("img",{src:T.value,alt:o.value.name,class:"avatar"},null,8,fs),o.value.is_verified?(a(),l("div",hs,[r(d(es),{class:"w-4 h-4"})])):v("",!0)]),s("div",ys,[s("h1",ks,i(o.value.name),1),s("div",gs,[s("div",ws,[(a(),l(p,null,m(5,n=>r(d(C),{key:n,class:y(["w-4 h-4",n<=Math.round(o.value.rating||0)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),s("span",bs,i(o.value.rating||"0.0"),1),s("span",xs,"â€¢ "+i(o.value.reviews_count||0)+" reviews",1),I.value?v("",!0):(a(),l("button",{key:0,onClick:t[0]||(t[0]=n=>x.value=!0),class:"report-user"},[r(d(as),{class:"w-4 h-4"})]))]),s("div",Ms,[o.value.city?(a(),l("span",$s,[r(d(ls),{class:"w-4 h-4"}),$(" "+i(o.value.city)+i(o.value.state?`, ${o.value.state}`:""),1)])):v("",!0),s("span",null,[r(d(ns),{class:"w-4 h-4"}),$(" Member since "+i(F(o.value.created_at)),1)])]),o.value.bio?(a(),l("p",Rs,i(o.value.bio),1)):v("",!0)])]),s("div",Cs,[s("div",As,[s("span",Ls,i(o.value.listings_count||0),1),t[8]||(t[8]=s("span",{class:"stat-label"},"Listings",-1))]),s("div",Us,[s("span",Ys,i(o.value.sold_count||0),1),t[9]||(t[9]=s("span",{class:"stat-label"},"Sold",-1))]),s("div",Ns,[s("span",Bs,i(P.value)+"%",1),t[10]||(t[10]=s("span",{class:"stat-label"},"Response Rate",-1))])])])]),s("div",Vs,[s("div",Ds,[s("button",{onClick:t[1]||(t[1]=n=>c.value="listings"),class:y({active:c.value==="listings"})}," Listings ",2),s("button",{onClick:t[2]||(t[2]=n=>c.value="reviews"),class:y({active:c.value==="reviews"})}," Reviews ",2)]),c.value==="listings"?(a(),l("div",Ss,[g.value?(a(),l("div",js,[(a(),l(p,null,m(6,n=>s("div",{key:n,class:"listing-skeleton"},[...t[11]||(t[11]=[s("div",{class:"skeleton aspect-square rounded-lg"},null,-1),s("div",{class:"skeleton h-4 w-3/4 mt-2"},null,-1),s("div",{class:"skeleton h-4 w-1/2 mt-1"},null,-1)])])),64))])):b.value.length?(a(),l("div",zs,[(a(!0),l(p,null,m(b.value,n=>(a(),D(Z,{key:n.id,listing:n},null,8,["listing"]))),128))])):(a(),l("div",Is,[r(d(os),{class:"w-12 h-12"}),t[12]||(t[12]=s("p",null,"No listings yet",-1))]))])):v("",!0),c.value==="reviews"?(a(),l("div",Ps,[w.value?(a(),l("div",Ts,[(a(),l(p,null,m(3,n=>s("div",{key:n,class:"review-skeleton"},[...t[13]||(t[13]=[s("div",{class:"skeleton w-10 h-10 rounded-full"},null,-1),s("div",{class:"flex-1 space-y-2"},[s("div",{class:"skeleton h-4 w-1/4"}),s("div",{class:"skeleton h-3 w-full"})],-1)])])),64))])):f.value.length?(a(),l("div",Es,[(a(!0),l(p,null,m(f.value,n=>{var Y,N;return a(),l("div",{key:n.id,class:"review-card"},[s("img",{src:E(n.reviewer),alt:(Y=n.reviewer)==null?void 0:Y.name,class:"reviewer-avatar"},null,8,Fs),s("div",qs,[s("div",Gs,[s("span",Hs,i((N=n.reviewer)==null?void 0:N.name),1),s("span",Js,i(q(n.created_at)),1)]),s("div",Os,[(a(),l(p,null,m(5,B=>r(d(C),{key:B,class:y(["w-4 h-4",B<=n.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),n.comment?(a(),l("p",Ks,i(n.comment),1)):v("",!0)])])}),128))])):(a(),l("div",Qs,[r(d(C),{class:"w-12 h-12"}),t[14]||(t[14]=s("p",null,"No reviews yet",-1))]))])):v("",!0)])],64)):(a(),l("div",ds,[s("div",cs,[s("div",us,[r(d(ts),{class:"w-16 h-16"})]),t[6]||(t[6]=s("h2",null,"User not found",-1)),t[7]||(t[7]=s("p",null,"This user doesn't exist or has been removed.",-1)),r(h,{to:"/",class:"btn-primary"},{default:X(()=>[...t[5]||(t[5]=[$("Go Home",-1)])]),_:1})])])),x.value?(a(),D(ss,{key:3,type:"user","item-id":(U=o.value)==null?void 0:U.id,onClose:t[3]||(t[3]=n=>x.value=!1)},null,8,["item-id"])):v("",!0)])}}},pt=H(Ws,[["__scopeId","data-v-f7d9a0c9"]]);export{pt as default};
