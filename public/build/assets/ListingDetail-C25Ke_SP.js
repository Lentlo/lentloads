import{c as o,o as a,a as e,r as n,d as T,E as ye,Q as _e,M as be,f as r,t as c,i as $,_ as ke,D as xe,g as _,j as x,l as we,F as X,h as N,p as R,z as ee,B as ge,R as Fe,m as U,C as $e,O as te,u as We,b as Ge,e as Ze,K as se,S as Ke,y as Qe,w as pe,s as He,T as Je}from"./main-CpoKWTwG.js";import{u as qe}from"./listings-DeTx-QFa.js";import{L as et}from"./ListingCard-Y4vnTQFX.js";import{L as j}from"./leaflet-PnQHDfN2.js";import{_ as tt}from"./LoadingSpinner-CG92kgKb.js";import{r as st}from"./ChatBubbleLeftIcon-DSpm0LyZ.js";import{R as lt}from"./ReportModal-CO9yRL2B.js";import{d as at}from"./dayjs.min-Bxd5t0DV.js";import{r as ot}from"./ClockIcon-CacJTm3i.js";import{r as it}from"./EyeIcon-CA3KFAWW.js";import{r as nt}from"./StarIcon-D9MmcMh7.js";import{r as rt}from"./CheckBadgeIcon-C1MlehhK.js";import{r as fe}from"./PhoneIcon-BTpQ6A1M.js";import{r as ut}from"./FlagIcon-CwpaR24u.js";import"./relativeTime-BrFtvexb.js";import"./SparklesIcon-DLnyR3KW.js";import"./BoltIcon-DL0OqLoF.js";function ct(w,d){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const dt={class:"location-display"},vt={class:"mt-3 space-y-2"},mt={class:"flex items-start gap-2"},ht={class:"text-gray-900 font-medium"},gt={key:0,class:"text-sm text-gray-500"},pt=["href"],ft={__name:"LocationDisplay",props:{latitude:{type:Number,default:null},longitude:{type:Number,default:null},locality:{type:String,default:""},city:{type:String,default:""},state:{type:String,default:""},postalCode:{type:String,default:""}},setup(w){delete j.Icon.Default.prototype._getIconUrl,j.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const d=w,C=n(null);let h=null,S=null;const L=T(()=>d.latitude&&d.longitude),t=T(()=>{const v=[];return d.locality&&v.push(d.locality),d.city&&v.push(d.city),d.state&&v.push(d.state),v.join(", ")||"Location not specified"}),D=T(()=>L.value?`https://www.google.com/maps/dir/?api=1&destination=${d.latitude},${d.longitude}`:"#");ye(()=>{u()}),_e(()=>{h&&(h.remove(),h=null)});const u=()=>{if(!C.value)return;const v=d.latitude||20.5937,f=d.longitude||78.9629,z=L.value?14:5;h=j.map(C.value,{scrollWheelZoom:!1,dragging:!j.Browser.mobile,tap:!1}).setView([v,f],z),j.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(h),L.value&&(j.circle([d.latitude,d.longitude],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(h),S=j.marker([d.latitude,d.longitude]).addTo(h))};return be(()=>[d.latitude,d.longitude],([v,f])=>{h&&v&&f&&(h.setView([v,f],14),S&&h.removeLayer(S),j.circle([v,f],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(h),S=j.marker([v,f]).addTo(h))}),(v,f)=>(a(),o("div",dt,[e("div",{ref_key:"mapContainer",ref:C,class:"h-48 rounded-lg border border-gray-200 z-0"},null,512),e("div",vt,[e("div",mt,[f[0]||(f[0]=e("svg",{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",null,[e("p",ht,c(t.value),1),w.postalCode?(a(),o("p",gt,"PIN: "+c(w.postalCode),1)):r("",!0)])]),L.value?(a(),o("a",{key:0,href:D.value,target:"_blank",class:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700"},[...f[1]||(f[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),$(" Get Directions ",-1)])],8,pt)):r("",!0)])]))}},yt={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},_t={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-xl animate-slide-up max-h-[90vh] overflow-y-auto"},bt={class:"flex items-center justify-between p-4 border-b"},kt={key:0,class:"p-4 bg-gray-50 border-b"},xt={class:"flex gap-3"},wt=["src","alt"],$t={class:"flex-1 min-w-0"},Ct={class:"font-medium text-gray-900 truncate"},Mt={class:"text-lg font-bold text-primary-600"},Tt={class:"p-4 border-b"},St={class:"flex flex-wrap gap-2"},Lt=["onClick"],It={class:"p-4"},Dt={class:"mt-3"},jt={class:"flex items-center gap-2 text-sm"},Yt={key:0,class:"mt-2 flex items-center gap-2"},Xt=["max"],zt={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl safe-area-bottom"},Vt=["disabled"],Nt={__name:"ChatModal",props:{listing:{type:Object,required:!0}},emits:["close","sent"],setup(w,{emit:d}){const C=w,h=T(()=>{var b,i,y;return((i=(b=C.listing)==null?void 0:b.user)==null?void 0:i.id)||((y=C.listing)==null?void 0:y.user_id)}),S=d,L=xe(),t=n(""),D=n(!1),u=n(null),v=n(!1),f=["Is this still available?","Can you share more photos?","What is the condition?","Is the price negotiable?","Can I see it today?"],z=async()=>{var b,i;if(t.value.trim()){v.value=!0;try{const y={listing_id:C.listing.id,receiver_id:h.value,message:t.value.trim()};D.value&&u.value&&(y.offer_amount=u.value);const m=await $e.post("/conversations",y);te.success("Message sent!"),S("sent",m.data.data),S("close");const E=m.data.data.conversation;L.push(`/messages/${E.uuid}`)}catch(y){if(((b=y.response)==null?void 0:b.status)===409){te.info("You already have a conversation about this listing");const m=((i=y.response.data.data)==null?void 0:i.uuid)||y.response.data.uuid;L.push(`/messages/${m}`),S("close")}else te.error("Failed to send message")}finally{v.value=!1}}};return(b,i)=>{var y;return a(),o("div",yt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:i[0]||(i[0]=m=>b.$emit("close"))}),e("div",_t,[e("div",bt,[i[6]||(i[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Contact Seller",-1)),e("button",{onClick:i[1]||(i[1]=m=>b.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[_(x(we),{class:"w-5 h-5 text-gray-500"})])]),w.listing?(a(),o("div",kt,[e("div",xt,[e("img",{src:w.listing.primary_image_url,alt:w.listing.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,wt),e("div",$t,[e("h4",Ct,c(w.listing.title),1),e("p",Mt,c(w.listing.formatted_price),1)])])])):r("",!0),e("div",Tt,[i[7]||(i[7]=e("p",{class:"text-sm text-gray-500 mb-3"},"Quick messages:",-1)),e("div",St,[(a(),o(X,null,N(f,m=>e("button",{key:m,onClick:E=>t.value=m,class:R(["px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition",t.value===m?"bg-primary-100 text-primary-700":""])},c(m),11,Lt)),64))])]),e("div",It,[ee(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=m=>t.value=m),rows:"3",class:"input resize-none",placeholder:"Write your message..."},null,512),[[ge,t.value]]),e("div",Dt,[e("label",jt,[ee(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=m=>D.value=m),class:"rounded text-primary-600"},null,512),[[Fe,D.value]]),i[8]||(i[8]=$(" Include an offer ",-1))]),D.value?(a(),o("div",Yt,[i[9]||(i[9]=e("span",{class:"text-gray-500"},"â‚¹",-1)),ee(e("input",{"onUpdate:modelValue":i[4]||(i[4]=m=>u.value=m),type:"number",class:"input flex-1",placeholder:"Your offer amount",max:(y=w.listing)==null?void 0:y.price},null,8,Xt),[[ge,u.value,void 0,{number:!0}]])])):r("",!0)])]),e("div",zt,[e("button",{onClick:i[5]||(i[5]=m=>b.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:z,disabled:!t.value.trim()||v.value,class:"btn-primary flex-1"},[v.value?(a(),U(tt,{key:1,class:"w-5 h-5 mr-2"})):(a(),U(x(st),{key:0,class:"w-5 h-5 mr-2"})),$(" "+c(v.value?"Sending...":"Send Message"),1)],8,Vt)])])])}}},Ut=ke(Nt,[["__scopeId","data-v-90892009"]]),Et={class:"listing-detail-page"},Ot={key:0,class:"container-app py-6"},Rt={class:"image-gallery-section"},At=["src","alt"],Bt={key:0,class:"image-counter"},Pt={class:"image-badges"},Ft={key:0,class:"badge-featured"},Wt={key:1,class:"badge-urgent"},Gt={key:1,class:"swipe-dots"},Zt={key:0,class:"thumbnails-strip"},Kt=["onClick"],Qt=["src","alt"],Ht={class:"container-app py-4"},Jt={class:"lg:grid lg:grid-cols-3 lg:gap-6"},qt={class:"lg:col-span-2 space-y-4"},es={class:"detail-card"},ts={class:"flex items-start justify-between gap-4"},ss={class:"flex-1"},ls={class:"price"},as={class:"title"},os={class:"action-buttons"},is={class:"meta-info"},ns={class:"detail-card"},rs={class:"details-grid"},us={key:0,class:"detail-item"},cs={class:"value"},ds={key:1,class:"detail-item"},vs={class:"value"},ms={key:2,class:"detail-item"},hs={class:"value"},gs={key:3,class:"detail-item"},ps={class:"value"},fs={key:4,class:"detail-item"},ys={class:"value"},_s={class:"detail-card"},bs={class:"description"},ks={class:"detail-card"},xs={class:"lg:col-span-1 space-y-4 mt-4 lg:mt-0"},ws={class:"seller-card"},$s={class:"seller-header"},Cs=["src","alt"],Ms={class:"seller-info"},Ts={class:"seller-rating"},Ss={class:"text-gray-400"},Ls={key:0,class:"seller-location"},Is={key:0,class:"verified-badge"},Ds={class:"seller-actions"},js=["href"],Ys={key:0,class:"similar-section"},Xs={class:"similar-grid"},zs=["src","alt"],Vs={key:0,class:"lightbox-counter"},Ns={key:1,class:"lightbox-dots"},Us={__name:"ListingDetail",setup(w){const d=We(),C=xe(),h=Ge(),S=qe(),L=n(!0),t=n(null),D=n([]),u=n(0),v=n(!1),f=n(!1),z=n(!1),b=n(!1),i=n(!1),y=n(0),m=n(0),E=n(0),Ce=T(()=>{const s=-u.value*E.value;return i.value?s+(m.value-y.value):s}),Me=s=>{s.touches.length===1&&(i.value=!0,y.value=s.touches[0].clientX,m.value=s.touches[0].clientX,E.value=s.currentTarget.offsetWidth)},Te=s=>{!i.value||s.touches.length!==1||(m.value=s.touches[0].clientX)},Se=()=>{if(!i.value)return;i.value=!1;const s=m.value-y.value,l=E.value*.2;s>l&&u.value>0?u.value--:s<-l&&u.value<t.value.images.length-1&&u.value++},Le=s=>{u.value=s},F=n(!1),V=n(!1),W=n(0),A=n(0),B=n(0),O=n(0),M=n(1),Z=n(0),K=n(0),Q=n(0),H=n(!1),I=n(null),Ie=T(()=>{const s=-u.value*Z.value;return V.value&&I.value==="horizontal"&&M.value===1?s+(B.value-W.value):s}),De=T(()=>V.value&&I.value==="vertical"&&M.value===1?O.value-A.value:0),je=T(()=>{if(I.value==="vertical"&&M.value===1){const s=Math.abs(O.value-A.value);return Math.max(.3,1-s/300)}return 1}),Ye=s=>{const l=Date.now();if(l-K.value<300&&s.touches.length===1){M.value=M.value===1?2:1,K.value=0;return}K.value=l,s.touches.length===2?(H.value=!0,Q.value=le(s.touches)):s.touches.length===1&&(V.value=!0,W.value=s.touches[0].clientX,A.value=s.touches[0].clientY,B.value=s.touches[0].clientX,O.value=s.touches[0].clientY,Z.value=window.innerWidth,I.value=null)},Xe=s=>{if(H.value&&s.touches.length===2){const l=le(s.touches),g=l/Q.value;M.value=Math.max(1,Math.min(3,M.value*g)),Q.value=l;return}if(!(!V.value||s.touches.length!==1)){if(B.value=s.touches[0].clientX,O.value=s.touches[0].clientY,!I.value){const l=Math.abs(B.value-W.value),g=Math.abs(O.value-A.value);(l>10||g>10)&&(I.value=l>g?"horizontal":"vertical")}I.value==="horizontal"&&M.value===1&&s.preventDefault()}},ze=()=>{if(H.value=!1,!V.value)return;if(V.value=!1,M.value>1){I.value=null;return}const s=B.value-W.value,l=O.value-A.value,g=Z.value*.2;I.value==="horizontal"?s>g&&u.value>0?u.value--:s<-g&&u.value<t.value.images.length-1&&u.value++:I.value==="vertical"&&Math.abs(l)>100&&J(),I.value=null},le=s=>Math.hypot(s[0].clientX-s[1].clientX,s[0].clientY-s[1].clientY);T(()=>{var s,l,g,Y;return(l=(s=t.value)==null?void 0:s.images)!=null&&l.length?(Y=t.value.images[u.value])==null?void 0:Y.url:(g=t.value)==null?void 0:g.primary_image_url});const G=T(()=>{var s,l,g;return((s=h.user)==null?void 0:s.id)===((g=(l=t.value)==null?void 0:l.user)==null?void 0:g.id)}),Ve=T(()=>{var l;return(((l=t.value)==null?void 0:l.formatted_price)||"").replace(/\s*\(Negotiable\)/gi,"").trim()}),Ne=T(()=>{var l,g,Y,P;const s=(g=(l=t.value)==null?void 0:l.user)==null?void 0:g.avatar_url;return s&&!s.includes("default")?s:"https://ui-avatars.com/api/?name="+encodeURIComponent(((P=(Y=t.value)==null?void 0:Y.user)==null?void 0:P.name)||"U")+"&background=7c3aed&color=fff&size=120"}),Ue=s=>{if(!s)return"Recently";const l=at(s);return l.isValid()?l.format("MMM D, YYYY"):"Recently"},Ee=s=>({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[s]||(s==null?void 0:s.replace(/_/g," ")),ae=s=>{s.target.dataset.fallback||(s.target.dataset.fallback="true",s.target.src="https://placehold.co/800x600/e2e8f0/64748b?text=Image+Not+Available")},Oe=()=>{F.value=!0,M.value=1,document.body.style.overflow="hidden"},J=()=>{F.value=!1,M.value=1,document.body.style.overflow=""},Re=async()=>{if(!h.isAuthenticated){C.push("/login");return}const s=await S.toggleFavorite(t.value.id);v.value=s.is_favorited},Ae=()=>{if(!h.isAuthenticated){C.push("/login");return}f.value=!0},Be=()=>{navigator.share&&navigator.share({title:t.value.title,text:`Check out: ${t.value.title}`,url:window.location.href})},Pe=async()=>{if(!h.isAuthenticated){C.push("/login");return}try{await $e.post(`/listings/${t.value.id}/track-contact`,{type:"phone"})}catch{}b.value=!0},oe=async()=>{var s;try{const l=await S.fetchListing(d.params.slug);t.value=l.listing,D.value=l.similar,v.value=l.listing.is_favorited}catch(l){((s=l.response)==null?void 0:s.status)===404&&C.push("/404")}finally{L.value=!1}},ie=s=>{s.key==="Escape"&&F.value&&J()};return ye(()=>{oe(),window.addEventListener("keydown",ie)}),_e(()=>{window.removeEventListener("keydown",ie),document.body.style.overflow=""}),be(()=>d.params.slug,(s,l)=>{s!==l&&(L.value=!0,u.value=0,b.value=!1,oe())}),(s,l)=>{var Y,P,ne,re,ue,ce,de,ve,me,he;const g=Ze("router-link");return a(),o("div",Et,[L.value?(a(),o("div",Ot,[...l[3]||(l[3]=[e("div",{class:"skeleton h-80 mb-4 rounded-lg"},null,-1),e("div",{class:"skeleton h-8 w-1/3 mb-2"},null,-1),e("div",{class:"skeleton h-6 w-full mb-4"},null,-1),e("div",{class:"skeleton h-24 w-full"},null,-1)])])):t.value?(a(),o(X,{key:1},[e("div",Rt,[e("div",{class:"main-image-container",onClick:Oe,onTouchstart:Me,onTouchmove:Te,onTouchend:Se},[e("div",{class:"images-track",style:se({transform:`translateX(${Ce.value}px)`,transition:i.value?"none":"transform 0.3s ease-out"})},[(a(!0),o(X,null,N(t.value.images,(p,k)=>(a(),o("div",{key:p.id,class:"image-slide"},[e("img",{src:p.medium_url||p.url,alt:`${t.value.title} - Image ${k+1}`,class:"main-image",onError:ae},null,40,At)]))),128))],4),((Y=t.value.images)==null?void 0:Y.length)>1?(a(),o("div",Bt,c(u.value+1)+" / "+c(t.value.images.length),1)):r("",!0),e("div",Pt,[t.value.is_featured?(a(),o("span",Ft,"Featured")):r("",!0),t.value.is_urgent?(a(),o("span",Wt,"Urgent")):r("",!0)]),((P=t.value.images)==null?void 0:P.length)>1?(a(),o("div",Gt,[(a(!0),o(X,null,N(t.value.images,(p,k)=>(a(),o("span",{key:k,class:R(["dot",{active:u.value===k}])},null,2))),128))])):r("",!0)],32),((ne=t.value.images)==null?void 0:ne.length)>1?(a(),o("div",Zt,[(a(!0),o(X,null,N(t.value.images,(p,k)=>(a(),o("button",{key:p.id,onClick:q=>Le(k),class:R(["thumbnail",{active:u.value===k}])},[e("img",{src:p.thumbnail_url||p.url,alt:`Image ${k+1}`},null,8,Qt)],10,Kt))),128))])):r("",!0)]),e("div",Ht,[e("div",Jt,[e("div",qt,[e("div",es,[e("div",ts,[e("div",ss,[e("p",ls,c(Ve.value),1),e("h1",as,c(t.value.title),1)]),e("div",os,[e("button",{onClick:Re,class:R(["action-btn",{"is-favorite":v.value}])},[_(x(Ke),{class:R(["w-6 h-6",v.value?"fill-current":""])},null,8,["class"])],2),e("button",{onClick:Be,class:"action-btn"},[_(x(ct),{class:"w-6 h-6"})])])]),e("div",is,[e("span",null,[_(x(Qe),{class:"w-4 h-4"}),$(" "+c(t.value.location),1)]),e("span",null,[_(x(ot),{class:"w-4 h-4"}),$(" "+c(Ue(t.value.published_at)),1)]),e("span",null,[_(x(it),{class:"w-4 h-4"}),$(" "+c(t.value.views_count)+" views",1)])])]),e("div",ns,[l[9]||(l[9]=e("h3",{class:"section-title"},"Details",-1)),e("div",rs,[t.value.condition?(a(),o("div",us,[l[4]||(l[4]=e("span",{class:"label"},"Condition",-1)),e("span",cs,c(Ee(t.value.condition)),1)])):r("",!0),t.value.brand?(a(),o("div",ds,[l[5]||(l[5]=e("span",{class:"label"},"Brand",-1)),e("span",vs,c(t.value.brand),1)])):r("",!0),t.value.model?(a(),o("div",ms,[l[6]||(l[6]=e("span",{class:"label"},"Model",-1)),e("span",hs,c(t.value.model),1)])):r("",!0),t.value.year?(a(),o("div",gs,[l[7]||(l[7]=e("span",{class:"label"},"Year",-1)),e("span",ps,c(t.value.year),1)])):r("",!0),t.value.category?(a(),o("div",fs,[l[8]||(l[8]=e("span",{class:"label"},"Category",-1)),e("span",ys,c(t.value.category.name),1)])):r("",!0)])]),e("div",_s,[l[10]||(l[10]=e("h3",{class:"section-title"},"Description",-1)),e("p",bs,c(t.value.description),1)]),e("div",ks,[l[11]||(l[11]=e("h3",{class:"section-title"},"Location",-1)),_(ft,{latitude:t.value.latitude,longitude:t.value.longitude,locality:t.value.locality,city:t.value.city,state:t.value.state,"postal-code":t.value.postal_code},null,8,["latitude","longitude","locality","city","state","postal-code"])])]),e("div",xs,[e("div",ws,[e("div",$s,[e("img",{src:Ne.value,alt:t.value.user.name,class:"seller-avatar"},null,8,Cs),e("div",Ms,[_(g,{to:`/user/${t.value.user.id}`,class:"seller-name"},{default:pe(()=>[$(c(t.value.user.name),1)]),_:1},8,["to"]),e("div",Ts,[_(x(nt),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",null,c(t.value.user.rating||"0.0"),1),e("span",Ss,"("+c(t.value.user.total_reviews||0)+")",1)]),t.value.user.city?(a(),o("p",Ls,c(t.value.user.city),1)):r("",!0)])]),t.value.user.is_verified_seller?(a(),o("div",Is,[_(x(rt),{class:"w-5 h-5"}),l[12]||(l[12]=$(" Verified Seller ",-1))])):r("",!0),e("div",Ds,[G.value?r("",!0):(a(),o("button",{key:0,onClick:Ae,class:"btn-chat"},[_(x(He),{class:"w-5 h-5"}),l[13]||(l[13]=$(" Chat with Seller ",-1))])),t.value.user.phone&&!G.value&&!b.value?(a(),o("button",{key:1,onClick:Pe,class:"btn-phone"},[_(x(fe),{class:"w-5 h-5"}),l[14]||(l[14]=$(" Show Phone Number ",-1))])):r("",!0),t.value.user.phone&&!G.value&&b.value?(a(),o("a",{key:2,href:`tel:${t.value.user.phone}`,class:"btn-phone-revealed"},[_(x(fe),{class:"w-5 h-5"}),$(" "+c(t.value.user.phone),1)],8,js)):r("",!0),G.value?(a(),U(g,{key:3,to:`/listing/${t.value.id}/edit`,class:"btn-edit"},{default:pe(()=>[...l[15]||(l[15]=[$(" Edit Listing ",-1)])]),_:1},8,["to"])):r("",!0)])]),l[17]||(l[17]=e("div",{class:"safety-card"},[e("h4",null,"Safety Tips"),e("ul",null,[e("li",null,"Meet in a safe public place"),e("li",null,"Check the item before you pay"),e("li",null,"Pay only after collecting the item"),e("li",null,"Never share financial information")])],-1)),e("button",{onClick:l[0]||(l[0]=p=>z.value=!0),class:"report-btn"},[_(x(ut),{class:"w-4 h-4"}),l[16]||(l[16]=$(" Report this ad ",-1))])])]),(re=D.value)!=null&&re.length?(a(),o("div",Ys,[l[18]||(l[18]=e("h2",{class:"similar-title"},"Similar Ads",-1)),e("div",Xs,[(a(!0),o(X,null,N(D.value,p=>(a(),U(et,{key:p.id,listing:p},null,8,["listing"]))),128))])])):r("",!0)])],64)):r("",!0),(a(),U(Je,{to:"body"},[F.value?(a(),o("div",{key:0,class:"lightbox",onTouchstart:Ye,onTouchmove:Xe,onTouchend:ze},[e("button",{onClick:J,class:"lightbox-close"},[_(x(we),{class:"w-7 h-7"})]),e("div",{class:"lightbox-track",style:se({transform:`translateX(${Ie.value}px) translateY(${De.value}px)`,transition:V.value?"none":"transform 0.3s ease-out",opacity:je.value})},[(a(!0),o(X,null,N((ue=t.value)==null?void 0:ue.images,(p,k)=>{var q;return a(),o("div",{key:p.id,class:"lightbox-slide"},[e("img",{src:p.url,alt:`${(q=t.value)==null?void 0:q.title} - Image ${k+1}`,class:"lightbox-image",style:se({transform:`scale(${k===u.value?M.value:1})`,transformOrigin:"center center"}),onError:ae},null,44,zs)])}),128))],4),((de=(ce=t.value)==null?void 0:ce.images)==null?void 0:de.length)>1?(a(),o("div",Vs,c(u.value+1)+" / "+c(t.value.images.length),1)):r("",!0),((me=(ve=t.value)==null?void 0:ve.images)==null?void 0:me.length)>1?(a(),o("div",Ns,[(a(!0),o(X,null,N(t.value.images,(p,k)=>(a(),o("span",{key:k,class:R(["lightbox-dot",{active:u.value===k}])},null,2))),128))])):r("",!0)],32)):r("",!0)])),f.value?(a(),U(Ut,{key:2,listing:t.value,onClose:l[1]||(l[1]=p=>f.value=!1)},null,8,["listing"])):r("",!0),z.value?(a(),U(lt,{key:3,type:"listing",id:(he=t.value)==null?void 0:he.id,onClose:l[2]||(l[2]=p=>z.value=!1)},null,8,["id"])):r("",!0)])}}},sl=ke(Us,[["__scopeId","data-v-743a95fe"]]);export{sl as default};
