import{c as n,o as l,a as e,_ as te,u as ae,b as le,r as u,d as M,M as H,E as ne,e as oe,m as Y,f as v,G as ie,g as d,j as c,w as re,i as N,F as m,t as i,h as y,y as ue,p as w,U as q,l as de,z as ve,B as ce,T as pe,C as $}from"./main-CnlZqw4q.js";import{d as J}from"./dayjs.min-DDwWhT8F.js";import{L as me}from"./ListingCard-Bd7ddh_y.js";import{R as _e}from"./ReportModal-CldamDGj.js";import{r as ye}from"./UserIcon-CXfShN52.js";import{r as we}from"./CheckIcon-Kj66_-hx.js";import{r as he}from"./FlagIcon-DNdg9izD.js";import{r as fe}from"./ShoppingBagIcon-D6lEeBqK.js";import{r as C}from"./StarIcon-bV45BXEW.js";import"./listings-kviGrOJo.js";import"./relativeTime-CgPUXVvP.js";import"./SparklesIcon-fDMX5awB.js";import"./BoltIcon-CuEgOsEk.js";function ge(T,_){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function be(T,_){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}const ke={class:"profile-page"},xe={key:0,class:"container-app py-6"},Me={key:1,class:"container-app py-12"},$e={class:"empty-state"},Ce={class:"empty-icon"},Re={class:"profile-header"},Ae={class:"container-app"},Le={class:"header-content"},Se={class:"avatar-wrapper"},Ue=["src","alt"],Ve={key:0,class:"verified-check"},Be={class:"user-info"},Ye={class:"user-name"},Ne={class:"rating-row"},Te={class:"stars"},De={class:"rating-text"},Fe={class:"reviews-count"},Pe={class:"meta-row"},je={key:0},ze={key:0,class:"bio"},Ee={class:"stats-bar"},Ge={class:"stat"},Ie={class:"stat-value"},He={class:"stat"},qe={class:"stat-value"},Je={class:"stat"},Oe={class:"stat-value"},We={class:"container-app py-4"},Ze={class:"tabs"},Ke={key:0,class:"tab-content"},Qe={key:0,class:"listings-grid"},Xe={key:1,class:"listings-grid"},es={key:2,class:"empty-tab"},ss={key:1,class:"tab-content"},ts={key:0,class:"reviews-list"},as={key:1,class:"reviews-list"},ls=["src","alt"],ns={class:"review-content"},os={class:"review-header"},is={class:"reviewer-name"},rs={class:"review-date"},us={class:"review-stars"},ds={key:0,class:"review-text"},vs={key:2,class:"empty-tab"},cs={class:"review-modal"},ps={class:"review-modal-header"},ms={class:"form-group"},_s={class:"rating-input"},ys=["onClick","onMouseenter"],ws={key:0,class:"rating-label"},hs={class:"form-group"},fs={class:"type-buttons"},gs={class:"form-group"},bs={class:"char-count"},ks={key:0,class:"error-message"},xs=["disabled"],Ms={__name:"UserProfile",setup(T){const _=ae(),D=le(),R=u(!0),A=u(!0),L=u(!0),o=u(null),S=u([]),h=u([]),p=u("listings"),U=u(!1),g=u(!1),V=u(0),k=u(!1),x=u(""),r=u({rating:0,type:"buyer",comment:""}),O=["Poor","Fair","Good","Very Good","Excellent"],W=M(()=>D.isAuthenticated),F=M(()=>{var t,s;return((t=D.user)==null?void 0:t.id)===((s=o.value)==null?void 0:s.id)}),Z=M(()=>{var t;return Math.round(((t=o.value)==null?void 0:t.response_rate)||0)}),K=M(()=>{var s,f;const t=(s=o.value)==null?void 0:s.avatar_url;return t&&!t.includes("default")&&!t.includes("null")?t:"https://ui-avatars.com/api/?name="+encodeURIComponent(((f=o.value)==null?void 0:f.name)||"U")+"&background=7c3aed&color=fff&size=200&bold=true"}),Q=t=>t!=null&&t.avatar_url&&!t.avatar_url.includes("default")?t.avatar_url:"https://ui-avatars.com/api/?name="+encodeURIComponent((t==null?void 0:t.name)||"U")+"&background=e2e8f0&color=64748b&size=80",X=t=>J(t).format("MMMM YYYY"),ee=t=>J(t).format("MMM D, YYYY"),B=async()=>{R.value=!0;try{const s=(await $.get(`/users/${_.params.id}`)).data.data;o.value={...s.user,member_since:s.member_since,response_rate:s.response_rate}}catch{o.value=null}finally{R.value=!1}},P=async()=>{A.value=!0;try{const t=await $.get(`/users/${_.params.id}/listings`);S.value=t.data.data}finally{A.value=!1}},j=async()=>{L.value=!0;try{const t=await $.get(`/users/${_.params.id}/reviews`);h.value=t.data.data}finally{L.value=!1}},se=async()=>{var t,s;if(r.value.rating){k.value=!0,x.value="";try{await $.post("/reviews",{reviewed_id:o.value.id,rating:r.value.rating,type:r.value.type,comment:r.value.comment||null}),g.value=!1,r.value={rating:0,type:"buyer",comment:""},p.value==="reviews"?j():h.value=[],B()}catch(f){x.value=((s=(t=f.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to submit review. Please try again."}finally{k.value=!1}}};return H(p,t=>{t==="reviews"&&!h.value.length&&j()}),H(()=>_.params.id,()=>{_.params.id&&(B(),P(),h.value=[],p.value="listings")}),ne(()=>{B(),P()}),(t,s)=>{var z,E;const f=oe("router-link");return l(),n("div",ke,[R.value?(l(),n("div",xe,[...s[11]||(s[11]=[ie('<div class="profile-header-skeleton" data-v-287bb8d9><div class="skeleton w-28 h-28 rounded-full" data-v-287bb8d9></div><div class="flex-1 space-y-3" data-v-287bb8d9><div class="skeleton h-7 w-1/3" data-v-287bb8d9></div><div class="skeleton h-4 w-1/4" data-v-287bb8d9></div><div class="skeleton h-4 w-1/2" data-v-287bb8d9></div></div></div>',1)])])):o.value?(l(),n(m,{key:2},[e("div",Re,[e("div",Ae,[e("div",Le,[e("div",Se,[e("img",{src:K.value,alt:o.value.name,class:"avatar"},null,8,Ue),o.value.is_verified?(l(),n("div",Ve,[d(c(we),{class:"w-4 h-4"})])):v("",!0)]),e("div",Be,[e("h1",Ye,i(o.value.name),1),e("div",Ne,[e("div",Te,[(l(),n(m,null,y(5,a=>d(c(C),{key:a,class:w(["w-4 h-4",a<=Math.round(o.value.rating||0)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),e("span",De,i(o.value.rating||"0.0"),1),e("span",Fe,"â€¢ "+i(o.value.reviews_count||0)+" reviews",1),!F.value&&W.value?(l(),n("button",{key:0,onClick:s[0]||(s[0]=a=>g.value=!0),class:"write-review-btn"},[d(c(be),{class:"w-4 h-4"}),s[15]||(s[15]=e("span",null,"Write Review",-1))])):v("",!0),F.value?v("",!0):(l(),n("button",{key:1,onClick:s[1]||(s[1]=a=>U.value=!0),class:"report-user"},[d(c(he),{class:"w-4 h-4"})]))]),e("div",Pe,[o.value.city?(l(),n("span",je,[d(c(ue),{class:"w-4 h-4"}),N(" "+i(o.value.city)+i(o.value.state?`, ${o.value.state}`:""),1)])):v("",!0),e("span",null,[d(c(ge),{class:"w-4 h-4"}),N(" Member since "+i(X(o.value.created_at)),1)])]),o.value.bio?(l(),n("p",ze,i(o.value.bio),1)):v("",!0)])]),e("div",Ee,[e("div",Ge,[e("span",Ie,i(o.value.listings_count||0),1),s[16]||(s[16]=e("span",{class:"stat-label"},"Listings",-1))]),e("div",He,[e("span",qe,i(o.value.sold_count||0),1),s[17]||(s[17]=e("span",{class:"stat-label"},"Sold",-1))]),e("div",Je,[e("span",Oe,i(Z.value)+"%",1),s[18]||(s[18]=e("span",{class:"stat-label"},"Response Rate",-1))])])])]),e("div",We,[e("div",Ze,[e("button",{onClick:s[2]||(s[2]=a=>p.value="listings"),class:w({active:p.value==="listings"})}," Listings ",2),e("button",{onClick:s[3]||(s[3]=a=>p.value="reviews"),class:w({active:p.value==="reviews"})}," Reviews ",2)]),p.value==="listings"?(l(),n("div",Ke,[A.value?(l(),n("div",Qe,[(l(),n(m,null,y(6,a=>e("div",{key:a,class:"listing-skeleton"},[...s[19]||(s[19]=[e("div",{class:"skeleton aspect-square rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-3/4 mt-2"},null,-1),e("div",{class:"skeleton h-4 w-1/2 mt-1"},null,-1)])])),64))])):S.value.length?(l(),n("div",Xe,[(l(!0),n(m,null,y(S.value,a=>(l(),Y(me,{key:a.id,listing:a},null,8,["listing"]))),128))])):(l(),n("div",es,[d(c(fe),{class:"w-12 h-12"}),s[20]||(s[20]=e("p",null,"No listings yet",-1))]))])):v("",!0),p.value==="reviews"?(l(),n("div",ss,[L.value?(l(),n("div",ts,[(l(),n(m,null,y(3,a=>e("div",{key:a,class:"review-skeleton"},[...s[21]||(s[21]=[e("div",{class:"skeleton w-10 h-10 rounded-full"},null,-1),e("div",{class:"flex-1 space-y-2"},[e("div",{class:"skeleton h-4 w-1/4"}),e("div",{class:"skeleton h-3 w-full"})],-1)])])),64))])):h.value.length?(l(),n("div",as,[(l(!0),n(m,null,y(h.value,a=>{var b,G;return l(),n("div",{key:a.id,class:"review-card"},[e("img",{src:Q(a.reviewer),alt:(b=a.reviewer)==null?void 0:b.name,class:"reviewer-avatar"},null,8,ls),e("div",ns,[e("div",os,[e("span",is,i((G=a.reviewer)==null?void 0:G.name),1),e("span",rs,i(ee(a.created_at)),1)]),e("div",us,[(l(),n(m,null,y(5,I=>d(c(C),{key:I,class:w(["w-4 h-4",I<=a.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),a.comment?(l(),n("p",ds,i(a.comment),1)):v("",!0)])])}),128))])):(l(),n("div",vs,[d(c(C),{class:"w-12 h-12"}),s[22]||(s[22]=e("p",null,"No reviews yet",-1))]))])):v("",!0)])],64)):(l(),n("div",Me,[e("div",$e,[e("div",Ce,[d(c(ye),{class:"w-16 h-16"})]),s[13]||(s[13]=e("h2",null,"User not found",-1)),s[14]||(s[14]=e("p",null,"This user doesn't exist or has been removed.",-1)),d(f,{to:"/",class:"btn-primary"},{default:re(()=>[...s[12]||(s[12]=[N("Go Home",-1)])]),_:1})])])),U.value?(l(),Y(_e,{key:3,type:"user","item-id":(z=o.value)==null?void 0:z.id,onClose:s[4]||(s[4]=a=>U.value=!1)},null,8,["item-id"])):v("",!0),(l(),Y(pe,{to:"body"},[g.value?(l(),n("div",{key:0,class:"review-modal-overlay",onClick:s[10]||(s[10]=q(a=>g.value=!1,["self"]))},[e("div",cs,[e("div",ps,[e("h3",null,"Review "+i((E=o.value)==null?void 0:E.name),1),e("button",{onClick:s[5]||(s[5]=a=>g.value=!1),class:"close-btn"},[d(c(de),{class:"w-5 h-5"})])]),e("form",{onSubmit:q(se,["prevent"]),class:"review-form"},[e("div",ms,[s[23]||(s[23]=e("label",null,"Rating",-1)),e("div",_s,[(l(),n(m,null,y(5,a=>e("button",{key:a,type:"button",onClick:b=>r.value.rating=a,onMouseenter:b=>V.value=a,onMouseleave:s[6]||(s[6]=b=>V.value=0),class:"star-btn"},[d(c(C),{class:w(["w-8 h-8",a<=(V.value||r.value.rating)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])],40,ys)),64))]),r.value.rating?(l(),n("span",ws,i(O[r.value.rating-1]),1)):v("",!0)]),e("div",hs,[s[24]||(s[24]=e("label",null,"I'm reviewing as a",-1)),e("div",fs,[e("button",{type:"button",onClick:s[7]||(s[7]=a=>r.value.type="buyer"),class:w({active:r.value.type==="buyer"})}," Buyer ",2),e("button",{type:"button",onClick:s[8]||(s[8]=a=>r.value.type="seller"),class:w({active:r.value.type==="seller"})}," Seller ",2)])]),e("div",gs,[s[25]||(s[25]=e("label",null,"Comment (optional)",-1)),ve(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=a=>r.value.comment=a),placeholder:"Share your experience with this user...",rows:"4",maxlength:"1000"},null,512),[[ce,r.value.comment]]),e("span",bs,i(r.value.comment.length)+"/1000",1)]),x.value?(l(),n("p",ks,i(x.value),1)):v("",!0),e("button",{type:"submit",class:"submit-btn",disabled:!r.value.rating||k.value},i(k.value?"Submitting...":"Submit Review"),9,xs)],32)])])):v("",!0)]))])}}},Fs=te(Ms,[["__scopeId","data-v-287bb8d9"]]);export{Fs as default};
