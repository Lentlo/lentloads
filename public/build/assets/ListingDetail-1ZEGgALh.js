import{c as o,o as a,a as e,r as f,d as z,D as de,P as De,L as ve,f as n,t as r,i as w,_ as me,C as he,g as p,j as g,l as pe,F as B,h as F,p as X,y as E,A as ne,Q as Ve,m as V,B as ge,N as Z,u as Ne,b as Ue,e as Be,J as re,R as Xe,w as ue,s as Ae,S as U,T as Oe,I as Re}from"./main-CNm8sZUs.js";import{u as Fe}from"./listings-b1JtfoMS.js";import{L as Pe}from"./ListingCard-CDJpXCaq.js";import{L as I}from"./leaflet-Bln94WRs.js";import{_ as Ee}from"./LoadingSpinner-BN9XPSOL.js";import{r as Ze}from"./ChatBubbleLeftIcon-JoRZdtzL.js";import{R as We}from"./ReportModal-BqsbJ7Qy.js";import{d as Ge}from"./dayjs.min-iy57P9mS.js";import{r as Qe}from"./MapPinIcon-C3iSJA00.js";import{r as Je}from"./ClockIcon-CepTrSp0.js";import{r as He}from"./EyeIcon-qw0WbOCw.js";import{r as Ke}from"./StarIcon-DgJeg960.js";import{r as qe}from"./CheckBadgeIcon-bVijTOjY.js";import{r as ce}from"./PhoneIcon-AqMK1Okv.js";import{r as et}from"./FlagIcon-ClzhEd-0.js";import"./relativeTime-D5nU98bY.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./SparklesIcon-OhqwyrnF.js";import"./BoltIcon-BNUPD1R1.js";function tt(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function st(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function lt(b,u){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const at={class:"location-display"},ot={class:"mt-3 space-y-2"},it={class:"flex items-start gap-2"},nt={class:"text-gray-900 font-medium"},rt={key:0,class:"text-sm text-gray-500"},ut=["href"],ct={__name:"LocationDisplay",props:{latitude:{type:Number,default:null},longitude:{type:Number,default:null},locality:{type:String,default:""},city:{type:String,default:""},state:{type:String,default:""},postalCode:{type:String,default:""}},setup(b){delete I.Icon.Default.prototype._getIconUrl,I.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const u=b,x=f(null);let h=null,$=null;const C=z(()=>u.latitude&&u.longitude),t=z(()=>{const v=[];return u.locality&&v.push(u.locality),u.city&&v.push(u.city),u.state&&v.push(u.state),v.join(", ")||"Location not specified"}),S=z(()=>C.value?`https://www.google.com/maps/dir/?api=1&destination=${u.latitude},${u.longitude}`:"#");de(()=>{m()}),De(()=>{h&&(h.remove(),h=null)});const m=()=>{if(!x.value)return;const v=u.latitude||20.5937,_=u.longitude||78.9629,Y=C.value?14:5;h=I.map(x.value,{scrollWheelZoom:!1,dragging:!I.Browser.mobile,tap:!1}).setView([v,_],Y),I.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(h),C.value&&(I.circle([u.latitude,u.longitude],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(h),$=I.marker([u.latitude,u.longitude]).addTo(h))};return ve(()=>[u.latitude,u.longitude],([v,_])=>{h&&v&&_&&(h.setView([v,_],14),$&&h.removeLayer($),I.circle([v,_],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(h),$=I.marker([v,_]).addTo(h))}),(v,_)=>(a(),o("div",at,[e("div",{ref_key:"mapContainer",ref:x,class:"h-48 rounded-lg border border-gray-200 z-0"},null,512),e("div",ot,[e("div",it,[_[0]||(_[0]=e("svg",{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",null,[e("p",nt,r(t.value),1),b.postalCode?(a(),o("p",rt,"PIN: "+r(b.postalCode),1)):n("",!0)])]),C.value?(a(),o("a",{key:0,href:S.value,target:"_blank",class:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700"},[..._[1]||(_[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),w(" Get Directions ",-1)])],8,ut)):n("",!0)])]))}},dt={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},vt={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-xl animate-slide-up max-h-[90vh] overflow-y-auto"},mt={class:"flex items-center justify-between p-4 border-b"},ht={key:0,class:"p-4 bg-gray-50 border-b"},pt={class:"flex gap-3"},gt=["src","alt"],ft={class:"flex-1 min-w-0"},_t={class:"font-medium text-gray-900 truncate"},yt={class:"text-lg font-bold text-primary-600"},bt={class:"p-4 border-b"},kt={class:"flex flex-wrap gap-2"},wt=["onClick"],xt={class:"p-4"},$t={class:"mt-3"},Ct={class:"flex items-center gap-2 text-sm"},Mt={key:0,class:"mt-2 flex items-center gap-2"},St=["max"],jt={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl safe-area-bottom"},It=["disabled"],Tt={__name:"ChatModal",props:{listing:{type:Object,required:!0}},emits:["close","sent"],setup(b,{emit:u}){const x=b,h=z(()=>{var k,i,c;return((i=(k=x.listing)==null?void 0:k.user)==null?void 0:i.id)||((c=x.listing)==null?void 0:c.user_id)}),$=u,C=he(),t=f(""),S=f(!1),m=f(null),v=f(!1),_=["Is this still available?","Can you share more photos?","What is the condition?","Is the price negotiable?","Can I see it today?"],Y=async()=>{var k,i;if(t.value.trim()){v.value=!0;try{const c={listing_id:x.listing.id,receiver_id:h.value,message:t.value.trim()};S.value&&m.value&&(c.offer_amount=m.value);const d=await ge.post("/conversations",c);Z.success("Message sent!"),$("sent",d.data.data),$("close");const T=d.data.data.conversation;C.push(`/messages/${T.uuid}`)}catch(c){if(((k=c.response)==null?void 0:k.status)===409){Z.info("You already have a conversation about this listing");const d=((i=c.response.data.data)==null?void 0:i.uuid)||c.response.data.uuid;C.push(`/messages/${d}`),$("close")}else Z.error("Failed to send message")}finally{v.value=!1}}};return(k,i)=>{var c;return a(),o("div",dt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:i[0]||(i[0]=d=>k.$emit("close"))}),e("div",vt,[e("div",mt,[i[6]||(i[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Contact Seller",-1)),e("button",{onClick:i[1]||(i[1]=d=>k.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[p(g(pe),{class:"w-5 h-5 text-gray-500"})])]),b.listing?(a(),o("div",ht,[e("div",pt,[e("img",{src:b.listing.primary_image_url,alt:b.listing.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,gt),e("div",ft,[e("h4",_t,r(b.listing.title),1),e("p",yt,r(b.listing.formatted_price),1)])])])):n("",!0),e("div",bt,[i[7]||(i[7]=e("p",{class:"text-sm text-gray-500 mb-3"},"Quick messages:",-1)),e("div",kt,[(a(),o(B,null,F(_,d=>e("button",{key:d,onClick:T=>t.value=d,class:X(["px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition",t.value===d?"bg-primary-100 text-primary-700":""])},r(d),11,wt)),64))])]),e("div",xt,[E(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=d=>t.value=d),rows:"3",class:"input resize-none",placeholder:"Write your message..."},null,512),[[ne,t.value]]),e("div",$t,[e("label",Ct,[E(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=d=>S.value=d),class:"rounded text-primary-600"},null,512),[[Ve,S.value]]),i[8]||(i[8]=w(" Include an offer ",-1))]),S.value?(a(),o("div",Mt,[i[9]||(i[9]=e("span",{class:"text-gray-500"},"â‚¹",-1)),E(e("input",{"onUpdate:modelValue":i[4]||(i[4]=d=>m.value=d),type:"number",class:"input flex-1",placeholder:"Your offer amount",max:(c=b.listing)==null?void 0:c.price},null,8,St),[[ne,m.value,void 0,{number:!0}]])])):n("",!0)])]),e("div",jt,[e("button",{onClick:i[5]||(i[5]=d=>k.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:Y,disabled:!t.value.trim()||v.value,class:"btn-primary flex-1"},[v.value?(a(),V(Ee,{key:1,class:"w-5 h-5 mr-2"})):(a(),V(g(Ze),{key:0,class:"w-5 h-5 mr-2"})),w(" "+r(v.value?"Sending...":"Send Message"),1)],8,It)])])])}}},Lt=me(Tt,[["__scopeId","data-v-90892009"]]),zt={class:"listing-detail-page"},Yt={key:0,class:"container-app py-6"},Dt={class:"image-gallery-section"},Vt=["src","alt"],Nt={key:0,class:"image-counter"},Ut={class:"image-badges"},Bt={key:0,class:"badge-featured"},Xt={key:1,class:"badge-urgent"},At={key:1,class:"swipe-dots"},Ot={key:0,class:"thumbnails-strip"},Rt=["onClick"],Ft=["src","alt"],Pt={class:"container-app py-4"},Et={class:"lg:grid lg:grid-cols-3 lg:gap-6"},Zt={class:"lg:col-span-2 space-y-4"},Wt={class:"detail-card"},Gt={class:"flex items-start justify-between gap-4"},Qt={class:"flex-1"},Jt={class:"price"},Ht={class:"title"},Kt={class:"action-buttons"},qt={class:"meta-info"},es={class:"detail-card"},ts={class:"details-grid"},ss={key:0,class:"detail-item"},ls={class:"value"},as={key:1,class:"detail-item"},os={class:"value"},is={key:2,class:"detail-item"},ns={class:"value"},rs={key:3,class:"detail-item"},us={class:"value"},cs={key:4,class:"detail-item"},ds={class:"value"},vs={class:"detail-card"},ms={class:"description"},hs={class:"detail-card"},ps={class:"lg:col-span-1 space-y-4 mt-4 lg:mt-0"},gs={class:"seller-card"},fs={class:"seller-header"},_s=["src","alt"],ys={class:"seller-info"},bs={class:"seller-rating"},ks={class:"text-gray-400"},ws={key:0,class:"seller-location"},xs={key:0,class:"verified-badge"},$s={class:"seller-actions"},Cs=["href"],Ms={key:0,class:"similar-section"},Ss={class:"similar-grid"},js=["src","alt"],Is={class:"lightbox-controls"},Ts=["disabled"],Ls={class:"zoom-level"},zs=["disabled"],Ys={key:2,class:"lightbox-counter"},Ds={__name:"ListingDetail",setup(b){const u=Ne(),x=he(),h=Ue(),$=Fe(),C=f(!0),t=f(null),S=f([]),m=f(0),v=f(!1),_=f(!1),Y=f(!1),k=f(!1),i=f(!1),c=f(1),d=f(0),T=f(0);let W=0,G=0,A=0;const N=f(0);let Q=0,O=!1;const fe=l=>{l.touches.length===1&&(Q=l.touches[0].clientX,O=!0)},_e=l=>{if(!O||l.touches.length!==1)return;const s=l.touches[0].clientX-Q;N.value=Math.max(-100,Math.min(100,s))},ye=()=>{var s,y,M,L;if(!O)return;O=!1;const l=50;N.value>l&&((y=(s=t.value)==null?void 0:s.images)==null?void 0:y.length)>1?H():N.value<-l&&((L=(M=t.value)==null?void 0:M.images)==null?void 0:L.length)>1&&K(),N.value=0},J=z(()=>{var l,s,y,M;return(s=(l=t.value)==null?void 0:l.images)!=null&&s.length?(M=t.value.images[m.value])==null?void 0:M.url:(y=t.value)==null?void 0:y.primary_image_url}),R=z(()=>{var l,s,y;return((l=h.user)==null?void 0:l.id)===((y=(s=t.value)==null?void 0:s.user)==null?void 0:y.id)}),be=z(()=>{var s;return(((s=t.value)==null?void 0:s.formatted_price)||"").replace(/\s*\(Negotiable\)/gi,"").trim()}),ke=z(()=>{var s,y,M,L;const l=(y=(s=t.value)==null?void 0:s.user)==null?void 0:y.avatar_url;return l&&!l.includes("default")?l:"https://ui-avatars.com/api/?name="+encodeURIComponent(((L=(M=t.value)==null?void 0:M.user)==null?void 0:L.name)||"U")+"&background=7c3aed&color=fff&size=120"}),we=l=>Ge(l).format("MMM D, YYYY"),xe=l=>({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[l]||(l==null?void 0:l.replace(/_/g," ")),H=()=>{m.value=m.value>0?m.value-1:t.value.images.length-1,P()},K=()=>{m.value=m.value<t.value.images.length-1?m.value+1:0,P()},$e=()=>{i.value=!0,document.body.style.overflow="hidden"},q=()=>{i.value=!1,document.body.style.overflow="",P()},P=()=>{c.value=1,d.value=0,T.value=0},Ce=()=>{c.value<3&&(c.value+=.5)},Me=()=>{c.value>1&&(c.value-=.5,c.value===1&&(d.value=0,T.value=0))},Se=l=>{l.touches.length===2?A=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY):l.touches.length===1&&(W=l.touches[0].clientX-d.value,G=l.touches[0].clientY-T.value)},je=l=>{if(l.touches.length===2){const s=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY),y=s/A;c.value=Math.max(1,Math.min(3,c.value*y)),A=s}else l.touches.length===1&&c.value>1&&(d.value=l.touches[0].clientX-W,T.value=l.touches[0].clientY-G)},Ie=()=>{A=0},Te=async()=>{if(!h.isAuthenticated){x.push("/login");return}const l=await $.toggleFavorite(t.value.id);v.value=l.is_favorited},Le=()=>{if(!h.isAuthenticated){x.push("/login");return}_.value=!0},ze=()=>{navigator.share&&navigator.share({title:t.value.title,text:`Check out: ${t.value.title}`,url:window.location.href})},Ye=async()=>{if(!h.isAuthenticated){x.push("/login");return}try{await ge.post(`/listings/${t.value.id}/track-contact`,{type:"phone"})}catch{}k.value=!0},ee=async()=>{var l;try{const s=await $.fetchListing(u.params.slug);t.value=s.listing,S.value=s.similar,v.value=s.listing.is_favorited}catch(s){((l=s.response)==null?void 0:l.status)===404&&x.push("/404")}finally{C.value=!1}};return de(()=>ee()),ve(()=>u.params.slug,(l,s)=>{l!==s&&(C.value=!0,m.value=0,k.value=!1,ee())}),(l,s)=>{var M,L,te,se,le,ae,oe,ie;const y=Be("router-link");return a(),o("div",zt,[C.value?(a(),o("div",Yt,[...s[4]||(s[4]=[e("div",{class:"skeleton h-80 mb-4 rounded-lg"},null,-1),e("div",{class:"skeleton h-8 w-1/3 mb-2"},null,-1),e("div",{class:"skeleton h-6 w-full mb-4"},null,-1),e("div",{class:"skeleton h-24 w-full"},null,-1)])])):t.value?(a(),o(B,{key:1},[e("div",Dt,[e("div",{class:"main-image-container",onClick:$e,onTouchstart:fe,onTouchmove:_e,onTouchend:ye},[e("img",{src:J.value,alt:t.value.title,class:"main-image",style:re({transform:`translateX(${N.value}px)`})},null,12,Vt),((M=t.value.images)==null?void 0:M.length)>1?(a(),o("div",Nt,r(m.value+1)+" / "+r(t.value.images.length),1)):n("",!0),e("div",Ut,[t.value.is_featured?(a(),o("span",Bt,"Featured")):n("",!0),t.value.is_urgent?(a(),o("span",Xt,"Urgent")):n("",!0)]),((L=t.value.images)==null?void 0:L.length)>1?(a(),o("div",At,[(a(!0),o(B,null,F(t.value.images,(j,D)=>(a(),o("span",{key:D,class:X(["dot",{active:m.value===D}])},null,2))),128))])):n("",!0)],32),((te=t.value.images)==null?void 0:te.length)>1?(a(),o("div",Ot,[(a(!0),o(B,null,F(t.value.images,(j,D)=>(a(),o("button",{key:j.id,onClick:Vs=>m.value=D,class:X(["thumbnail",{active:m.value===D}])},[e("img",{src:j.thumbnail_url||j.url,alt:`Image ${D+1}`},null,8,Ft)],10,Rt))),128))])):n("",!0)]),e("div",Pt,[e("div",Et,[e("div",Zt,[e("div",Wt,[e("div",Gt,[e("div",Qt,[e("p",Jt,r(be.value),1),e("h1",Ht,r(t.value.title),1)]),e("div",Kt,[e("button",{onClick:Te,class:X(["action-btn",{"is-favorite":v.value}])},[p(g(Xe),{class:X(["w-6 h-6",v.value?"fill-current":""])},null,8,["class"])],2),e("button",{onClick:ze,class:"action-btn"},[p(g(lt),{class:"w-6 h-6"})])])]),e("div",qt,[e("span",null,[p(g(Qe),{class:"w-4 h-4"}),w(" "+r(t.value.location),1)]),e("span",null,[p(g(Je),{class:"w-4 h-4"}),w(" "+r(we(t.value.published_at)),1)]),e("span",null,[p(g(He),{class:"w-4 h-4"}),w(" "+r(t.value.views_count)+" views",1)])])]),e("div",es,[s[10]||(s[10]=e("h3",{class:"section-title"},"Details",-1)),e("div",ts,[t.value.condition?(a(),o("div",ss,[s[5]||(s[5]=e("span",{class:"label"},"Condition",-1)),e("span",ls,r(xe(t.value.condition)),1)])):n("",!0),t.value.brand?(a(),o("div",as,[s[6]||(s[6]=e("span",{class:"label"},"Brand",-1)),e("span",os,r(t.value.brand),1)])):n("",!0),t.value.model?(a(),o("div",is,[s[7]||(s[7]=e("span",{class:"label"},"Model",-1)),e("span",ns,r(t.value.model),1)])):n("",!0),t.value.year?(a(),o("div",rs,[s[8]||(s[8]=e("span",{class:"label"},"Year",-1)),e("span",us,r(t.value.year),1)])):n("",!0),t.value.category?(a(),o("div",cs,[s[9]||(s[9]=e("span",{class:"label"},"Category",-1)),e("span",ds,r(t.value.category.name),1)])):n("",!0)])]),e("div",vs,[s[11]||(s[11]=e("h3",{class:"section-title"},"Description",-1)),e("p",ms,r(t.value.description),1)]),e("div",hs,[s[12]||(s[12]=e("h3",{class:"section-title"},"Location",-1)),p(ct,{latitude:t.value.latitude,longitude:t.value.longitude,locality:t.value.locality,city:t.value.city,state:t.value.state,"postal-code":t.value.postal_code},null,8,["latitude","longitude","locality","city","state","postal-code"])])]),e("div",ps,[e("div",gs,[e("div",fs,[e("img",{src:ke.value,alt:t.value.user.name,class:"seller-avatar"},null,8,_s),e("div",ys,[p(y,{to:`/user/${t.value.user.id}`,class:"seller-name"},{default:ue(()=>[w(r(t.value.user.name),1)]),_:1},8,["to"]),e("div",bs,[p(g(Ke),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",null,r(t.value.user.rating||"0.0"),1),e("span",ks,"("+r(t.value.user.total_reviews||0)+")",1)]),t.value.user.city?(a(),o("p",ws,r(t.value.user.city),1)):n("",!0)])]),t.value.user.is_verified_seller?(a(),o("div",xs,[p(g(qe),{class:"w-5 h-5"}),s[13]||(s[13]=w(" Verified Seller ",-1))])):n("",!0),e("div",$s,[R.value?n("",!0):(a(),o("button",{key:0,onClick:Le,class:"btn-chat"},[p(g(Ae),{class:"w-5 h-5"}),s[14]||(s[14]=w(" Chat with Seller ",-1))])),t.value.user.phone&&!R.value&&!k.value?(a(),o("button",{key:1,onClick:Ye,class:"btn-phone"},[p(g(ce),{class:"w-5 h-5"}),s[15]||(s[15]=w(" Show Phone Number ",-1))])):n("",!0),t.value.user.phone&&!R.value&&k.value?(a(),o("a",{key:2,href:`tel:${t.value.user.phone}`,class:"btn-phone-revealed"},[p(g(ce),{class:"w-5 h-5"}),w(" "+r(t.value.user.phone),1)],8,Cs)):n("",!0),R.value?(a(),V(y,{key:3,to:`/listing/${t.value.id}/edit`,class:"btn-edit"},{default:ue(()=>[...s[16]||(s[16]=[w(" Edit Listing ",-1)])]),_:1},8,["to"])):n("",!0)])]),s[18]||(s[18]=e("div",{class:"safety-card"},[e("h4",null,"Safety Tips"),e("ul",null,[e("li",null,"Meet in a safe public place"),e("li",null,"Check the item before you pay"),e("li",null,"Pay only after collecting the item"),e("li",null,"Never share financial information")])],-1)),e("button",{onClick:s[0]||(s[0]=j=>Y.value=!0),class:"report-btn"},[p(g(et),{class:"w-4 h-4"}),s[17]||(s[17]=w(" Report this ad ",-1))])])]),(se=S.value)!=null&&se.length?(a(),o("div",Ms,[s[19]||(s[19]=e("h2",{class:"similar-title"},"Similar Ads",-1)),e("div",Ss,[(a(!0),o(B,null,F(S.value,j=>(a(),V(Pe,{key:j.id,listing:j},null,8,["listing"]))),128))])])):n("",!0)])],64)):n("",!0),i.value?(a(),o("div",{key:2,class:"lightbox",onClick:q},[e("button",{onClick:q,class:"lightbox-close"},[p(g(pe),{class:"w-8 h-8"})]),e("div",{class:"lightbox-content",onClick:s[1]||(s[1]=U(()=>{},["stop"]))},[e("img",{src:J.value,alt:t.value.title,class:"lightbox-image",style:re({transform:`scale(${c.value}) translate(${d.value}px, ${T.value}px)`}),onTouchstart:Se,onTouchmove:je,onTouchend:Ie},null,44,js)]),e("div",Is,[e("button",{onClick:U(Me,["stop"]),class:"zoom-btn",disabled:c.value<=1},[p(g(st),{class:"w-6 h-6"})],8,Ts),e("span",Ls,r(Math.round(c.value*100))+"%",1),e("button",{onClick:U(Ce,["stop"]),class:"zoom-btn",disabled:c.value>=3},[p(g(Oe),{class:"w-6 h-6"})],8,zs)]),((le=t.value.images)==null?void 0:le.length)>1?(a(),o("button",{key:0,onClick:U(H,["stop"]),class:"lightbox-nav lightbox-prev"},[p(g(tt),{class:"w-8 h-8"})])):n("",!0),((ae=t.value.images)==null?void 0:ae.length)>1?(a(),o("button",{key:1,onClick:U(K,["stop"]),class:"lightbox-nav lightbox-next"},[p(g(Re),{class:"w-8 h-8"})])):n("",!0),((oe=t.value.images)==null?void 0:oe.length)>1?(a(),o("div",Ys,r(m.value+1)+" / "+r(t.value.images.length),1)):n("",!0)])):n("",!0),_.value?(a(),V(Lt,{key:3,listing:t.value,onClose:s[2]||(s[2]=j=>_.value=!1)},null,8,["listing"])):n("",!0),Y.value?(a(),V(We,{key:4,type:"listing",id:(ie=t.value)==null?void 0:ie.id,onClose:s[3]||(s[3]=j=>Y.value=!1)},null,8,["id"])):n("",!0)])}}},tl=me(Ds,[["__scopeId","data-v-ca34cab1"]]);export{tl as default};
