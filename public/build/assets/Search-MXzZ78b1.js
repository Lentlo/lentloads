import{c as a,o as i,a as e,_ as I,u as Q,C as J,x as W,r as g,K as X,d as k,D as Y,L as Z,f,g as c,j as m,t as n,y as d,M as V,G as ee,i as L,l as w,F as p,h as x,A as b,z as te,p as $,N as se,m as le}from"./main-i8auEI_6.js";import{u as oe}from"./listings-CoyjIaz0.js";import{_ as ie}from"./ListingCard-BHEJO3Bi.js";import"./dayjs.min-iy57P9mS.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./relativeTime-D5nU98bY.js";import"./SparklesIcon-Dv1dWFFe.js";import"./BoltIcon-rkJ8bYpg.js";import"./MapPinIcon-B4CWjTRB.js";import"./ClockIcon-n_V3DURH.js";function ae(S,h){return i(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})])}const ne={class:"min-h-screen bg-gray-50"},re={class:"container-app py-4"},de={class:"lg:hidden mb-4"},ue={class:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide"},ce={key:0,class:"w-5 h-5 bg-primary-600 text-white text-xs rounded-full flex items-center justify-center"},me={class:"relative flex-shrink-0"},pe={key:0,class:"px-3 py-1.5 bg-primary-100 text-primary-700 rounded-full text-sm flex items-center gap-1 flex-shrink-0"},xe={key:1,class:"px-3 py-1.5 bg-primary-100 text-primary-700 rounded-full text-sm flex items-center gap-1 flex-shrink-0"},ye={key:2,class:"px-3 py-1.5 bg-primary-100 text-primary-700 rounded-full text-sm flex items-center gap-1 flex-shrink-0"},ve={class:"flex flex-col lg:flex-row gap-6"},ge={class:"hidden lg:block lg:w-64 flex-shrink-0"},fe={class:"card p-4 sticky top-20"},be={class:"mb-6"},he=["value"],_e={class:"mb-6"},ke={class:"mb-6"},we={class:"flex items-center gap-2"},Ce={class:"mb-6"},qe={class:"space-y-2"},Me=["onUpdate:modelValue","value"],Fe={class:"ml-2 text-sm text-gray-600"},Ve={class:"flex-1"},Le={class:"flex items-center justify-between mb-4"},$e={class:"text-lg lg:text-xl font-bold text-gray-900"},Pe={class:"text-sm text-gray-500"},Ue={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-3"},Ne={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-3"},je={key:2,class:"card p-8 text-center"},Ke={key:3,class:"mt-6 text-center"},Se=["disabled"],Ae={key:0,class:"fixed inset-0 z-50 flex items-end justify-center lg:hidden"},Re={class:"relative bg-white w-full rounded-t-2xl max-h-[85vh] flex flex-col animate-slide-up"},Be={class:"flex items-center justify-between p-4 border-b flex-shrink-0"},Ee={class:"flex-1 overflow-y-auto p-4 space-y-6"},He={class:"grid grid-cols-2 gap-2"},ze=["onClick"],De={class:"flex items-center gap-3"},Oe={class:"flex-1"},Te={class:"flex-1"},Ge={class:"flex flex-wrap gap-2 mt-3"},Ie=["onClick"],Qe={class:"flex flex-wrap gap-2"},Je=["onClick"],We={class:"flex gap-3 p-4 border-t bg-gray-50 flex-shrink-0 safe-area-bottom"},Xe={__name:"Search",setup(S){const h=Q(),A=J(),R=W(),B=oe(),_=g(!1),y=g([]),C=g(0),q=g(1),P=g(1),v=g(!1),l=X({q:"",category:"",city:"",min_price:"",max_price:"",condition:"",sort:"newest"}),U=[{value:"",label:"All"},{value:"new",label:"New"},{value:"like_new",label:"Like New"},{value:"good",label:"Good"},{value:"fair",label:"Fair"}],E=[{label:"Under ₹1K",min:"",max:1e3},{label:"₹1K - ₹5K",min:1e3,max:5e3},{label:"₹5K - ₹10K",min:5e3,max:1e4},{label:"₹10K - ₹50K",min:1e4,max:5e4},{label:"Over ₹50K",min:5e4,max:""}],M=k(()=>R.categories),N=k(()=>l.q),H=k(()=>q.value<P.value),j=k(()=>{let o=0;return l.category&&o++,l.city&&o++,(l.min_price||l.max_price)&&o++,l.condition&&o++,o}),z=o=>{const t=M.value.find(s=>s.slug===o);return(t==null?void 0:t.name)||o},D=o=>{l.min_price=o.min,l.max_price=o.max},K=o=>{l[o]="",r()},O=()=>{l.min_price="",l.max_price="",r()},r=async(o=!1)=>{_.value=!0;try{const t={...l,page:o?q.value+1:1};Object.keys(t).forEach(u=>{t[u]||delete t[u]});const s=await B.fetchListings(t,o);o?y.value=[...y.value,...s.data]:y.value=s.data,C.value=s.meta.total,q.value=s.meta.current_page,P.value=s.meta.last_page,A.replace({query:t})}finally{_.value=!1}},T=()=>r(!0),G=()=>{v.value=!1,r()},F=()=>{Object.keys(l).forEach(o=>{l[o]=o==="sort"?"newest":""}),v.value=!1,r()};return Y(()=>{const o=h.query;o.q&&(l.q=o.q),o.category&&(l.category=o.category),o.city&&(l.city=o.city),o.min_price&&(l.min_price=o.min_price),o.max_price&&(l.max_price=o.max_price),o.condition&&(l.condition=o.condition),o.sort&&(l.sort=o.sort),r()}),Z(()=>h.query,()=>{h.query.q!==l.q&&(l.q=h.query.q||"",r())}),(o,t)=>(i(),a("div",ne,[e("div",re,[e("div",de,[e("div",ue,[e("button",{onClick:t[0]||(t[0]=s=>v.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-white rounded-full border shadow-sm flex-shrink-0"},[c(m(ae),{class:"w-5 h-5 text-gray-600"}),t[15]||(t[15]=e("span",{class:"text-sm font-medium"},"Filters",-1)),j.value>0?(i(),a("span",ce,n(j.value),1)):f("",!0)]),e("div",me,[d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.sort=s),onChange:r,class:"appearance-none px-4 py-2 pr-8 bg-white rounded-full border shadow-sm text-sm font-medium"},[...t[16]||(t[16]=[e("option",{value:"newest"},"Newest",-1),e("option",{value:"price_low"},"Price: Low",-1),e("option",{value:"price_high"},"Price: High",-1),e("option",{value:"popular"},"Popular",-1)])],544),[[V,l.sort]]),c(m(ee),{class:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]),l.category?(i(),a("span",pe,[L(n(z(l.category))+" ",1),e("button",{onClick:t[2]||(t[2]=s=>K("category")),class:"hover:text-primary-900"},[c(m(w),{class:"w-4 h-4"})])])):f("",!0),l.city?(i(),a("span",xe,[L(n(l.city)+" ",1),e("button",{onClick:t[3]||(t[3]=s=>K("city")),class:"hover:text-primary-900"},[c(m(w),{class:"w-4 h-4"})])])):f("",!0),l.min_price||l.max_price?(i(),a("span",ye,[L(" ₹"+n(l.min_price||0)+" - ₹"+n(l.max_price||"∞")+" ",1),e("button",{onClick:O,class:"hover:text-primary-900"},[c(m(w),{class:"w-4 h-4"})])])):f("",!0)])]),e("div",ve,[e("aside",ge,[e("div",fe,[e("div",{class:"flex items-center justify-between mb-4"},[t[17]||(t[17]=e("h3",{class:"font-semibold text-gray-900"},"Filters",-1)),e("button",{onClick:F,class:"text-sm text-primary-600 hover:underline"}," Clear all ")]),e("div",be,[t[19]||(t[19]=e("h4",{class:"font-medium text-gray-700 mb-2 text-sm"},"Category",-1)),d(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.category=s),onChange:r,class:"input text-sm"},[t[18]||(t[18]=e("option",{value:""},"All Categories",-1)),(i(!0),a(p,null,x(M.value,s=>(i(),a("option",{key:s.id,value:s.slug},n(s.name),9,he))),128))],544),[[V,l.category]])]),e("div",_e,[t[20]||(t[20]=e("h4",{class:"font-medium text-gray-700 mb-2 text-sm"},"Location",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.city=s),type:"text",placeholder:"Enter city",class:"input text-sm",onChange:r},null,544),[[b,l.city]])]),e("div",ke,[t[22]||(t[22]=e("h4",{class:"font-medium text-gray-700 mb-2 text-sm"},"Price Range",-1)),e("div",we,[d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.min_price=s),type:"number",placeholder:"Min",class:"input text-sm"},null,512),[[b,l.min_price]]),t[21]||(t[21]=e("span",{class:"text-gray-400"},"-",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.max_price=s),type:"number",placeholder:"Max",class:"input text-sm"},null,512),[[b,l.max_price]])])]),e("div",Ce,[t[23]||(t[23]=e("h4",{class:"font-medium text-gray-700 mb-2 text-sm"},"Condition",-1)),e("div",qe,[(i(),a(p,null,x(U,s=>e("label",{key:s.value,class:"flex items-center"},[d(e("input",{type:"radio","onUpdate:modelValue":u=>l.condition=u,value:s.value,onChange:r,class:"text-primary-600"},null,40,Me),[[se,l.condition]]),e("span",Fe,n(s.label),1)])),64))])]),e("button",{onClick:r,class:"btn-primary w-full"}," Apply Filters ")])]),e("main",Ve,[e("div",Le,[e("div",null,[e("h1",$e,n(N.value?`"${N.value}"`:"All Listings"),1),e("p",Pe,n(C.value)+" results",1)]),d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.sort=s),onChange:r,class:"hidden lg:block input w-auto text-sm"},[...t[24]||(t[24]=[e("option",{value:"newest"},"Newest First",-1),e("option",{value:"price_low"},"Price: Low to High",-1),e("option",{value:"price_high"},"Price: High to Low",-1),e("option",{value:"popular"},"Most Popular",-1)])],544),[[V,l.sort]])]),_.value&&!y.value.length?(i(),a("div",Ue,[(i(),a(p,null,x(9,s=>e("div",{key:s,class:"card p-3"},[...t[25]||(t[25]=[e("div",{class:"skeleton aspect-square mb-2 rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-16 mb-1"},null,-1),e("div",{class:"skeleton h-4 w-full mb-1"},null,-1),e("div",{class:"skeleton h-3 w-20"},null,-1)])])),64))])):y.value.length?(i(),a("div",Ne,[(i(!0),a(p,null,x(y.value,s=>(i(),le(ie,{key:s.id,listing:s},null,8,["listing"]))),128))])):(i(),a("div",je,[c(m(te),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t[26]||(t[26]=e("h3",{class:"font-medium text-gray-900 mb-1"},"No results found",-1)),t[27]||(t[27]=e("p",{class:"text-sm text-gray-500 mb-4"},"Try adjusting your filters",-1)),e("button",{onClick:F,class:"btn-primary"}," Clear Filters ")])),H.value?(i(),a("div",Ke,[e("button",{onClick:T,disabled:_.value,class:"btn-secondary"},n(_.value?"Loading...":"Load More"),9,Se)])):f("",!0)])])]),v.value?(i(),a("div",Ae,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[9]||(t[9]=s=>v.value=!1)}),e("div",Re,[e("div",Be,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold"},"Filters",-1)),e("button",{onClick:t[10]||(t[10]=s=>v.value=!1),class:"p-2 hover:bg-gray-100 rounded-full"},[c(m(w),{class:"w-5 h-5"})])]),e("div",Ee,[e("div",null,[t[29]||(t[29]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Category",-1)),e("div",He,[e("button",{onClick:t[11]||(t[11]=s=>l.category=""),class:$(["p-3 rounded-xl border text-sm text-left transition",l.category?"hover:bg-gray-50":"border-primary-500 bg-primary-50 text-primary-700"])}," All Categories ",2),(i(!0),a(p,null,x(M.value.slice(0,7),s=>(i(),a("button",{key:s.id,onClick:u=>l.category=s.slug,class:$(["p-3 rounded-xl border text-sm text-left transition",l.category===s.slug?"border-primary-500 bg-primary-50 text-primary-700":"hover:bg-gray-50"])},n(s.name),11,ze))),128))])]),e("div",null,[t[30]||(t[30]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Location",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.city=s),type:"text",placeholder:"Enter city name",class:"input"},null,512),[[b,l.city]])]),e("div",null,[t[32]||(t[32]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Price Range",-1)),e("div",De,[e("div",Oe,[d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>l.min_price=s),type:"number",placeholder:"Min",class:"input text-center"},null,512),[[b,l.min_price]])]),t[31]||(t[31]=e("span",{class:"text-gray-400"},"to",-1)),e("div",Te,[d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.max_price=s),type:"number",placeholder:"Max",class:"input text-center"},null,512),[[b,l.max_price]])])]),e("div",Ge,[(i(),a(p,null,x(E,s=>e("button",{key:s.label,onClick:u=>D(s),class:"px-3 py-1.5 text-sm border rounded-full hover:bg-gray-50"},n(s.label),9,Ie)),64))])]),e("div",null,[t[33]||(t[33]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Condition",-1)),e("div",Qe,[(i(),a(p,null,x(U,s=>e("button",{key:s.value,onClick:u=>l.condition=s.value,class:$(["px-4 py-2 rounded-full border text-sm transition",l.condition===s.value?"border-primary-500 bg-primary-50 text-primary-700":"hover:bg-gray-50"])},n(s.label),11,Je)),64))])])]),e("div",We,[e("button",{onClick:F,class:"btn-secondary flex-1"}," Clear All "),e("button",{onClick:G,class:"btn-primary flex-1"}," Show "+n(C.value)+" Results ",1)])])])):f("",!0)]))}},rt=I(Xe,[["__scopeId","data-v-0e67f747"]]);export{rt as default};
