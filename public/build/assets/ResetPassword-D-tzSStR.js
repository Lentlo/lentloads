var $=(k,c,t)=>new Promise((w,u)=>{var p=o=>{try{m(t.next(o))}catch(y){u(y)}},g=o=>{try{m(t.throw(o))}catch(y){u(y)}},m=o=>o.done?w(o.value):Promise.resolve(o.value).then(p,g);m((t=t.apply(k,c)).next())});import{k as d,l as a,p as s,q as A,u as D,r as E,f as v,b as q,o as H,v as F,a as i,y as h,z as n,I as _,L as G,x as C,C as P,D as I,V as N,H as x,F as U,G as Z,B as R,A as V}from"./vue-vendor-DFuH7PQo.js";import{b as Y}from"./main-capacitor-C1-jC-GR.js";import{_ as W}from"./LoadingSpinner-BhE1Oi7s.js";import{r as J}from"./CheckCircleIcon-8Nj2ibsd.js";import{r as K}from"./ExclamationCircleIcon-m67OAyZC.js";import{r as S}from"./LockClosedIcon-Cw4mtIHb.js";import{r as B}from"./EyeIcon-3zADZ2Kt.js";import{r as M}from"./EyeSlashIcon-CviIqDI2.js";import"./ui-vendor-CosC-cw2.js";function O(k,c){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const Q={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},X={class:"w-full max-w-md"},ee={class:"text-center mb-8"},se={class:"card p-8"},te={key:0,class:"text-center"},re={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},oe={key:1,class:"text-center"},ae={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},le={key:2},ne={class:"text-center mb-6"},ie={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},de={class:"relative"},ue=["type"],pe={class:"relative"},me=["type"],ce={key:0,class:"space-y-2"},we={class:"flex gap-1"},fe={key:1,class:"text-sm text-red-600"},ve=["disabled"],Le={__name:"ResetPassword",setup(k){const c=A();D();const t=E({email:"",password:"",password_confirmation:"",token:""}),w=v(!1),u=v(!1),p=v(!1),g=v(!1),m=v(!1),o=v(""),y=["","Weak","Fair","Good","Strong"],j=["","bg-red-500","bg-yellow-500","bg-blue-500","bg-green-500"],T=["","text-red-600","text-yellow-600","text-blue-600","text-green-600"],b=q(()=>{const l=t.password;if(!l)return 0;let e=0;return l.length>=8&&e++,/[a-z]/.test(l)&&/[A-Z]/.test(l)&&e++,/\d/.test(l)&&e++,/[^a-zA-Z0-9]/.test(l)&&e++,e}),L=q(()=>t.password.length>=8&&t.password===t.password_confirmation),z=()=>$(this,null,function*(){var l,e,f;if(!L.value){t.password!==t.password_confirmation&&(o.value="Passwords do not match");return}o.value="",p.value=!0;try{yield Y.post("/auth/reset-password",t),g.value=!0}catch(r){((l=r.response)==null?void 0:l.status)===400||((e=r.response)==null?void 0:e.status)===422?(o.value=r.response.data.message||"Invalid or expired reset link",(f=r.response.data.errors)!=null&&f.token&&(m.value=!0)):o.value="Something went wrong. Please try again."}finally{p.value=!1}});return H(()=>{t.token=c.query.token||c.params.token||"",t.email=c.query.email||"",t.token||(m.value=!0)}),(l,e)=>{const f=F("router-link");return a(),d("div",Q,[s("div",X,[s("div",ee,[i(f,{to:"/",class:"inline-block"},{default:h(()=>[...e[5]||(e[5]=[s("h1",{class:"text-3xl font-bold text-primary-600"},"Lentloads",-1)])]),_:1})]),s("div",se,[g.value?(a(),d("div",te,[s("div",re,[i(n(J),{class:"w-8 h-8 text-green-600"})]),e[7]||(e[7]=s("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Password Reset!",-1)),e[8]||(e[8]=s("p",{class:"text-gray-500 mb-6"}," Your password has been successfully reset. You can now log in with your new password. ",-1)),i(f,{to:"/login",class:"btn-primary w-full"},{default:h(()=>[...e[6]||(e[6]=[_(" Go to Login ",-1)])]),_:1})])):m.value?(a(),d("div",oe,[s("div",ae,[i(n(K),{class:"w-8 h-8 text-red-600"})]),e[10]||(e[10]=s("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Invalid or Expired Link",-1)),e[11]||(e[11]=s("p",{class:"text-gray-500 mb-6"}," This password reset link is invalid or has expired. Please request a new one. ",-1)),i(f,{to:"/forgot-password",class:"btn-primary w-full"},{default:h(()=>[...e[9]||(e[9]=[_(" Request New Link ",-1)])]),_:1})])):(a(),d("div",le,[s("div",ne,[s("div",ie,[i(n(O),{class:"w-8 h-8 text-primary-600"})]),e[12]||(e[12]=s("h2",{class:"text-xl font-bold text-gray-900"},"Set new password",-1)),e[13]||(e[13]=s("p",{class:"text-gray-500 mt-1"}," Enter your new password below ",-1))]),s("form",{onSubmit:G(z,["prevent"]),class:"space-y-4"},[s("div",null,[e[14]||(e[14]=s("label",{class:"label"},"Email address",-1)),P(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.email=r),type:"email",class:"input bg-gray-50",readonly:""},null,512),[[I,t.email]])]),s("div",null,[e[15]||(e[15]=s("label",{class:"label"},"New Password",-1)),s("div",de,[i(n(S),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),P(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.password=r),type:w.value?"text":"password",class:"input pl-10 pr-10",placeholder:"Minimum 8 characters",required:"",minlength:"8"},null,8,ue),[[N,t.password]]),s("button",{type:"button",onClick:e[2]||(e[2]=r=>w.value=!w.value),class:"absolute right-3 top-1/2 -translate-y-1/2"},[w.value?(a(),x(n(M),{key:1,class:"w-5 h-5 text-gray-400"})):(a(),x(n(B),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),s("div",null,[e[16]||(e[16]=s("label",{class:"label"},"Confirm New Password",-1)),s("div",pe,[i(n(S),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),P(s("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.password_confirmation=r),type:u.value?"text":"password",class:"input pl-10 pr-10",placeholder:"Confirm your password",required:""},null,8,me),[[N,t.password_confirmation]]),s("button",{type:"button",onClick:e[4]||(e[4]=r=>u.value=!u.value),class:"absolute right-3 top-1/2 -translate-y-1/2"},[u.value?(a(),x(n(M),{key:1,class:"w-5 h-5 text-gray-400"})):(a(),x(n(B),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),t.password?(a(),d("div",ce,[s("div",we,[(a(),d(U,null,Z(4,r=>s("div",{key:r,class:R(["h-1 flex-1 rounded",r<=b.value?j[b.value]:"bg-gray-200"])},null,2)),64))]),s("p",{class:R(["text-xs",T[b.value]])},V(y[b.value]),3)])):C("",!0),o.value?(a(),d("p",fe,V(o.value),1)):C("",!0),s("button",{type:"submit",disabled:p.value||!L.value,class:"btn-primary w-full"},[p.value?(a(),x(W,{key:0,class:"mr-2"})):C("",!0),_(" "+V(p.value?"Resetting...":"Reset Password"),1)],8,ve)],32)]))])])])}}};export{Le as default};
