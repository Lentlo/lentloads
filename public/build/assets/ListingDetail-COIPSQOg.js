import{c as o,o as a,a as e,r as _,d as L,E as ve,Q as Ye,M as me,f as n,t as u,i as x,_ as he,D as pe,g,j as f,l as ge,F as N,h as E,p as R,z as P,B as re,R as De,m as Y,C as fe,O as Z,u as Be,b as Ne,e as Re,K as ue,S as Xe,y as Oe,w as ce,s as Ae,T as B,U as Ee,J as Fe}from"./main-BcQgb7cf.js";import{u as Pe}from"./listings-BCNQeUVe.js";import{L as Ze}from"./ListingCard-CpoulHqD.js";import{L as I}from"./leaflet-DrZv_XVW.js";import{_ as We}from"./LoadingSpinner-B1Y8Axy0.js";import{r as Ge}from"./ChatBubbleLeftIcon-Cim7KO1J.js";import{R as Qe}from"./ReportModal-CDsGoiP3.js";import{d as Je}from"./dayjs.min-CZ7wxAfL.js";import{r as Ke}from"./ClockIcon-BQCK61Ki.js";import{r as He}from"./EyeIcon-B01ZSI1s.js";import{r as qe}from"./StarIcon-Y4tNlYII.js";import{r as et}from"./CheckBadgeIcon-BmW5qLwq.js";import{r as de}from"./PhoneIcon-CFHCGaP4.js";import{r as tt}from"./FlagIcon-BJe-0qtb.js";import"./relativeTime-B1M9FoDl.js";import"./SparklesIcon-DVKFGY0E.js";import"./BoltIcon-DA3grOag.js";function st(b,c){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function lt(b,c){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function at(b,c){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const ot={class:"location-display"},it={class:"mt-3 space-y-2"},nt={class:"flex items-start gap-2"},rt={class:"text-gray-900 font-medium"},ut={key:0,class:"text-sm text-gray-500"},ct=["href"],dt={__name:"LocationDisplay",props:{latitude:{type:Number,default:null},longitude:{type:Number,default:null},locality:{type:String,default:""},city:{type:String,default:""},state:{type:String,default:""},postalCode:{type:String,default:""}},setup(b){delete I.Icon.Default.prototype._getIconUrl,I.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const c=b,$=_(null);let p=null,C=null;const M=L(()=>c.latitude&&c.longitude),t=L(()=>{const m=[];return c.locality&&m.push(c.locality),c.city&&m.push(c.city),c.state&&m.push(c.state),m.join(", ")||"Location not specified"}),j=L(()=>M.value?`https://www.google.com/maps/dir/?api=1&destination=${c.latitude},${c.longitude}`:"#");ve(()=>{h()}),Ye(()=>{p&&(p.remove(),p=null)});const h=()=>{if(!$.value)return;const m=c.latitude||20.5937,y=c.longitude||78.9629,U=M.value?14:5;p=I.map($.value,{scrollWheelZoom:!1,dragging:!I.Browser.mobile,tap:!1}).setView([m,y],U),I.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(p),M.value&&(I.circle([c.latitude,c.longitude],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(p),C=I.marker([c.latitude,c.longitude]).addTo(p))};return me(()=>[c.latitude,c.longitude],([m,y])=>{p&&m&&y&&(p.setView([m,y],14),C&&p.removeLayer(C),I.circle([m,y],{color:"#0d9488",fillColor:"#0d9488",fillOpacity:.2,radius:500}).addTo(p),C=I.marker([m,y]).addTo(p))}),(m,y)=>(a(),o("div",ot,[e("div",{ref_key:"mapContainer",ref:$,class:"h-48 rounded-lg border border-gray-200 z-0"},null,512),e("div",it,[e("div",nt,[y[0]||(y[0]=e("svg",{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("div",null,[e("p",rt,u(t.value),1),b.postalCode?(a(),o("p",ut,"PIN: "+u(b.postalCode),1)):n("",!0)])]),M.value?(a(),o("a",{key:0,href:j.value,target:"_blank",class:"inline-flex items-center gap-2 text-sm text-primary-600 hover:text-primary-700"},[...y[1]||(y[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),x(" Get Directions ",-1)])],8,ct)):n("",!0)])]))}},vt={class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center"},mt={class:"relative bg-white w-full sm:max-w-md sm:rounded-xl rounded-t-xl animate-slide-up max-h-[90vh] overflow-y-auto"},ht={class:"flex items-center justify-between p-4 border-b"},pt={key:0,class:"p-4 bg-gray-50 border-b"},gt={class:"flex gap-3"},ft=["src","alt"],_t={class:"flex-1 min-w-0"},yt={class:"font-medium text-gray-900 truncate"},bt={class:"text-lg font-bold text-primary-600"},kt={class:"p-4 border-b"},wt={class:"flex flex-wrap gap-2"},xt=["onClick"],$t={class:"p-4"},Ct={class:"mt-3"},Mt={class:"flex items-center gap-2 text-sm"},St={key:0,class:"mt-2 flex items-center gap-2"},jt=["max"],Tt={class:"flex gap-3 p-4 border-t bg-gray-50 sm:rounded-b-xl safe-area-bottom"},It=["disabled"],zt={__name:"ChatModal",props:{listing:{type:Object,required:!0}},emits:["close","sent"],setup(b,{emit:c}){const $=b,p=L(()=>{var k,i,d;return((i=(k=$.listing)==null?void 0:k.user)==null?void 0:i.id)||((d=$.listing)==null?void 0:d.user_id)}),C=c,M=pe(),t=_(""),j=_(!1),h=_(null),m=_(!1),y=["Is this still available?","Can you share more photos?","What is the condition?","Is the price negotiable?","Can I see it today?"],U=async()=>{var k,i;if(t.value.trim()){m.value=!0;try{const d={listing_id:$.listing.id,receiver_id:p.value,message:t.value.trim()};j.value&&h.value&&(d.offer_amount=h.value);const v=await fe.post("/conversations",d);Z.success("Message sent!"),C("sent",v.data.data),C("close");const z=v.data.data.conversation;M.push(`/messages/${z.uuid}`)}catch(d){if(((k=d.response)==null?void 0:k.status)===409){Z.info("You already have a conversation about this listing");const v=((i=d.response.data.data)==null?void 0:i.uuid)||d.response.data.uuid;M.push(`/messages/${v}`),C("close")}else Z.error("Failed to send message")}finally{m.value=!1}}};return(k,i)=>{var d;return a(),o("div",vt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:i[0]||(i[0]=v=>k.$emit("close"))}),e("div",mt,[e("div",ht,[i[6]||(i[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Contact Seller",-1)),e("button",{onClick:i[1]||(i[1]=v=>k.$emit("close")),class:"p-1 hover:bg-gray-100 rounded"},[g(f(ge),{class:"w-5 h-5 text-gray-500"})])]),b.listing?(a(),o("div",pt,[e("div",gt,[e("img",{src:b.listing.primary_image_url,alt:b.listing.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,ft),e("div",_t,[e("h4",yt,u(b.listing.title),1),e("p",bt,u(b.listing.formatted_price),1)])])])):n("",!0),e("div",kt,[i[7]||(i[7]=e("p",{class:"text-sm text-gray-500 mb-3"},"Quick messages:",-1)),e("div",wt,[(a(),o(N,null,E(y,v=>e("button",{key:v,onClick:z=>t.value=v,class:R(["px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition",t.value===v?"bg-primary-100 text-primary-700":""])},u(v),11,xt)),64))])]),e("div",$t,[P(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=v=>t.value=v),rows:"3",class:"input resize-none",placeholder:"Write your message..."},null,512),[[re,t.value]]),e("div",Ct,[e("label",Mt,[P(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=v=>j.value=v),class:"rounded text-primary-600"},null,512),[[De,j.value]]),i[8]||(i[8]=x(" Include an offer ",-1))]),j.value?(a(),o("div",St,[i[9]||(i[9]=e("span",{class:"text-gray-500"},"â‚¹",-1)),P(e("input",{"onUpdate:modelValue":i[4]||(i[4]=v=>h.value=v),type:"number",class:"input flex-1",placeholder:"Your offer amount",max:(d=b.listing)==null?void 0:d.price},null,8,jt),[[re,h.value,void 0,{number:!0}]])])):n("",!0)])]),e("div",Tt,[e("button",{onClick:i[5]||(i[5]=v=>k.$emit("close")),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:U,disabled:!t.value.trim()||m.value,class:"btn-primary flex-1"},[m.value?(a(),Y(We,{key:1,class:"w-5 h-5 mr-2"})):(a(),Y(f(Ge),{key:0,class:"w-5 h-5 mr-2"})),x(" "+u(m.value?"Sending...":"Send Message"),1)],8,It)])])])}}},Lt=he(zt,[["__scopeId","data-v-90892009"]]),Ut={class:"listing-detail-page"},Vt={key:0,class:"container-app py-6"},Yt={class:"image-gallery-section"},Dt=["src","alt"],Bt={key:0,class:"image-counter"},Nt={class:"image-badges"},Rt={key:0,class:"badge-featured"},Xt={key:1,class:"badge-urgent"},Ot={key:1,class:"swipe-dots"},At={key:0,class:"thumbnails-strip"},Et=["onClick"],Ft=["src","alt"],Pt={class:"container-app py-4"},Zt={class:"lg:grid lg:grid-cols-3 lg:gap-6"},Wt={class:"lg:col-span-2 space-y-4"},Gt={class:"detail-card"},Qt={class:"flex items-start justify-between gap-4"},Jt={class:"flex-1"},Kt={class:"price"},Ht={class:"title"},qt={class:"action-buttons"},es={class:"meta-info"},ts={class:"detail-card"},ss={class:"details-grid"},ls={key:0,class:"detail-item"},as={class:"value"},os={key:1,class:"detail-item"},is={class:"value"},ns={key:2,class:"detail-item"},rs={class:"value"},us={key:3,class:"detail-item"},cs={class:"value"},ds={key:4,class:"detail-item"},vs={class:"value"},ms={class:"detail-card"},hs={class:"description"},ps={class:"detail-card"},gs={class:"lg:col-span-1 space-y-4 mt-4 lg:mt-0"},fs={class:"seller-card"},_s={class:"seller-header"},ys=["src","alt"],bs={class:"seller-info"},ks={class:"seller-rating"},ws={class:"text-gray-400"},xs={key:0,class:"seller-location"},$s={key:0,class:"verified-badge"},Cs={class:"seller-actions"},Ms=["href"],Ss={key:0,class:"similar-section"},js={class:"similar-grid"},Ts=["src","alt"],Is={class:"lightbox-controls"},zs=["disabled"],Ls={class:"zoom-level"},Us=["disabled"],Vs={key:2,class:"lightbox-counter"},Ys={__name:"ListingDetail",setup(b){const c=Be(),$=pe(),p=Ne(),C=Pe(),M=_(!0),t=_(null),j=_([]),h=_(0),m=_(!1),y=_(!1),U=_(!1),k=_(!1),i=_(!1),d=_(1),v=_(0),z=_(0);let W=0,G=0,X=0;const D=_(0);let Q=0,O=!1;const _e=l=>{l.touches.length===1&&(Q=l.touches[0].clientX,O=!0)},ye=l=>{if(!O||l.touches.length!==1)return;const s=l.touches[0].clientX-Q;D.value=Math.max(-100,Math.min(100,s))},be=()=>{var s,r,w,S;if(!O)return;O=!1;const l=50;D.value>l&&((r=(s=t.value)==null?void 0:s.images)==null?void 0:r.length)>1?K():D.value<-l&&((S=(w=t.value)==null?void 0:w.images)==null?void 0:S.length)>1&&H(),D.value=0},J=L(()=>{var l,s,r,w;return(s=(l=t.value)==null?void 0:l.images)!=null&&s.length?(w=t.value.images[h.value])==null?void 0:w.url:(r=t.value)==null?void 0:r.primary_image_url}),A=L(()=>{var l,s,r;return((l=p.user)==null?void 0:l.id)===((r=(s=t.value)==null?void 0:s.user)==null?void 0:r.id)}),ke=L(()=>{var s;return(((s=t.value)==null?void 0:s.formatted_price)||"").replace(/\s*\(Negotiable\)/gi,"").trim()}),we=L(()=>{var s,r,w,S;const l=(r=(s=t.value)==null?void 0:s.user)==null?void 0:r.avatar_url;return l&&!l.includes("default")?l:"https://ui-avatars.com/api/?name="+encodeURIComponent(((S=(w=t.value)==null?void 0:w.user)==null?void 0:S.name)||"U")+"&background=7c3aed&color=fff&size=120"}),xe=l=>{if(!l)return"Recently";const s=Je(l);return s.isValid()?s.format("MMM D, YYYY"):"Recently"},$e=l=>({new:"New",like_new:"Like New",good:"Good",fair:"Fair",poor:"Poor"})[l]||(l==null?void 0:l.replace(/_/g," ")),K=()=>{h.value=h.value>0?h.value-1:t.value.images.length-1,F()},H=()=>{h.value=h.value<t.value.images.length-1?h.value+1:0,F()},q=l=>{var w,S;const s=l.target,r=(S=(w=t.value)==null?void 0:w.images)==null?void 0:S[h.value];r!=null&&r.medium_url&&s.src!==r.medium_url?s.src=r.medium_url:r!=null&&r.thumbnail_url&&s.src!==r.thumbnail_url?s.src=r.thumbnail_url:s.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect fill="#f3f4f6" width="400" height="300"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#9ca3af" font-size="16">Image not available</text></svg>')},Ce=()=>{i.value=!0,document.body.style.overflow="hidden"},ee=()=>{i.value=!1,document.body.style.overflow="",F()},F=()=>{d.value=1,v.value=0,z.value=0},Me=()=>{d.value<3&&(d.value+=.5)},Se=()=>{d.value>1&&(d.value-=.5,d.value===1&&(v.value=0,z.value=0))},je=l=>{l.touches.length===2?X=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY):l.touches.length===1&&(W=l.touches[0].clientX-v.value,G=l.touches[0].clientY-z.value)},Te=l=>{if(l.touches.length===2){const s=Math.hypot(l.touches[0].clientX-l.touches[1].clientX,l.touches[0].clientY-l.touches[1].clientY),r=s/X;d.value=Math.max(1,Math.min(3,d.value*r)),X=s}else l.touches.length===1&&d.value>1&&(v.value=l.touches[0].clientX-W,z.value=l.touches[0].clientY-G)},Ie=()=>{X=0},ze=async()=>{if(!p.isAuthenticated){$.push("/login");return}const l=await C.toggleFavorite(t.value.id);m.value=l.is_favorited},Le=()=>{if(!p.isAuthenticated){$.push("/login");return}y.value=!0},Ue=()=>{navigator.share&&navigator.share({title:t.value.title,text:`Check out: ${t.value.title}`,url:window.location.href})},Ve=async()=>{if(!p.isAuthenticated){$.push("/login");return}try{await fe.post(`/listings/${t.value.id}/track-contact`,{type:"phone"})}catch{}k.value=!0},te=async()=>{var l;try{const s=await C.fetchListing(c.params.slug);t.value=s.listing,j.value=s.similar,m.value=s.listing.is_favorited}catch(s){((l=s.response)==null?void 0:l.status)===404&&$.push("/404")}finally{M.value=!1}};return ve(()=>te()),me(()=>c.params.slug,(l,s)=>{l!==s&&(M.value=!0,h.value=0,k.value=!1,te())}),(l,s)=>{var w,S,se,le,ae,oe,ie,ne;const r=Re("router-link");return a(),o("div",Ut,[M.value?(a(),o("div",Vt,[...s[4]||(s[4]=[e("div",{class:"skeleton h-80 mb-4 rounded-lg"},null,-1),e("div",{class:"skeleton h-8 w-1/3 mb-2"},null,-1),e("div",{class:"skeleton h-6 w-full mb-4"},null,-1),e("div",{class:"skeleton h-24 w-full"},null,-1)])])):t.value?(a(),o(N,{key:1},[e("div",Yt,[e("div",{class:"main-image-container",onClick:Ce,onTouchstart:_e,onTouchmove:ye,onTouchend:be},[e("img",{src:J.value,alt:t.value.title,class:"main-image",style:ue({transform:`translateX(${D.value}px)`}),onError:q},null,44,Dt),((w=t.value.images)==null?void 0:w.length)>1?(a(),o("div",Bt,u(h.value+1)+" / "+u(t.value.images.length),1)):n("",!0),e("div",Nt,[t.value.is_featured?(a(),o("span",Rt,"Featured")):n("",!0),t.value.is_urgent?(a(),o("span",Xt,"Urgent")):n("",!0)]),((S=t.value.images)==null?void 0:S.length)>1?(a(),o("div",Ot,[(a(!0),o(N,null,E(t.value.images,(T,V)=>(a(),o("span",{key:V,class:R(["dot",{active:h.value===V}])},null,2))),128))])):n("",!0)],32),((se=t.value.images)==null?void 0:se.length)>1?(a(),o("div",At,[(a(!0),o(N,null,E(t.value.images,(T,V)=>(a(),o("button",{key:T.id,onClick:Ds=>h.value=V,class:R(["thumbnail",{active:h.value===V}])},[e("img",{src:T.thumbnail_url||T.url,alt:`Image ${V+1}`},null,8,Ft)],10,Et))),128))])):n("",!0)]),e("div",Pt,[e("div",Zt,[e("div",Wt,[e("div",Gt,[e("div",Qt,[e("div",Jt,[e("p",Kt,u(ke.value),1),e("h1",Ht,u(t.value.title),1)]),e("div",qt,[e("button",{onClick:ze,class:R(["action-btn",{"is-favorite":m.value}])},[g(f(Xe),{class:R(["w-6 h-6",m.value?"fill-current":""])},null,8,["class"])],2),e("button",{onClick:Ue,class:"action-btn"},[g(f(at),{class:"w-6 h-6"})])])]),e("div",es,[e("span",null,[g(f(Oe),{class:"w-4 h-4"}),x(" "+u(t.value.location),1)]),e("span",null,[g(f(Ke),{class:"w-4 h-4"}),x(" "+u(xe(t.value.published_at)),1)]),e("span",null,[g(f(He),{class:"w-4 h-4"}),x(" "+u(t.value.views_count)+" views",1)])])]),e("div",ts,[s[10]||(s[10]=e("h3",{class:"section-title"},"Details",-1)),e("div",ss,[t.value.condition?(a(),o("div",ls,[s[5]||(s[5]=e("span",{class:"label"},"Condition",-1)),e("span",as,u($e(t.value.condition)),1)])):n("",!0),t.value.brand?(a(),o("div",os,[s[6]||(s[6]=e("span",{class:"label"},"Brand",-1)),e("span",is,u(t.value.brand),1)])):n("",!0),t.value.model?(a(),o("div",ns,[s[7]||(s[7]=e("span",{class:"label"},"Model",-1)),e("span",rs,u(t.value.model),1)])):n("",!0),t.value.year?(a(),o("div",us,[s[8]||(s[8]=e("span",{class:"label"},"Year",-1)),e("span",cs,u(t.value.year),1)])):n("",!0),t.value.category?(a(),o("div",ds,[s[9]||(s[9]=e("span",{class:"label"},"Category",-1)),e("span",vs,u(t.value.category.name),1)])):n("",!0)])]),e("div",ms,[s[11]||(s[11]=e("h3",{class:"section-title"},"Description",-1)),e("p",hs,u(t.value.description),1)]),e("div",ps,[s[12]||(s[12]=e("h3",{class:"section-title"},"Location",-1)),g(dt,{latitude:t.value.latitude,longitude:t.value.longitude,locality:t.value.locality,city:t.value.city,state:t.value.state,"postal-code":t.value.postal_code},null,8,["latitude","longitude","locality","city","state","postal-code"])])]),e("div",gs,[e("div",fs,[e("div",_s,[e("img",{src:we.value,alt:t.value.user.name,class:"seller-avatar"},null,8,ys),e("div",bs,[g(r,{to:`/user/${t.value.user.id}`,class:"seller-name"},{default:ce(()=>[x(u(t.value.user.name),1)]),_:1},8,["to"]),e("div",ks,[g(f(qe),{class:"w-4 h-4 text-yellow-400 fill-current"}),e("span",null,u(t.value.user.rating||"0.0"),1),e("span",ws,"("+u(t.value.user.total_reviews||0)+")",1)]),t.value.user.city?(a(),o("p",xs,u(t.value.user.city),1)):n("",!0)])]),t.value.user.is_verified_seller?(a(),o("div",$s,[g(f(et),{class:"w-5 h-5"}),s[13]||(s[13]=x(" Verified Seller ",-1))])):n("",!0),e("div",Cs,[A.value?n("",!0):(a(),o("button",{key:0,onClick:Le,class:"btn-chat"},[g(f(Ae),{class:"w-5 h-5"}),s[14]||(s[14]=x(" Chat with Seller ",-1))])),t.value.user.phone&&!A.value&&!k.value?(a(),o("button",{key:1,onClick:Ve,class:"btn-phone"},[g(f(de),{class:"w-5 h-5"}),s[15]||(s[15]=x(" Show Phone Number ",-1))])):n("",!0),t.value.user.phone&&!A.value&&k.value?(a(),o("a",{key:2,href:`tel:${t.value.user.phone}`,class:"btn-phone-revealed"},[g(f(de),{class:"w-5 h-5"}),x(" "+u(t.value.user.phone),1)],8,Ms)):n("",!0),A.value?(a(),Y(r,{key:3,to:`/listing/${t.value.id}/edit`,class:"btn-edit"},{default:ce(()=>[...s[16]||(s[16]=[x(" Edit Listing ",-1)])]),_:1},8,["to"])):n("",!0)])]),s[18]||(s[18]=e("div",{class:"safety-card"},[e("h4",null,"Safety Tips"),e("ul",null,[e("li",null,"Meet in a safe public place"),e("li",null,"Check the item before you pay"),e("li",null,"Pay only after collecting the item"),e("li",null,"Never share financial information")])],-1)),e("button",{onClick:s[0]||(s[0]=T=>U.value=!0),class:"report-btn"},[g(f(tt),{class:"w-4 h-4"}),s[17]||(s[17]=x(" Report this ad ",-1))])])]),(le=j.value)!=null&&le.length?(a(),o("div",Ss,[s[19]||(s[19]=e("h2",{class:"similar-title"},"Similar Ads",-1)),e("div",js,[(a(!0),o(N,null,E(j.value,T=>(a(),Y(Ze,{key:T.id,listing:T},null,8,["listing"]))),128))])])):n("",!0)])],64)):n("",!0),i.value?(a(),o("div",{key:2,class:"lightbox",onClick:ee},[e("button",{onClick:ee,class:"lightbox-close"},[g(f(ge),{class:"w-8 h-8"})]),e("div",{class:"lightbox-content",onClick:s[1]||(s[1]=B(()=>{},["stop"]))},[e("img",{src:J.value,alt:t.value.title,class:"lightbox-image",style:ue({transform:`scale(${d.value}) translate(${v.value}px, ${z.value}px)`}),onError:q,onTouchstart:je,onTouchmove:Te,onTouchend:Ie},null,44,Ts)]),e("div",Is,[e("button",{onClick:B(Se,["stop"]),class:"zoom-btn",disabled:d.value<=1},[g(f(lt),{class:"w-6 h-6"})],8,zs),e("span",Ls,u(Math.round(d.value*100))+"%",1),e("button",{onClick:B(Me,["stop"]),class:"zoom-btn",disabled:d.value>=3},[g(f(Ee),{class:"w-6 h-6"})],8,Us)]),((ae=t.value.images)==null?void 0:ae.length)>1?(a(),o("button",{key:0,onClick:B(K,["stop"]),class:"lightbox-nav lightbox-prev"},[g(f(st),{class:"w-8 h-8"})])):n("",!0),((oe=t.value.images)==null?void 0:oe.length)>1?(a(),o("button",{key:1,onClick:B(H,["stop"]),class:"lightbox-nav lightbox-next"},[g(f(Fe),{class:"w-8 h-8"})])):n("",!0),((ie=t.value.images)==null?void 0:ie.length)>1?(a(),o("div",Vs,u(h.value+1)+" / "+u(t.value.images.length),1)):n("",!0)])):n("",!0),y.value?(a(),Y(Lt,{key:3,listing:t.value,onClose:s[2]||(s[2]=T=>y.value=!1)},null,8,["listing"])):n("",!0),U.value?(a(),Y(Qe,{key:4,type:"listing",id:(ne=t.value)==null?void 0:ne.id,onClose:s[3]||(s[3]=T=>U.value=!1)},null,8,["id"])):n("",!0)])}}},el=he(Ys,[["__scopeId","data-v-9736306e"]]);export{el as default};
