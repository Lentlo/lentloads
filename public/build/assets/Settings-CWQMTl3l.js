import{D as j,b as B,d as E,r as v,L as g,E as F,c as k,o as h,a as t,f as T,g as z,i as R,j as G,T as C,z as r,B as i,t as V,R as x,O as o,C as U}from"./main-BcQgb7cf.js";import{r as $}from"./CameraIcon-B6jSwC5v.js";const I={class:"min-h-screen bg-gray-50 py-6"},O={class:"container-app max-w-2xl"},J={class:"card p-6 mb-6"},L={class:"flex items-center gap-4 mb-6"},Z=["src","alt"],q={class:"btn-secondary cursor-pointer"},H=["value"],K={class:"grid grid-cols-2 gap-4"},Q=["disabled"],W={class:"card p-6 mb-6"},Y=["disabled"],_={class:"card p-6 mb-6"},ee={class:"space-y-4"},te={class:"flex items-center justify-between"},se={class:"relative inline-flex items-center cursor-pointer"},le={class:"flex items-center justify-between"},ae={class:"relative inline-flex items-center cursor-pointer"},re={class:"flex items-center justify-between"},oe={class:"relative inline-flex items-center cursor-pointer"},ne={class:"card p-6 border-red-200"},ie={class:"flex items-center justify-between"},de={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ue={class:"relative bg-white rounded-xl p-6 w-full max-w-md"},pe={class:"mb-4"},fe={class:"flex gap-2"},ce=["disabled"],ye={__name:"Settings",setup(me){const A=j(),p=B(),n=E(()=>p.user),f=v(!1),c=v(!1),m=v(!1),b=v(""),l=g({name:"",phone:"",bio:"",city:"",state:""}),a=g({current_password:"",password:"",password_confirmation:""}),d=g({email:!0,push:!0,messages:!0});F(()=>{n.value&&(l.name=n.value.name||"",l.phone=n.value.phone||"",l.bio=n.value.bio||"",l.city=n.value.city||"",l.state=n.value.state||"",n.value.notification_preferences&&Object.assign(d,n.value.notification_preferences))});const N=async u=>{const e=u.target.files[0];if(e){if(e.size>2*1024*1024){o.error("Image size must be less than 2MB");return}try{await p.updateAvatar(e),o.success("Profile photo updated")}catch{o.error("Failed to update photo")}}},S=async()=>{f.value=!0;try{await p.updateProfile(l),o.success("Profile updated")}catch{o.error("Failed to update profile")}finally{f.value=!1}},X=async()=>{if(a.password!==a.password_confirmation){o.error("Passwords do not match");return}c.value=!0;try{await p.changePassword(a),o.success("Password updated"),a.current_password="",a.password="",a.password_confirmation=""}catch{o.error("Failed to update password")}finally{c.value=!1}},D=async()=>{try{await U.put("/notifications/preferences",d),o.success("Preferences saved")}catch{o.error("Failed to save preferences")}},M=async()=>{try{await U.delete("/auth/account",{data:{password:b.value}}),o.success("Account deleted"),p.clearAuth(),A.push("/")}catch{o.error("Failed to delete account")}};return(u,e)=>{var y,w,P;return h(),k("div",I,[t("div",O,[e[38]||(e[38]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Account Settings",-1)),t("div",J,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Profile Information",-1)),t("div",L,[t("img",{src:(y=n.value)==null?void 0:y.avatar_url,alt:(w=n.value)==null?void 0:w.name,class:"w-20 h-20 rounded-full object-cover"},null,8,Z),t("div",null,[t("label",q,[z(G($),{class:"w-4 h-4 mr-2"}),e[15]||(e[15]=R(" Change Photo ",-1)),t("input",{type:"file",accept:"image/*",class:"hidden",onChange:N},null,32)]),e[16]||(e[16]=t("p",{class:"text-sm text-gray-500 mt-1"},"JPG, PNG. Max 2MB",-1))])]),t("form",{onSubmit:C(S,["prevent"]),class:"space-y-4"},[t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"Full Name",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.name=s),type:"text",class:"input"},null,512),[[i,l.name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"label"},"Email",-1)),t("input",{value:(P=n.value)==null?void 0:P.email,type:"email",class:"input bg-gray-50",disabled:""},null,8,H),e[19]||(e[19]=t("p",{class:"text-sm text-gray-500 mt-1"},"Email cannot be changed",-1))]),t("div",null,[e[20]||(e[20]=t("label",{class:"label"},"Phone Number",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.phone=s),type:"tel",class:"input",placeholder:"+91 XXXXX XXXXX"},null,512),[[i,l.phone]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"label"},"Bio",-1)),r(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.bio=s),rows:"3",class:"input",placeholder:"Tell buyers about yourself..."},null,512),[[i,l.bio]])]),t("div",K,[t("div",null,[e[22]||(e[22]=t("label",{class:"label"},"City",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.city=s),type:"text",class:"input"},null,512),[[i,l.city]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"label"},"State",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.state=s),type:"text",class:"input"},null,512),[[i,l.state]])])]),t("button",{type:"submit",disabled:f.value,class:"btn-primary"},V(f.value?"Saving...":"Save Changes"),9,Q)],32)]),t("div",W,[e[28]||(e[28]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Change Password",-1)),t("form",{onSubmit:C(X,["prevent"]),class:"space-y-4"},[t("div",null,[e[25]||(e[25]=t("label",{class:"label"},"Current Password",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.current_password=s),type:"password",class:"input"},null,512),[[i,a.current_password]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"label"},"New Password",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.password=s),type:"password",class:"input"},null,512),[[i,a.password]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"label"},"Confirm New Password",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.password_confirmation=s),type:"password",class:"input"},null,512),[[i,a.password_confirmation]])]),t("button",{type:"submit",disabled:c.value,class:"btn-primary"},V(c.value?"Updating...":"Update Password"),9,Y)],32)]),t("div",_,[e[35]||(e[35]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notification Preferences",-1)),t("div",ee,[t("div",te,[e[30]||(e[30]=t("div",null,[t("p",{class:"font-medium text-gray-900"},"Email notifications"),t("p",{class:"text-sm text-gray-500"},"Receive updates via email")],-1)),t("label",se,[r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>d.email=s),type:"checkbox",class:"sr-only peer"},null,512),[[x,d.email]]),e[29]||(e[29]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),t("div",le,[e[32]||(e[32]=t("div",null,[t("p",{class:"font-medium text-gray-900"},"Push notifications"),t("p",{class:"text-sm text-gray-500"},"Receive push notifications")],-1)),t("label",ae,[r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>d.push=s),type:"checkbox",class:"sr-only peer"},null,512),[[x,d.push]]),e[31]||(e[31]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),t("div",re,[e[34]||(e[34]=t("div",null,[t("p",{class:"font-medium text-gray-900"},"Message alerts"),t("p",{class:"text-sm text-gray-500"},"Get notified when you receive messages")],-1)),t("label",oe,[r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>d.messages=s),type:"checkbox",class:"sr-only peer"},null,512),[[x,d.messages]]),e[33]||(e[33]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])])]),t("button",{onClick:D,class:"btn-primary mt-4"}," Save Preferences ")]),t("div",ne,[e[37]||(e[37]=t("h2",{class:"text-lg font-semibold text-red-600 mb-4"},"Danger Zone",-1)),t("div",ie,[e[36]||(e[36]=t("div",null,[t("p",{class:"font-medium text-gray-900"},"Delete Account"),t("p",{class:"text-sm text-gray-500"},"Permanently delete your account and all data")],-1)),t("button",{onClick:e[11]||(e[11]=s=>m.value=!0),class:"btn-danger"}," Delete Account ")])])]),m.value?(h(),k("div",de,[t("div",{class:"absolute inset-0 bg-black/50",onClick:e[12]||(e[12]=s=>m.value=!1)}),t("div",ue,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Delete Account",-1)),e[41]||(e[41]=t("p",{class:"text-gray-500 mb-4"}," This action cannot be undone. All your listings, messages, and data will be permanently deleted. ",-1)),t("div",pe,[e[39]||(e[39]=t("label",{class:"label"},"Enter your password to confirm",-1)),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>b.value=s),type:"password",class:"input"},null,512),[[i,b.value]])]),t("div",fe,[t("button",{onClick:e[14]||(e[14]=s=>m.value=!1),class:"btn-secondary flex-1"}," Cancel "),t("button",{onClick:M,class:"btn-danger flex-1",disabled:!b.value}," Delete Account ",8,ce)])])])):T("",!0)])}}};export{ye as default};
