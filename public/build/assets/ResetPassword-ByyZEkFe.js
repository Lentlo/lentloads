var q=(k,c,t)=>new Promise((w,u)=>{var p=r=>{try{m(t.next(r))}catch(y){u(y)}},g=r=>{try{m(t.throw(r))}catch(y){u(y)}},m=r=>r.done?w(r.value):Promise.resolve(r.value).then(p,g);m((t=t.apply(k,c)).next())});import{k as d,l,p as s,q as I,u as z,r as A,f as v,b as N,o as D,v as H,a as i,y as h,A as n,C as _,L as U,x as C,D as P,E as Z,V as R,z as x,F as G,I as Y,H as S,B as V}from"./vue-vendor-Clry8SR-.js";import{b as W}from"./main-capacitor-rPhIOL4v.js";import{_ as J}from"./LoadingSpinner-Cm-rHxE2.js";import{r as K}from"./CheckCircleIcon-CSRmO4e-.js";import{r as O}from"./ExclamationCircleIcon-BCUTwR-f.js";import{r as B}from"./LockClosedIcon-D3FH919z.js";import{r as M}from"./EyeIcon-C--lcS42.js";import{r as T}from"./EyeSlashIcon-s2_WeKnM.js";import"./ui-vendor-B7DvqItC.js";function Q(k,c){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const X={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},ee={class:"w-full max-w-md"},se={class:"text-center mb-8"},te={class:"card p-8"},oe={key:0,class:"text-center"},re={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},ae={key:1,class:"text-center"},le={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},ne={key:2},ie={class:"text-center mb-6"},de={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},ue={class:"relative"},pe=["type"],me={class:"relative"},ce=["type"],we={key:0,class:"space-y-2"},fe={class:"flex gap-1"},ve={key:1,class:"text-sm text-red-600"},ye=["disabled"],$e={__name:"ResetPassword",setup(k){const c=I();z();const t=A({email:"",password:"",password_confirmation:"",token:""}),w=v(!1),u=v(!1),p=v(!1),g=v(!1),m=v(!1),r=v(""),y=["","Weak","Fair","Good","Strong"],j=["","bg-red-500","bg-yellow-500","bg-blue-500","bg-green-500"],E=["","text-red-600","text-yellow-600","text-blue-600","text-green-600"],b=N(()=>{const a=t.password;if(!a)return 0;let e=0;return a.length>=8&&e++,/[a-z]/.test(a)&&/[A-Z]/.test(a)&&e++,/\d/.test(a)&&e++,/[^a-zA-Z0-9]/.test(a)&&e++,e}),L=N(()=>t.password.length>=8&&t.password===t.password_confirmation),$=a=>{a&&setTimeout(()=>{a.scrollIntoView({behavior:"smooth",block:"center"})},300)},F=()=>q(this,null,function*(){var a,e,f;if(!L.value){t.password!==t.password_confirmation&&(r.value="Passwords do not match");return}r.value="",p.value=!0;try{yield W.post("/auth/reset-password",t),g.value=!0}catch(o){((a=o.response)==null?void 0:a.status)===400||((e=o.response)==null?void 0:e.status)===422?(r.value=o.response.data.message||"Invalid or expired reset link",(f=o.response.data.errors)!=null&&f.token&&(m.value=!0)):r.value="Something went wrong. Please try again."}finally{p.value=!1}});return D(()=>{t.token=c.query.token||c.params.token||"",t.email=c.query.email||"",t.token||(m.value=!0)}),(a,e)=>{const f=H("router-link");return l(),d("div",X,[s("div",ee,[s("div",se,[i(f,{to:"/",class:"inline-block"},{default:h(()=>[...e[7]||(e[7]=[s("h1",{class:"text-3xl font-bold text-primary-600"},"Lentloads",-1)])]),_:1})]),s("div",te,[g.value?(l(),d("div",oe,[s("div",re,[i(n(K),{class:"w-8 h-8 text-green-600"})]),e[9]||(e[9]=s("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Password Reset!",-1)),e[10]||(e[10]=s("p",{class:"text-gray-500 mb-6"}," Your password has been successfully reset. You can now log in with your new password. ",-1)),i(f,{to:"/login",class:"btn-primary w-full"},{default:h(()=>[...e[8]||(e[8]=[_(" Go to Login ",-1)])]),_:1})])):m.value?(l(),d("div",ae,[s("div",le,[i(n(O),{class:"w-8 h-8 text-red-600"})]),e[12]||(e[12]=s("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Invalid or Expired Link",-1)),e[13]||(e[13]=s("p",{class:"text-gray-500 mb-6"}," This password reset link is invalid or has expired. Please request a new one. ",-1)),i(f,{to:"/forgot-password",class:"btn-primary w-full"},{default:h(()=>[...e[11]||(e[11]=[_(" Request New Link ",-1)])]),_:1})])):(l(),d("div",ne,[s("div",ie,[s("div",de,[i(n(Q),{class:"w-8 h-8 text-primary-600"})]),e[14]||(e[14]=s("h2",{class:"text-xl font-bold text-gray-900"},"Set new password",-1)),e[15]||(e[15]=s("p",{class:"text-gray-500 mt-1"}," Enter your new password below ",-1))]),s("form",{onSubmit:U(F,["prevent"]),class:"space-y-4"},[s("div",null,[e[16]||(e[16]=s("label",{class:"label"},"Email address",-1)),P(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),type:"email",class:"input bg-gray-50",readonly:""},null,512),[[Z,t.email]])]),s("div",null,[e[17]||(e[17]=s("label",{class:"label"},"New Password",-1)),s("div",ue,[i(n(B),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),P(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),type:w.value?"text":"password",class:"input pl-10 pr-10",placeholder:"Minimum 8 characters",required:"",minlength:"8",onFocus:e[2]||(e[2]=o=>$(o.target))},null,40,pe),[[R,t.password]]),s("button",{type:"button",onClick:e[3]||(e[3]=o=>w.value=!w.value),class:"absolute right-3 top-1/2 -translate-y-1/2"},[w.value?(l(),x(n(T),{key:1,class:"w-5 h-5 text-gray-400"})):(l(),x(n(M),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),s("div",null,[e[18]||(e[18]=s("label",{class:"label"},"Confirm New Password",-1)),s("div",me,[i(n(B),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),P(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.password_confirmation=o),type:u.value?"text":"password",class:"input pl-10 pr-10",placeholder:"Confirm your password",required:"",onFocus:e[5]||(e[5]=o=>$(o.target))},null,40,ce),[[R,t.password_confirmation]]),s("button",{type:"button",onClick:e[6]||(e[6]=o=>u.value=!u.value),class:"absolute right-3 top-1/2 -translate-y-1/2"},[u.value?(l(),x(n(T),{key:1,class:"w-5 h-5 text-gray-400"})):(l(),x(n(M),{key:0,class:"w-5 h-5 text-gray-400"}))])])]),t.password?(l(),d("div",we,[s("div",fe,[(l(),d(G,null,Y(4,o=>s("div",{key:o,class:S(["h-1 flex-1 rounded",o<=b.value?j[b.value]:"bg-gray-200"])},null,2)),64))]),s("p",{class:S(["text-xs",E[b.value]])},V(y[b.value]),3)])):C("",!0),r.value?(l(),d("p",ve,V(r.value),1)):C("",!0),s("button",{type:"submit",disabled:p.value||!L.value,class:"btn-primary w-full"},[p.value?(l(),x(J,{key:0,class:"mr-2"})):C("",!0),_(" "+V(p.value?"Resetting...":"Reset Password"),1)],8,ye)],32)]))])])])}}};export{$e as default};
