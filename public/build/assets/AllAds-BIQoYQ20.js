import{x as z,y as D,d as r,e as A,z as E,f as H,c as a,o as t,a as s,g as _,F as p,i as v,K as I,L as q,j as K,t as k,C as M,n as x,w as Q,q as T,p as U,E as G,Q as J}from"./main-BBche1Ln.js";import{L as O}from"./ListingCard-BRMa0VJw.js";import{r as R}from"./MusicalNoteIcon-BBlMqlfT.js";import{r as B}from"./ShoppingBagIcon-D34uuVnT.js";import{a as N,b as W,r as X}from"./TruckIcon-Dsg2x05i.js";import{r as Y}from"./WrenchScrewdriverIcon-qoOwX9-z.js";import{r as F,a as Z}from"./HomeModernIcon-BmOA1caX.js";import"./listings-DgfO_60B.js";import"./dayjs.min-BTLq5Hqd.js";import"./relativeTime-BNktVWPQ.js";import"./SparklesIcon-18QpsHyJ.js";import"./BoltIcon-CXNrvnJD.js";const ee={class:"all-ads-page min-h-screen bg-gray-50"},se={class:"container-app py-4"},te={class:"mb-6"},oe={key:0,class:"grid grid-cols-3 sm:grid-cols-4 gap-3"},ae={key:1,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},le={class:"category-name"},re={key:2,class:"text-center py-4 text-gray-500 text-sm"},ne={class:"flex items-center justify-between mb-3"},ie={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},ce={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},de={key:2,class:"card p-8 text-center"},ue={key:3,class:"mt-6 text-center"},ge=["disabled"],pe={key:0,class:"flex items-center gap-2"},ve={key:1},me={key:4,class:"text-center text-sm text-gray-500 mt-4"},fe={__name:"AllAds",setup(ye){const S=l=>({mobiles:X,vehicles:N,property:F,jobs:Z,electronics:W,fashion:B,furniture:F,services:Y,bikes:N,books:B,sports:G,music:R})[l]||J,V=l=>({mobiles:"icon-purple",vehicles:"icon-blue",property:"icon-green",jobs:"icon-orange",electronics:"icon-indigo",fashion:"icon-pink",furniture:"icon-teal",services:"icon-amber"})[l]||"icon-gray",b=D(),d=r(!0),m=r([]),f=r(!0),c=r(!1),n=r([]),y=r("newest"),u=r(1),w=r(1),C=r(0),L=A(()=>m.value.filter(l=>!l.parent_id)),$=A(()=>u.value<w.value),j=async()=>{var l;d.value=!0;try{if((l=b.categories)!=null&&l.length)m.value=b.categories;else{const e=await M.get("/categories");m.value=e.data.data||[]}}catch(e){console.error("Failed to fetch categories:",e)}finally{d.value=!1}},h=async(l=!1)=>{var e,g,o;l?c.value=!0:(f.value=!0,u.value=1);try{const i=await M.get("/listings",{params:{sort:y.value,page:l?u.value+1:1,per_page:12}});l?n.value=[...n.value,...i.data.data]:n.value=i.data.data||[],C.value=((e=i.data.meta)==null?void 0:e.total)||0,u.value=((g=i.data.meta)==null?void 0:g.current_page)||1,w.value=((o=i.data.meta)==null?void 0:o.last_page)||1}catch(i){console.error("Failed to fetch listings:",i)}finally{f.value=!1,c.value=!1}},P=()=>{!c.value&&$.value&&h(!0)};return E(()=>{j(),h()}),(l,e)=>{const g=H("router-link");return t(),a("div",ee,[s("div",se,[e[8]||(e[8]=s("div",{class:"mb-4"},[s("h1",{class:"text-xl font-bold text-gray-900"},"All Ads"),s("p",{class:"text-sm text-gray-500"},"Browse by category or explore all listings")],-1)),s("div",te,[e[2]||(e[2]=s("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3"},"Categories",-1)),d.value?(t(),a("div",oe,[(t(),a(p,null,v(8,o=>s("div",{key:o,class:"category-skeleton"},[...e[1]||(e[1]=[s("div",{class:"skeleton w-10 h-10 rounded-lg mb-2"},null,-1),s("div",{class:"skeleton h-3 w-16"},null,-1)])])),64))])):(t(),a("div",ae,[(t(!0),a(p,null,v(L.value,o=>(t(),x(g,{key:o.id,to:`/category/${o.slug}`,class:"category-card"},{default:Q(()=>[s("div",{class:T(["category-icon",V(o.slug)])},[(t(),x(U(S(o.slug)),{class:"w-6 h-6"}))],2),s("span",le,k(o.name),1)]),_:2},1032,["to"]))),128))])),!d.value&&L.value.length===0?(t(),a("div",re," No categories found ")):_("",!0)]),s("div",null,[s("div",ne,[e[4]||(e[4]=s("h2",{class:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"All Listings",-1)),I(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),onChange:h,class:"sort-select"},[...e[3]||(e[3]=[s("option",{value:"newest"},"Newest First",-1),s("option",{value:"price_low"},"Price: Low to High",-1),s("option",{value:"price_high"},"Price: High to Low",-1)])],544),[[q,y.value]])]),f.value&&n.value.length===0?(t(),a("div",ie,[(t(),a(p,null,v(8,o=>s("div",{key:o,class:"card p-3"},[...e[5]||(e[5]=[s("div",{class:"skeleton h-32 mb-2 rounded-lg"},null,-1),s("div",{class:"skeleton h-4 w-20 mb-1"},null,-1),s("div",{class:"skeleton h-3 w-full"},null,-1)])])),64))])):n.value.length?(t(),a("div",ce,[(t(!0),a(p,null,v(n.value,o=>(t(),x(O,{key:o.id,listing:o},null,8,["listing"]))),128))])):(t(),a("div",de,[...e[6]||(e[6]=[s("p",{class:"text-gray-500"},"No listings found",-1)])])),$.value?(t(),a("div",ue,[s("button",{onClick:P,disabled:c.value,class:"load-more-btn"},[c.value?(t(),a("span",pe,[...e[7]||(e[7]=[s("svg",{class:"animate-spin w-4 h-4",viewBox:"0 0 24 24",fill:"none"},[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),s("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z",class:"opacity-75"})],-1),K(" Loading... ",-1)])])):(t(),a("span",ve,"Load More"))],8,ge)])):_("",!0),n.value.length>0?(t(),a("p",me," Showing "+k(n.value.length)+" of "+k(C.value)+" ads ",1)):_("",!0)])])])}}},Ne=z(fe,[["__scopeId","data-v-163ea866"]]);export{Ne as default};
