import{d as u,e as n,f as t,r as d,b as B,i as o,n as v,j as f,p as m,t as p,N as C,h as g,w as S,v as V,g as j,q as b,I as y}from"./main-CJNCjlVx.js";import{_ as N}from"./LoadingSpinner-DHivyJV7.js";import{r as P}from"./CheckCircleIcon-CERBtVXr.js";import{r as q}from"./LockClosedIcon-Cy9uIkd1.js";function E(h,s){return n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}const D={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},F={class:"w-full max-w-md"},L={class:"text-center mb-8"},M={class:"card p-8"},R={key:0,class:"text-center"},T={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},$={class:"text-gray-500 mb-6"},I=["disabled"],A={class:"mt-8 pt-6 border-t"},U={key:1},W={class:"text-center mb-6"},z={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},G={class:"relative"},H={key:0,class:"text-sm text-red-600 mt-1"},J=["disabled"],K={class:"mt-6 text-center"},Z={__name:"ForgotPassword",setup(h){const s=d(""),i=d(!1),c=d(!1),x=d(!1),r=d(""),_=async()=>{var l,e;r.value="",i.value=!0;try{await b.post("/auth/forgot-password",{email:s.value}),x.value=!0}catch(a){((l=a.response)==null?void 0:l.status)===422?r.value=a.response.data.message||"Invalid email address":((e=a.response)==null?void 0:e.status)===429?r.value="Too many attempts. Please try again later.":r.value="Something went wrong. Please try again."}finally{i.value=!1}},w=async()=>{var l;c.value=!0;try{await b.post("/auth/forgot-password",{email:s.value}),y.success("Reset link sent again!")}catch(e){((l=e.response)==null?void 0:l.status)===429?y.error("Please wait before requesting another link"):y.error("Failed to resend. Please try again.")}finally{c.value=!1}};return(l,e)=>{const a=B("router-link");return n(),u("div",D,[t("div",F,[t("div",L,[o(a,{to:"/",class:"inline-block"},{default:v(()=>[...e[1]||(e[1]=[t("h1",{class:"text-3xl font-bold text-primary-600"},"Lentloads",-1)])]),_:1})]),t("div",M,[x.value?(n(),u("div",R,[t("div",T,[o(f(P),{class:"w-8 h-8 text-green-600"})]),e[4]||(e[4]=t("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Check your email",-1)),t("p",$,[e[2]||(e[2]=m(" We've sent password reset instructions to ",-1)),t("strong",null,p(s.value),1)]),e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 mb-4"}," Didn't receive the email? Check your spam folder or ",-1)),t("button",{onClick:w,disabled:c.value,class:"text-primary-600 hover:underline"},p(c.value?"Sending...":"click here to resend"),9,I),t("div",A,[o(a,{to:"/login",class:"text-primary-600 hover:underline"},{default:v(()=>[...e[3]||(e[3]=[m(" ← Back to login ",-1)])]),_:1})])])):(n(),u("div",U,[t("div",W,[t("div",z,[o(f(q),{class:"w-8 h-8 text-primary-600"})]),e[6]||(e[6]=t("h2",{class:"text-xl font-bold text-gray-900"},"Forgot your password?",-1)),e[7]||(e[7]=t("p",{class:"text-gray-500 mt-1"}," Enter your email and we'll send you a reset link ",-1))]),t("form",{onSubmit:C(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[8]||(e[8]=t("label",{class:"label"},"Email address",-1)),t("div",G,[o(f(E),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S(t("input",{"onUpdate:modelValue":e[0]||(e[0]=k=>s.value=k),type:"email",class:"input pl-10",placeholder:"you@example.com",required:"",autofocus:""},null,512),[[V,s.value]])]),r.value?(n(),u("p",H,p(r.value),1)):g("",!0)]),t("button",{type:"submit",disabled:i.value||!s.value,class:"btn-primary w-full"},[i.value?(n(),j(N,{key:0,class:"mr-2"})):g("",!0),m(" "+p(i.value?"Sending...":"Send Reset Link"),1)],8,J)],32),t("div",K,[o(a,{to:"/login",class:"text-primary-600 hover:underline"},{default:v(()=>[...e[9]||(e[9]=[m(" ← Back to login ",-1)])]),_:1})])]))])])])}}};export{Z as default};
