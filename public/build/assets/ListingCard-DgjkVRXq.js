import{J as x,r as b,b as w,g as _,e as i,n as p,f as e,d as a,h as r,N as k,i as c,j as d,G as C,t as o,p as F,k as N}from"./main-CJNCjlVx.js";import{u as j}from"./listings-3ptuYXOO.js";import{d as g}from"./dayjs.min-Bof1u0Bp.js";import{r as B}from"./relativeTime-Ckc_g6N8.js";import{r as E}from"./HeartIcon-DbGhONso.js";const S={class:"relative aspect-[4/3] bg-gray-100 img-zoom"},A=["src","alt"],V={key:0,class:"absolute top-2 left-2 badge bg-yellow-400 text-yellow-900"},z={key:1,class:"absolute top-2 right-2 badge bg-red-500 text-white"},D={class:"p-4"},I={class:"text-lg font-bold text-gray-900"},L={class:"text-gray-700 font-medium line-clamp-2 mt-1"},T={class:"flex items-center justify-between mt-2 text-sm text-gray-500"},$={class:"flex items-center"},H={__name:"ListingCard",props:{listing:{type:Object,required:!0},showFavorite:{type:Boolean,default:!0}},setup(t){g.extend(B);const l=t,u=x(),m=j(),n=b(l.listing.is_favorited||!1),h=async()=>{if(!u.isAuthenticated)return;const s=await m.toggleFavorite(l.listing.id);n.value=s.is_favorited},f=s=>g(s).fromNow(),v=s=>{s.target.src="https://placehold.co/400x300/E5E7EB/9CA3AF?text=No+Image"};return(s,q)=>{const y=w("router-link");return i(),_(y,{to:`/listing/${t.listing.slug}`,class:"card-hover group block"},{default:p(()=>[e("div",S,[e("img",{src:t.listing.primary_image_url,alt:t.listing.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:v},null,40,A),t.listing.is_featured?(i(),a("div",V," Featured ")):r("",!0),t.listing.is_urgent?(i(),a("div",z," Urgent ")):r("",!0),t.showFavorite?(i(),a("button",{key:2,onClick:k(h,["prevent"]),class:"absolute bottom-2 right-2 w-8 h-8 bg-white rounded-full shadow flex items-center justify-center opacity-0 group-hover:opacity-100 transition"},[c(d(E),{class:C(["w-5 h-5",n.value?"text-red-500 fill-current":"text-gray-600"])},null,8,["class"])])):r("",!0)]),e("div",D,[e("p",I,o(t.listing.formatted_price),1),e("h3",L,o(t.listing.title),1),e("div",T,[e("span",$,[c(d(N),{class:"w-4 h-4 mr-1"}),F(" "+o(t.listing.location),1)]),e("span",null,o(f(t.listing.published_at||t.listing.created_at)),1)])])]),_:1},8,["to"])}}};export{H as _};
