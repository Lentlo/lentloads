import{c as n,o as l,a as e,x as te,u as ae,b as le,d as u,e as $,I as H,z as ne,f as oe,n as Y,g as v,D as ie,h as d,k as c,w as re,j as B,F as m,t as i,i as y,J as ue,q as w,V as q,m as de,K as ve,N as ce,U as pe,C as M}from"./main-CeWmT0Lm.js";import{d as J}from"./dayjs.min-BiuRtYLQ.js";import{L as me}from"./ListingCard-Dk-BQpZF.js";import{R as _e}from"./ReportModal-C9NCfxBn.js";import{r as ye}from"./UserIcon-B_Vjwgij.js";import{r as we}from"./CheckIcon-8WQ_YXPb.js";import{r as he}from"./FlagIcon-DHj3huQH.js";import{r as fe}from"./ShoppingBagIcon-BxvXLkJb.js";import{r as C}from"./StarIcon-CPeBG8q-.js";import"./listings-B47qvZnp.js";import"./relativeTime-UB1V0fS-.js";import"./SparklesIcon-w46enqeD.js";import"./BoltIcon-_4TpEJ4-.js";function ge(D,_){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function be(D,_){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}const ke={class:"profile-page"},xe={key:0,class:"container-app py-6"},$e={key:1,class:"container-app py-12"},Me={class:"empty-state"},Ce={class:"empty-icon"},Re={class:"profile-header"},Ae={class:"container-app"},Le={class:"header-content"},Se={class:"avatar-wrapper"},Ue=["src","alt"],Ve={key:0,class:"verified-check"},Ne={class:"user-info"},Ye={class:"user-name"},Be={class:"rating-row"},De={class:"stars"},Fe={class:"rating-text"},Ie={class:"reviews-count"},Pe={class:"meta-row"},Te={key:0},je={key:0,class:"bio"},ze={class:"stats-bar"},Ee={class:"stat"},Ge={class:"stat-value"},He={class:"stat"},qe={class:"stat-value"},Je={class:"stat"},Ke={class:"stat-value"},Oe={class:"container-app py-4"},We={class:"tabs"},Ze={key:0,class:"tab-content"},Qe={key:0,class:"listings-grid"},Xe={key:1,class:"listings-grid"},es={key:2,class:"empty-tab"},ss={key:1,class:"tab-content"},ts={key:0,class:"reviews-list"},as={key:1,class:"reviews-list"},ls=["src","alt"],ns={class:"review-content"},os={class:"review-header"},is={class:"reviewer-name"},rs={class:"review-date"},us={class:"review-stars"},ds={key:0,class:"review-text"},vs={key:2,class:"empty-tab"},cs={class:"review-modal"},ps={class:"review-modal-header"},ms={class:"form-group"},_s={class:"rating-input"},ys=["onClick","onMouseenter"],ws={key:0,class:"rating-label"},hs={class:"form-group"},fs={class:"type-buttons"},gs={class:"form-group"},bs={class:"char-count"},ks={key:0,class:"error-message"},xs=["disabled"],$s={__name:"UserProfile",setup(D){const _=ae(),F=le(),R=u(!0),A=u(!0),L=u(!0),o=u(null),S=u([]),h=u([]),p=u("listings"),U=u(!1),g=u(!1),V=u(0),k=u(!1),x=u(""),r=u({rating:0,type:"buyer",comment:""}),K=["Poor","Fair","Good","Very Good","Excellent"],O=$(()=>F.isAuthenticated),I=$(()=>{var t,s;return((t=F.user)==null?void 0:t.id)===((s=o.value)==null?void 0:s.id)}),W=$(()=>{var t;return Math.round(((t=o.value)==null?void 0:t.response_rate)||0)}),Z=$(()=>{var s,f;const t=(s=o.value)==null?void 0:s.avatar_url;return t&&!t.includes("default")&&!t.includes("null")?t:"https://ui-avatars.com/api/?name="+encodeURIComponent(((f=o.value)==null?void 0:f.name)||"U")+"&background=7c3aed&color=fff&size=200&bold=true"}),Q=t=>t!=null&&t.avatar_url&&!t.avatar_url.includes("default")?t.avatar_url:"https://ui-avatars.com/api/?name="+encodeURIComponent((t==null?void 0:t.name)||"U")+"&background=e2e8f0&color=64748b&size=80",X=t=>J(t).format("MMMM YYYY"),ee=t=>J(t).format("MMM D, YYYY"),N=async()=>{R.value=!0;try{const s=(await M.get(`/users/${_.params.id}`)).data.data;o.value={...s.user,member_since:s.member_since,response_rate:s.response_rate}}catch{o.value=null}finally{R.value=!1}},P=async()=>{A.value=!0;try{const t=await M.get(`/users/${_.params.id}/listings`);S.value=t.data.data}finally{A.value=!1}},T=async()=>{L.value=!0;try{const t=await M.get(`/users/${_.params.id}/reviews`);h.value=t.data.data}finally{L.value=!1}},se=async()=>{var t,s;if(r.value.rating){k.value=!0,x.value="";try{await M.post("/reviews",{reviewed_id:o.value.id,rating:r.value.rating,type:r.value.type,comment:r.value.comment||null}),g.value=!1,r.value={rating:0,type:"buyer",comment:""},p.value==="reviews"?T():h.value=[],N()}catch(f){x.value=((s=(t=f.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to submit review. Please try again."}finally{k.value=!1}}};return H(p,t=>{t==="reviews"&&!h.value.length&&T()}),H(()=>_.params.id,()=>{_.params.id&&(N(),P(),h.value=[],p.value="listings")}),ne(()=>{N(),P()}),(t,s)=>{var j,z;const f=oe("router-link");return l(),n("div",ke,[R.value?(l(),n("div",xe,[...s[11]||(s[11]=[ie('<div class="profile-header-skeleton" data-v-287bb8d9><div class="skeleton w-28 h-28 rounded-full" data-v-287bb8d9></div><div class="flex-1 space-y-3" data-v-287bb8d9><div class="skeleton h-7 w-1/3" data-v-287bb8d9></div><div class="skeleton h-4 w-1/4" data-v-287bb8d9></div><div class="skeleton h-4 w-1/2" data-v-287bb8d9></div></div></div>',1)])])):o.value?(l(),n(m,{key:2},[e("div",Re,[e("div",Ae,[e("div",Le,[e("div",Se,[e("img",{src:Z.value,alt:o.value.name,class:"avatar"},null,8,Ue),o.value.is_verified?(l(),n("div",Ve,[d(c(we),{class:"w-4 h-4"})])):v("",!0)]),e("div",Ne,[e("h1",Ye,i(o.value.name),1),e("div",Be,[e("div",De,[(l(),n(m,null,y(5,a=>d(c(C),{key:a,class:w(["w-4 h-4",a<=Math.round(o.value.rating||0)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),e("span",Fe,i(o.value.rating||"0.0"),1),e("span",Ie,"â€¢ "+i(o.value.reviews_count||0)+" reviews",1),!I.value&&O.value?(l(),n("button",{key:0,onClick:s[0]||(s[0]=a=>g.value=!0),class:"write-review-btn"},[d(c(be),{class:"w-4 h-4"}),s[15]||(s[15]=e("span",null,"Write Review",-1))])):v("",!0),I.value?v("",!0):(l(),n("button",{key:1,onClick:s[1]||(s[1]=a=>U.value=!0),class:"report-user"},[d(c(he),{class:"w-4 h-4"})]))]),e("div",Pe,[o.value.city?(l(),n("span",Te,[d(c(ue),{class:"w-4 h-4"}),B(" "+i(o.value.city)+i(o.value.state?`, ${o.value.state}`:""),1)])):v("",!0),e("span",null,[d(c(ge),{class:"w-4 h-4"}),B(" Member since "+i(X(o.value.created_at)),1)])]),o.value.bio?(l(),n("p",je,i(o.value.bio),1)):v("",!0)])]),e("div",ze,[e("div",Ee,[e("span",Ge,i(o.value.listings_count||0),1),s[16]||(s[16]=e("span",{class:"stat-label"},"Listings",-1))]),e("div",He,[e("span",qe,i(o.value.sold_count||0),1),s[17]||(s[17]=e("span",{class:"stat-label"},"Sold",-1))]),e("div",Je,[e("span",Ke,i(W.value)+"%",1),s[18]||(s[18]=e("span",{class:"stat-label"},"Response Rate",-1))])])])]),e("div",Oe,[e("div",We,[e("button",{onClick:s[2]||(s[2]=a=>p.value="listings"),class:w({active:p.value==="listings"})}," Listings ",2),e("button",{onClick:s[3]||(s[3]=a=>p.value="reviews"),class:w({active:p.value==="reviews"})}," Reviews ",2)]),p.value==="listings"?(l(),n("div",Ze,[A.value?(l(),n("div",Qe,[(l(),n(m,null,y(6,a=>e("div",{key:a,class:"listing-skeleton"},[...s[19]||(s[19]=[e("div",{class:"skeleton aspect-square rounded-lg"},null,-1),e("div",{class:"skeleton h-4 w-3/4 mt-2"},null,-1),e("div",{class:"skeleton h-4 w-1/2 mt-1"},null,-1)])])),64))])):S.value.length?(l(),n("div",Xe,[(l(!0),n(m,null,y(S.value,a=>(l(),Y(me,{key:a.id,listing:a},null,8,["listing"]))),128))])):(l(),n("div",es,[d(c(fe),{class:"w-12 h-12"}),s[20]||(s[20]=e("p",null,"No listings yet",-1))]))])):v("",!0),p.value==="reviews"?(l(),n("div",ss,[L.value?(l(),n("div",ts,[(l(),n(m,null,y(3,a=>e("div",{key:a,class:"review-skeleton"},[...s[21]||(s[21]=[e("div",{class:"skeleton w-10 h-10 rounded-full"},null,-1),e("div",{class:"flex-1 space-y-2"},[e("div",{class:"skeleton h-4 w-1/4"}),e("div",{class:"skeleton h-3 w-full"})],-1)])])),64))])):h.value.length?(l(),n("div",as,[(l(!0),n(m,null,y(h.value,a=>{var b,E;return l(),n("div",{key:a.id,class:"review-card"},[e("img",{src:Q(a.reviewer),alt:(b=a.reviewer)==null?void 0:b.name,class:"reviewer-avatar"},null,8,ls),e("div",ns,[e("div",os,[e("span",is,i((E=a.reviewer)==null?void 0:E.name),1),e("span",rs,i(ee(a.created_at)),1)]),e("div",us,[(l(),n(m,null,y(5,G=>d(c(C),{key:G,class:w(["w-4 h-4",G<=a.rating?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))]),a.comment?(l(),n("p",ds,i(a.comment),1)):v("",!0)])])}),128))])):(l(),n("div",vs,[d(c(C),{class:"w-12 h-12"}),s[22]||(s[22]=e("p",null,"No reviews yet",-1))]))])):v("",!0)])],64)):(l(),n("div",$e,[e("div",Me,[e("div",Ce,[d(c(ye),{class:"w-16 h-16"})]),s[13]||(s[13]=e("h2",null,"User not found",-1)),s[14]||(s[14]=e("p",null,"This user doesn't exist or has been removed.",-1)),d(f,{to:"/",class:"btn-primary"},{default:re(()=>[...s[12]||(s[12]=[B("Go Home",-1)])]),_:1})])])),U.value?(l(),Y(_e,{key:3,type:"user","item-id":(j=o.value)==null?void 0:j.id,onClose:s[4]||(s[4]=a=>U.value=!1)},null,8,["item-id"])):v("",!0),(l(),Y(pe,{to:"body"},[g.value?(l(),n("div",{key:0,class:"review-modal-overlay",onClick:s[10]||(s[10]=q(a=>g.value=!1,["self"]))},[e("div",cs,[e("div",ps,[e("h3",null,"Review "+i((z=o.value)==null?void 0:z.name),1),e("button",{onClick:s[5]||(s[5]=a=>g.value=!1),class:"close-btn"},[d(c(de),{class:"w-5 h-5"})])]),e("form",{onSubmit:q(se,["prevent"]),class:"review-form"},[e("div",ms,[s[23]||(s[23]=e("label",null,"Rating",-1)),e("div",_s,[(l(),n(m,null,y(5,a=>e("button",{key:a,type:"button",onClick:b=>r.value.rating=a,onMouseenter:b=>V.value=a,onMouseleave:s[6]||(s[6]=b=>V.value=0),class:"star-btn"},[d(c(C),{class:w(["w-8 h-8",a<=(V.value||r.value.rating)?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])],40,ys)),64))]),r.value.rating?(l(),n("span",ws,i(K[r.value.rating-1]),1)):v("",!0)]),e("div",hs,[s[24]||(s[24]=e("label",null,"I'm reviewing as a",-1)),e("div",fs,[e("button",{type:"button",onClick:s[7]||(s[7]=a=>r.value.type="buyer"),class:w({active:r.value.type==="buyer"})}," Buyer ",2),e("button",{type:"button",onClick:s[8]||(s[8]=a=>r.value.type="seller"),class:w({active:r.value.type==="seller"})}," Seller ",2)])]),e("div",gs,[s[25]||(s[25]=e("label",null,"Comment (optional)",-1)),ve(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=a=>r.value.comment=a),placeholder:"Share your experience with this user...",rows:"4",maxlength:"1000"},null,512),[[ce,r.value.comment]]),e("span",bs,i(r.value.comment.length)+"/1000",1)]),x.value?(l(),n("p",ks,i(x.value),1)):v("",!0),e("button",{type:"submit",class:"submit-btn",disabled:!r.value.rating||k.value},i(k.value?"Submitting...":"Submit Review"),9,xs)],32)])])):v("",!0)]))])}}},Is=te($s,[["__scopeId","data-v-287bb8d9"]]);export{Is as default};
