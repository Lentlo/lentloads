import{C as S,u as $,r as l,b as j,E as D,m as E,n as A,c as o,o as s,a as e,g as M,d as V,y,h as _,t as u,w as G,G as R,F as x,j as f,k as B,p as F}from"./main-BULliYwU.js";import{_ as T}from"./ListingCard-DlQtKyAR.js";import"./listings-DMetIArP.js";import"./dayjs.min-Bof1u0Bp.js";import"./relativeTime-Ckc_g6N8.js";import"./SparklesIcon-dCtopZVo.js";import"./BoltIcon-DFx_ytjU.js";import"./MapPinIcon-wvg4Xfje.js";import"./ClockIcon-D_EDorHt.js";const U={class:"min-h-screen bg-gray-50 py-6"},q={class:"container-app"},z={class:"flex items-center gap-2 text-sm mb-4"},I={class:"text-gray-900"},J={class:"flex items-center justify-between mb-6"},K={class:"text-2xl font-bold text-gray-900"},O={class:"text-gray-500"},Q={key:0,class:"flex flex-wrap gap-2 mb-6"},W={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},X={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Y={key:3,class:"card p-12 text-center"},Z={key:4,class:"mt-6 text-center"},tt=["disabled"],ut={__name:"CategoryListings",setup(et){const g=S();$();const c=l(!0),n=l(null),i=l([]),p=l("newest"),m=l(1),h=l(1),k=l(0),P=j(()=>m.value<h.value),w=async()=>{try{const r=await B.get(`/categories/${g.params.slug}`);n.value=r.data.data.category}catch{console.error("Failed to fetch category")}},d=async(r=!1)=>{c.value=!0;try{const t=await B.get("/listings",{params:{category:g.params.slug,sort:p.value,page:r?m.value+1:1}});r?i.value=[...i.value,...t.data.data]:i.value=t.data.data,k.value=t.data.meta.total,m.value=t.data.meta.current_page,h.value=t.data.meta.last_page}finally{c.value=!1}},H=()=>{d(!0)};return D(()=>g.params.slug,()=>{w(),d()}),E(()=>{w(),d()}),(r,t)=>{var b,C,L,N;const v=A("router-link");return s(),o("div",U,[e("div",q,[e("nav",z,[V(v,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:y(()=>[...t[1]||(t[1]=[_("Home",-1)])]),_:1}),t[3]||(t[3]=e("span",{class:"text-gray-400"},"/",-1)),V(v,{to:"/categories",class:"text-gray-500 hover:text-gray-700"},{default:y(()=>[...t[2]||(t[2]=[_("Categories",-1)])]),_:1}),t[4]||(t[4]=e("span",{class:"text-gray-400"},"/",-1)),e("span",I,u((b=n.value)==null?void 0:b.name),1)]),e("div",J,[e("div",null,[e("h1",K,u((C=n.value)==null?void 0:C.name),1),e("p",O,u(k.value)+" ads found",1)]),G(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),onChange:d,class:"input w-auto"},[...t[5]||(t[5]=[e("option",{value:"newest"},"Newest First",-1),e("option",{value:"price_low"},"Price: Low to High",-1),e("option",{value:"price_high"},"Price: High to Low",-1)])],544),[[R,p.value]])]),(N=(L=n.value)==null?void 0:L.children)!=null&&N.length?(s(),o("div",Q,[(s(!0),o(x,null,f(n.value.children,a=>(s(),F(v,{key:a.id,to:`/category/${a.slug}`,class:"px-4 py-2 bg-white rounded-full border hover:border-primary-500 hover:text-primary-600 text-sm"},{default:y(()=>[_(u(a.name),1)]),_:2},1032,["to"]))),128))])):M("",!0),c.value?(s(),o("div",W,[(s(),o(x,null,f(8,a=>e("div",{key:a,class:"card p-4"},[...t[6]||(t[6]=[e("div",{class:"skeleton h-40 mb-3"},null,-1),e("div",{class:"skeleton h-4 w-20 mb-2"},null,-1),e("div",{class:"skeleton h-4 w-full"},null,-1)])])),64))])):i.value.length?(s(),o("div",X,[(s(!0),o(x,null,f(i.value,a=>(s(),F(T,{key:a.id,listing:a},null,8,["listing"]))),128))])):(s(),o("div",Y,[...t[7]||(t[7]=[e("p",{class:"text-gray-500"},"No listings in this category yet",-1)])])),P.value?(s(),o("div",Z,[e("button",{onClick:H,disabled:c.value,class:"btn-secondary"}," Load More ",8,tt)])):M("",!0)])])}}};export{ut as default};
